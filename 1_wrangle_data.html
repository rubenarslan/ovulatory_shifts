<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Wrangle data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<script src="site_libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<script src="site_libs/viz-0.3/viz.js"></script>
<link href="site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="site_libs/grViz-binding-0.9.0/grViz.js"></script>
<script src="library/auto_tab_first_section.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="library/custom_styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 64px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 69px;
  margin-top: -69px;
}

.section h2 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h3 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h4 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h5 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h6 {
  padding-top: 69px;
  margin-top: -69px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Fertility diary</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="1_power_analysis.html">Power analysis</a>
</li>
<li>
  <a href="1_researcher_df_analysis.html">Researcher degree of freedom simulation</a>
</li>
<li>
  <a href="1_wrangle_data.html">Data wrangling</a>
</li>
<li>
  <a href="2_descriptives.html">Descriptives</a>
</li>
<li>
  <a href="3_fertility_as_prereg.html">Preregistered analyses</a>
</li>
<li>
  <a href="3_fertility_robustness.html">Robustness tests</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="data-wrangling" class="section level1 tab-content">
<h1>Data wrangling</h1>
<div id="get-data-and-merge" class="section level2 tab-content">
<h2>Get data and merge</h2>
<div id="set-up-basics" class="section level3">
<h3>set up basics</h3>
<pre class="r"><code>library(knitr)
opts_chunk$set(tidy = FALSE,cache = F, warning = F, message = F)

## ausfuehren zeilenweise mit dem run-knopf (rechts oben in diesem fenster-segment)
## oder mit strg-enter
source(&quot;0_helpers.R&quot;)
# get credentials
source(&quot;.password.R&quot;)
formr_connect(credentials$user, credentials$password, host = credentials$host)
credentials = list(host = credentials$host)</code></pre>
</div>
<div id="load-clean-aggregate-data" class="section level3">
<h3>Load, clean, aggregate data</h3>
<pre class="r"><code>theme_set(theme_tufte(base_size = 12, base_family = &#39;Helvetica Neue&#39;))
einleit = as.data.table(formr_raw_results(&quot;Einleitender_Fragebogen&quot;, host = credentials$host))
einleit_WAMS = as.data.table(formr_raw_results(&quot;Einleitender_Fragebogen_WAMS&quot;, host = credentials$host))
einleit = setDF(rbind.fill(einleit, einleit_WAMS))
rm(einleit_WAMS)
einleit_items = formr_items(&quot;Einleitender_Fragebogen_WAMS&quot;, host = credentials$host)
einleit = as.data.table(formr_post_process_results(einleit_items, einleit, compute_alphas = T,plot_likert = T ))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-1.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<pre class="r"><code>vorab_old = as.data.table(formr_raw_results(&quot;Vorab_Fragebogen1&quot;, host = credentials$host))
vorab_WAMS = as.data.table(formr_raw_results(&quot;Vorab_Fragebogen1_WAMS&quot;, host = credentials$host))
vorab_items = formr_items(&quot;Vorab_Fragebogen1_WAMS&quot;, host = credentials$host)

tagebuch = as.data.table(formr_results(&quot;Taeglicher_Fragebogen_1&quot;, host = credentials$host))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-3.png" width="672" /></p>
<pre><code>## Some items ( choice_of_clothing_2 choice_of_clothing_3 ) were negatively correlated with the total scale and 
## probably should be reversed.  
## To do this, run the function again with the &#39;check.keys=TRUE&#39; option
## Reliability analysis  choice_of_clothing  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.61       0.6    0.73      0.16 1.5 0.0031  3.2 0.72
## 
##  lower alpha upper     95% confidence boundaries
## 0.61 0.61 0.62 
## 
##  Reliability if an item is dropped:
##                      raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## choice_of_clothing_1      0.61      0.59    0.74      0.17 1.43   0.0032
## choice_of_clothing_2      0.72      0.72    0.77      0.27 2.59   0.0023
## choice_of_clothing_3      0.70      0.68    0.76      0.23 2.14   0.0023
## choice_of_clothing_4      0.47      0.45    0.62      0.10 0.80   0.0045
## choice_of_clothing_5      0.52      0.49    0.65      0.12 0.98   0.0041
## choice_of_clothing_6      0.51      0.49    0.66      0.12 0.95   0.0041
## choice_of_clothing_7      0.47      0.45    0.61      0.10 0.82   0.0045
## choice_of_clothing_8      0.53      0.51    0.68      0.13 1.03   0.0040
## 
##  Item statistics 
##                          n  raw.r  std.r  r.cor r.drop mean  sd
## choice_of_clothing_1 29967  0.465  0.444  0.275   0.22  3.2 1.5
## choice_of_clothing_2 29967 -0.105 -0.069 -0.260  -0.30  4.5 1.2
## choice_of_clothing_3 29967  0.093  0.112 -0.068  -0.15  3.7 1.4
## choice_of_clothing_4 29967  0.793  0.786  0.815   0.67  3.1 1.4
## choice_of_clothing_5 29967  0.691  0.687  0.665   0.54  2.1 1.3
## choice_of_clothing_6 29967  0.706  0.700  0.654   0.55  3.7 1.4
## choice_of_clothing_7 29967  0.784  0.779  0.817   0.66  2.5 1.4
## choice_of_clothing_8 29967  0.663  0.655  0.597   0.48  2.7 1.4
## 
## Non missing response frequency for each item
##                         1    2    3    4    5    6 miss
## choice_of_clothing_1 0.22 0.11 0.20 0.26 0.15 0.06    0
## choice_of_clothing_2 0.02 0.03 0.11 0.31 0.29 0.24    0
## choice_of_clothing_3 0.09 0.10 0.20 0.30 0.21 0.10    0
## choice_of_clothing_4 0.19 0.14 0.23 0.27 0.13 0.04    0
## choice_of_clothing_5 0.49 0.17 0.17 0.11 0.05 0.01    0
## choice_of_clothing_6 0.12 0.07 0.16 0.35 0.22 0.08    0
## choice_of_clothing_7 0.35 0.17 0.23 0.16 0.07 0.02    0
## choice_of_clothing_8 0.29 0.15 0.24 0.20 0.09 0.03    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-4.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  NARQ_admiration  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.87      0.87    0.83      0.68 6.5 0.0014  2.6 1.3
## 
##  lower alpha upper     95% confidence boundaries
## 0.86 0.87 0.87 
## 
##  Reliability if an item is dropped:
##                   raw_alpha std.alpha G6(smc) average_r S/N alpha se
## NARQ_admiration_1      0.78      0.78    0.63      0.63 3.5   0.0026
## NARQ_admiration_2      0.75      0.75    0.60      0.60 3.0   0.0029
## NARQ_admiration_3      0.90      0.90    0.81      0.81 8.8   0.0012
## 
##  Item statistics 
##                       n raw.r std.r r.cor r.drop mean  sd
## NARQ_admiration_1 29963  0.91  0.91  0.86   0.78  2.6 1.5
## NARQ_admiration_2 29963  0.92  0.92  0.88   0.81  2.6 1.5
## NARQ_admiration_3 29963  0.84  0.84  0.68   0.65  2.6 1.5
## 
## Non missing response frequency for each item
##                      1    2    3   4    5    6 miss
## NARQ_admiration_1 0.35 0.14 0.20 0.2 0.08 0.03    0
## NARQ_admiration_2 0.36 0.13 0.19 0.2 0.08 0.03    0
## NARQ_admiration_3 0.37 0.13 0.19 0.2 0.08 0.03    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-5.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  NARQ_rivalry  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.76      0.76     0.7      0.51 3.2 0.0023  1.3 0.69
## 
##  lower alpha upper     95% confidence boundaries
## 0.76 0.76 0.77 
## 
##  Reliability if an item is dropped:
##                raw_alpha std.alpha G6(smc) average_r S/N alpha se
## NARQ_rivalry_1      0.64      0.65    0.48      0.48 1.8   0.0041
## NARQ_rivalry_2      0.56      0.57    0.39      0.39 1.3   0.0050
## NARQ_rivalry_3      0.80      0.80    0.67      0.67 4.0   0.0023
## 
##  Item statistics 
##                    n raw.r std.r r.cor r.drop mean   sd
## NARQ_rivalry_1 29962  0.85  0.84  0.73   0.63  1.3 0.88
## NARQ_rivalry_2 29962  0.89  0.87  0.80   0.70  1.3 0.90
## NARQ_rivalry_3 29962  0.72  0.76  0.54   0.48  1.2 0.72
## 
## Non missing response frequency for each item
##                   1    2    3    4    5    6 miss
## NARQ_rivalry_1 0.82 0.08 0.05 0.03 0.01 0.01    0
## NARQ_rivalry_2 0.86 0.06 0.03 0.03 0.01 0.01    0
## NARQ_rivalry_3 0.87 0.06 0.03 0.02 0.01 0.00    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-6.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  male_jealousy  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.54      0.56    0.46       0.3 1.3 0.0044  1.3 0.64
## 
##  lower alpha upper     95% confidence boundaries
## 0.54 0.54 0.55 
## 
##  Reliability if an item is dropped:
##                 raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## male_jealousy_1      0.38      0.40    0.25      0.25 0.66   0.0067
## male_jealousy_2      0.48      0.50    0.33      0.33 1.00   0.0056
## male_jealousy_3      0.47      0.47    0.30      0.30 0.88   0.0062
## 
##  Item statistics 
##                     n raw.r std.r r.cor r.drop mean   sd
## male_jealousy_1 29962  0.78  0.75  0.54   0.40  1.4 0.96
## male_jealousy_2 29962  0.75  0.71  0.45   0.34  1.4 0.98
## male_jealousy_3 29962  0.65  0.72  0.48   0.36  1.2 0.68
## 
## Non missing response frequency for each item
##                    1    2    3    4    5    6 miss
## male_jealousy_1 0.82 0.07 0.05 0.04 0.01 0.01    0
## male_jealousy_2 0.83 0.06 0.04 0.04 0.01 0.01    0
## male_jealousy_3 0.92 0.04 0.02 0.01 0.01 0.01    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-7.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  male_mate_retention  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N    ase mean  sd
##       0.31      0.31    0.18      0.18 0.45 0.0079  3.2 1.5
## 
##  lower alpha upper     95% confidence boundaries
## 0.29 0.31 0.32 
## 
##  Reliability if an item is dropped:
##                       raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## male_mate_retention_1     0.184      0.18   0.034      0.18   NA       NA
## male_mate_retention_2     0.034      0.18      NA        NA 0.18   0.0025
## 
##  Item statistics 
##                           n raw.r std.r r.cor r.drop mean  sd
## male_mate_retention_1 29962  0.73  0.77  0.33   0.18  2.3 1.8
## male_mate_retention_2 29962  0.81  0.77  0.33   0.18  4.0 2.1
## 
## Non missing response frequency for each item
##                          1    2    3    4    5   6 miss
## male_mate_retention_1 0.59 0.06 0.07 0.12 0.07 0.1    0
## male_mate_retention_2 0.25 0.04 0.07 0.12 0.12 0.4    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-8.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  attention  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.74      0.75    0.59      0.59 2.9 0.0029  3.8 1.5
## 
##  lower alpha upper     95% confidence boundaries
## 0.74 0.74 0.75 
## 
##  Reliability if an item is dropped:
##             raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## attention_1      0.59      0.59    0.35      0.59   NA       NA
## attention_2      0.35      0.59      NA        NA 0.59   0.0045
## 
##  Item statistics 
##                 n raw.r std.r r.cor r.drop mean  sd
## attention_1 29960  0.88  0.89  0.69   0.59  4.3 1.5
## attention_2 29960  0.91  0.89  0.69   0.59  3.3 1.8
## 
## Non missing response frequency for each item
##                1    2    3    4    5    6 miss
## attention_1 0.10 0.05 0.10 0.26 0.24 0.25    0
## attention_2 0.26 0.11 0.17 0.18 0.14 0.14    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-9.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-10.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-11.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-12.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-13.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-14.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-15.png" width="672" /></p>
<pre class="r"><code>abschluss = as.data.table(formr_results(&quot;Abschluss_Fragebogen_1&quot;, host = credentials$host))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-16.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-17.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-2-18.png" width="672" /></p>
<pre class="r"><code>nachbe = formr_results(&quot;Nachbefragung_Menstruation&quot;, host = credentials$host) %&gt;% as.data.table()
nachbe_other_hormonal = as.data.table(formr_results(&quot;Nachbefragung_other_hormonal&quot;, compute_alphas = T, host = credentials$host))</code></pre>
</div>
<div id="eliminate-duplicates-due-to-testing-errors" class="section level3">
<h3>Eliminate duplicates due to testing, errors</h3>
<pre class="r"><code>test_sessions = c(einleit[duplicated(session), session], &quot;616ccf34994fcf7fa170a49c676496a96b26e9315ee81180939fc8bd951ea315&quot;)

einleit = einleit[ !session %in% test_sessions, ]
einleit = einleit[ !is.na(agreement), ]
stopifnot(0 == sum(duplicated(einleit$session)))

vorab_old = vorab_old[ !session %in% test_sessions, ]
vorab_WAMS = vorab_WAMS[ !session %in% test_sessions, ]
vorab = setDF(rbind.fill(vorab_old, vorab_WAMS))
vorab = as.data.table(formr_post_process_results(vorab_items, vorab,compute_alphas = T,plot_likert = T ))</code></pre>
<pre><code>## 
## Reliability analysis  attractiveness_finance  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean sd
##       0.73      0.74    0.58      0.58 2.8 0.014  2.9  1
## 
##  lower alpha upper     95% confidence boundaries
## 0.7 0.73 0.76 
## 
##  Reliability if an item is dropped:
##                          raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## attractiveness_finance_1      0.58      0.58    0.34      0.58   NA       NA
## attractiveness_finance_2      0.34      0.58      NA        NA 0.58    0.021
## 
##  Item statistics 
##                             n raw.r std.r r.cor r.drop mean  sd
## attractiveness_finance_1 1373  0.87  0.89  0.68   0.58  3.0 1.1
## attractiveness_finance_2 1373  0.91  0.89  0.68   0.58  2.7 1.3
## 
## Non missing response frequency for each item
##                             1    2    3    4    5 miss
## attractiveness_finance_1 0.08 0.26 0.31 0.29 0.06    0
## attractiveness_finance_2 0.17 0.32 0.23 0.14 0.13    0
## 
## Reliability analysis  SOI_R  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.85      0.84    0.88      0.38 5.4 0.006  2.5 0.81
## 
##  lower alpha upper     95% confidence boundaries
## 0.84 0.85 0.86 
## 
##  Reliability if an item is dropped:
##         raw_alpha std.alpha G6(smc) average_r S/N alpha se
## SOI_R_1      0.85      0.85    0.89      0.42 5.8   0.0062
## SOI_R_2      0.84      0.83    0.85      0.38 4.9   0.0065
## SOI_R_3      0.83      0.82    0.84      0.36 4.6   0.0069
## SOI_R_9      0.84      0.83    0.87      0.39 5.0   0.0063
## SOI_R_7      0.84      0.83    0.86      0.38 4.8   0.0064
## SOI_R_8      0.84      0.83    0.87      0.39 5.0   0.0063
## SOI_R_4      0.83      0.82    0.86      0.37 4.6   0.0071
## SOI_R_5      0.82      0.81    0.85      0.35 4.4   0.0075
## SOI_R_6      0.82      0.81    0.85      0.35 4.4   0.0076
## 
##  Item statistics 
##            n raw.r std.r r.cor r.drop mean   sd
## SOI_R_1 1209  0.40  0.47  0.34   0.33  2.2 0.63
## SOI_R_2 1209  0.66  0.65  0.64   0.55  2.1 1.21
## SOI_R_3 1209  0.74  0.73  0.73   0.64  2.3 1.32
## SOI_R_9 1209  0.59  0.62  0.55   0.49  2.1 0.99
## SOI_R_7 1209  0.64  0.67  0.63   0.54  2.5 1.14
## SOI_R_8 1209  0.58  0.62  0.56   0.48  2.2 0.98
## SOI_R_4 1209  0.75  0.71  0.68   0.65  3.5 1.38
## SOI_R_5 1209  0.80  0.77  0.74   0.70  2.7 1.47
## SOI_R_6 1209  0.81  0.78  0.76   0.72  3.3 1.46
## 
## Non missing response frequency for each item
##            1    2    3    4    5 miss
## SOI_R_1 0.07 0.74 0.14 0.04 0.01    0
## SOI_R_2 0.43 0.21 0.21 0.10 0.05    0
## SOI_R_3 0.41 0.17 0.22 0.12 0.08    0
## SOI_R_9 0.29 0.44 0.17 0.08 0.02    0
## SOI_R_7 0.20 0.39 0.20 0.15 0.06    0
## SOI_R_8 0.23 0.46 0.19 0.09 0.03    0
## SOI_R_4 0.12 0.15 0.17 0.25 0.32    0
## SOI_R_5 0.29 0.21 0.14 0.20 0.17    0
## SOI_R_6 0.17 0.15 0.15 0.24 0.29    0
## Some items ( MV_1 MV_2 ) were negatively correlated with the total scale and 
## probably should be reversed.  
## To do this, run the function again with the &#39;check.keys=TRUE&#39; option
## Reliability analysis  MV  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N   ase mean   sd
##       0.35      0.41    0.62      0.12 0.69 0.032  3.5 0.56
## 
##  lower alpha upper     95% confidence boundaries
## 0.28 0.35 0.41 
## 
##  Reliability if an item is dropped:
##      raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## MV_1      0.36      0.48    0.64     0.190 0.94    0.031
## MV_2      0.55      0.57    0.66     0.248 1.32    0.021
## MV_3      0.14      0.16    0.41     0.045 0.19    0.042
## MV_4      0.16      0.18    0.40     0.052 0.22    0.041
## MV_5      0.20      0.23    0.54     0.071 0.31    0.040
## 
##  Item statistics 
##         n raw.r std.r r.cor r.drop mean   sd
## MV_1 1244  0.45  0.39 0.158  0.090  3.8 1.03
## MV_2 1244  0.37  0.27 0.017 -0.096  2.8 1.29
## MV_3 1244  0.64  0.71 0.717  0.383  3.9 0.90
## MV_4 1244  0.63  0.70 0.716  0.342  3.5 0.97
## MV_5 1244  0.62  0.65 0.545  0.279  3.5 1.10
## 
## Non missing response frequency for each item
##         1    2    3    4    5 miss
## MV_1 0.02 0.09 0.23 0.35 0.31    0
## MV_2 0.18 0.29 0.23 0.17 0.13    0
## MV_3 0.01 0.07 0.19 0.48 0.25    0
## MV_4 0.03 0.11 0.33 0.39 0.14    0
## MV_5 0.06 0.13 0.22 0.41 0.18    0
## Some items ( MV_P_1 MV_P_2 ) were negatively correlated with the total scale and 
## probably should be reversed.  
## To do this, run the function again with the &#39;check.keys=TRUE&#39; option
## Reliability analysis  MV_P  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N   ase mean   sd
##        0.3      0.35    0.54     0.099 0.55 0.033  3.3 0.53
## 
##  lower alpha upper     95% confidence boundaries
## 0.24 0.3 0.37 
## 
##  Reliability if an item is dropped:
##        raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## MV_P_1      0.31      0.41    0.55     0.147 0.69    0.033
## MV_P_2      0.50      0.53    0.60     0.220 1.13    0.023
## MV_P_3      0.11      0.12    0.31     0.033 0.14    0.043
## MV_P_4      0.10      0.11    0.29     0.030 0.12    0.043
## MV_P_5      0.19      0.22    0.47     0.065 0.28    0.040
## 
##  Item statistics 
##           n raw.r std.r r.cor r.drop mean   sd
## MV_P_1 1244  0.48  0.42  0.15  0.086  3.6 1.05
## MV_P_2 1244  0.35  0.25 -0.04 -0.110  2.8 1.19
## MV_P_3 1244  0.61  0.68  0.68  0.318  3.6 0.92
## MV_P_4 1244  0.62  0.69  0.70  0.327  3.3 0.92
## MV_P_5 1244  0.57  0.61  0.45  0.215  3.1 1.03
## 
## Non missing response frequency for each item
##           1    2    3    4    5 miss
## MV_P_1 0.04 0.13 0.27 0.37 0.19    0
## MV_P_2 0.16 0.27 0.28 0.20 0.09    0
## MV_P_3 0.01 0.11 0.29 0.43 0.17    0
## MV_P_4 0.02 0.15 0.40 0.33 0.09    0
## MV_P_5 0.07 0.21 0.37 0.28 0.07    0
## 
## Reliability analysis  ZIP  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.89      0.89    0.89      0.55 8.5 0.0045  4.1 0.73
## 
##  lower alpha upper     95% confidence boundaries
## 0.88 0.89 0.9 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ZIP_1      0.88      0.88    0.87      0.55 7.3   0.0052
## ZIP_5      0.87      0.87    0.86      0.54 6.9   0.0055
## ZIP_6      0.89      0.89    0.88      0.57 8.0   0.0049
## ZIP_2      0.86      0.86    0.85      0.51 6.3   0.0059
## ZIP_3      0.87      0.87    0.87      0.54 7.0   0.0054
## ZIP_7      0.89      0.89    0.88      0.58 8.2   0.0047
## ZIP_4      0.88      0.88    0.87      0.55 7.3   0.0052
## 
##  Item statistics 
##          n raw.r std.r r.cor r.drop mean   sd
## ZIP_1 1244  0.78  0.78  0.73   0.69  4.0 0.90
## ZIP_5 1244  0.82  0.82  0.78   0.74  3.9 1.04
## ZIP_6 1244  0.70  0.72  0.65   0.61  4.5 0.77
## ZIP_2 1244  0.88  0.88  0.87   0.82  4.1 0.93
## ZIP_3 1244  0.81  0.81  0.77   0.73  4.2 0.93
## ZIP_7 1244  0.71  0.70  0.63   0.59  3.4 0.99
## ZIP_4 1244  0.78  0.78  0.73   0.69  4.4 0.93
## 
## Non missing response frequency for each item
##          1    2    3    4    5 miss
## ZIP_1 0.01 0.06 0.17 0.45 0.31    0
## ZIP_5 0.02 0.10 0.18 0.35 0.36    0
## ZIP_6 0.01 0.02 0.07 0.24 0.66    0
## ZIP_2 0.01 0.05 0.14 0.37 0.43    0
## ZIP_3 0.01 0.05 0.16 0.34 0.44    0
## ZIP_7 0.05 0.15 0.28 0.44 0.09    0
## ZIP_4 0.01 0.05 0.10 0.17 0.67    0
## 
## Reliability analysis  RJS  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.91      0.91     0.9      0.62 9.7 0.004  2.3 0.95
## 
##  lower alpha upper     95% confidence boundaries
## 0.9 0.91 0.91 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## RJS_1      0.90      0.90    0.88      0.64 8.8   0.0044
## RJS_2      0.90      0.90    0.88      0.64 8.8   0.0045
## RJS_3      0.88      0.88    0.86      0.60 7.4   0.0053
## RJS_4      0.90      0.90    0.89      0.65 9.4   0.0043
## RJS_5      0.87      0.87    0.86      0.58 7.0   0.0056
## RJS_6      0.88      0.88    0.87      0.60 7.6   0.0051
## 
##  Item statistics 
##          n raw.r std.r r.cor r.drop mean  sd
## RJS_1 1244  0.80  0.79  0.72   0.69  2.7 1.3
## RJS_2 1244  0.78  0.79  0.72   0.68  1.9 1.0
## RJS_3 1244  0.87  0.87  0.85   0.81  2.7 1.2
## RJS_4 1244  0.75  0.76  0.68   0.65  1.9 1.0
## RJS_5 1244  0.90  0.90  0.89   0.85  2.3 1.2
## RJS_6 1244  0.86  0.86  0.83   0.79  2.1 1.2
## 
## Non missing response frequency for each item
##          1    2    3    4    5 miss
## RJS_1 0.23 0.22 0.27 0.19 0.09    0
## RJS_2 0.43 0.34 0.13 0.08 0.02    0
## RJS_3 0.18 0.30 0.25 0.19 0.07    0
## RJS_4 0.45 0.33 0.13 0.07 0.03    0
## RJS_5 0.32 0.27 0.22 0.15 0.05    0
## RJS_6 0.38 0.31 0.16 0.10 0.05    0
## 
## Reliability analysis  CJS  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.88      0.88    0.87      0.54 7.2 0.0053  2.4 0.9
## 
##  lower alpha upper     95% confidence boundaries
## 0.87 0.88 0.89 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## CJS_2      0.86      0.86    0.84      0.54 5.9   0.0063
## CJS_5      0.87      0.87    0.85      0.57 6.7   0.0058
## CJS_6      0.84      0.84    0.82      0.51 5.1   0.0074
## CJS_1      0.84      0.84    0.83      0.52 5.4   0.0068
## CJS_3      0.87      0.87    0.86      0.57 6.7   0.0057
## CJS_4      0.86      0.86    0.85      0.55 6.0   0.0063
## 
##  Item statistics 
##          n raw.r std.r r.cor r.drop mean   sd
## CJS_2 1244  0.79  0.79  0.74   0.68  2.4 1.20
## CJS_5 1244  0.72  0.72  0.65   0.60  1.9 1.06
## CJS_6 1244  0.88  0.87  0.86   0.79  2.6 1.32
## CJS_1 1244  0.84  0.84  0.82   0.76  2.5 1.09
## CJS_3 1244  0.73  0.73  0.63   0.60  3.2 1.14
## CJS_4 1244  0.77  0.78  0.72   0.68  1.9 0.98
## 
## Non missing response frequency for each item
##          1    2    3    4    5 miss
## CJS_2 0.27 0.29 0.24 0.14 0.06    0
## CJS_5 0.48 0.28 0.14 0.08 0.02    0
## CJS_6 0.27 0.26 0.20 0.18 0.10    0
## CJS_1 0.19 0.34 0.27 0.15 0.04    0
## CJS_3 0.09 0.18 0.27 0.33 0.13    0
## CJS_4 0.41 0.37 0.13 0.07 0.02    0
## 
## Reliability analysis  SJS  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N  ase mean   sd
##       0.77      0.78    0.75      0.37 3.5 0.01  1.2 0.27
## 
##  lower alpha upper     95% confidence boundaries
## 0.75 0.77 0.79 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## SJS_1      0.72      0.73    0.69      0.35 2.7   0.0123
## SJS_4      0.71      0.73    0.69      0.35 2.6   0.0129
## SJS_6      0.73      0.75    0.71      0.37 2.9   0.0120
## SJS_2      0.74      0.75    0.71      0.37 3.0   0.0115
## SJS_3      0.72      0.73    0.70      0.35 2.7   0.0124
## SJS_5      0.77      0.78    0.74      0.41 3.5   0.0099
## 
##  Item statistics 
##          n raw.r std.r r.cor r.drop mean   sd
## SJS_1 1244  0.71  0.73  0.67   0.57  1.2 0.36
## SJS_4 1244  0.75  0.74  0.68   0.60  1.2 0.43
## SJS_6 1244  0.70  0.68  0.59   0.52  1.3 0.44
## SJS_2 1244  0.62  0.67  0.57   0.49  1.1 0.29
## SJS_3 1244  0.71  0.72  0.65   0.56  1.2 0.38
## SJS_5 1244  0.61  0.58  0.43   0.38  1.3 0.46
## 
## Non missing response frequency for each item
##          1    2 miss
## SJS_1 0.84 0.16    0
## SJS_4 0.76 0.24    0
## SJS_6 0.74 0.26    0
## SJS_2 0.91 0.09    0
## SJS_3 0.82 0.18    0
## SJS_5 0.70 0.30    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  NARQ  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.83      0.82    0.87      0.21 4.7 0.0073  2.4 0.51
## 
##  lower alpha upper     95% confidence boundaries
## 0.81 0.83 0.84 
## 
##  Reliability if an item is dropped:
##         raw_alpha std.alpha G6(smc) average_r S/N alpha se
## NARQ_2       0.82      0.82    0.86      0.21 4.4   0.0076
## NARQ_11      0.83      0.83    0.87      0.22 4.8   0.0071
## NARQ_5       0.82      0.82    0.86      0.21 4.4   0.0077
## NARQ_3       0.81      0.81    0.85      0.20 4.2   0.0080
## NARQ_15      0.81      0.81    0.86      0.20 4.3   0.0078
## NARQ_18      0.82      0.82    0.87      0.22 4.7   0.0073
## NARQ_16      0.81      0.81    0.86      0.20 4.3   0.0077
## NARQ_1       0.82      0.81    0.86      0.20 4.4   0.0077
## NARQ_14      0.82      0.82    0.87      0.22 4.7   0.0074
## NARQ_17      0.82      0.81    0.86      0.20 4.4   0.0076
## NARQ_4       0.81      0.81    0.85      0.20 4.3   0.0078
## NARQ_13      0.82      0.82    0.86      0.21 4.4   0.0075
## NARQ_6       0.82      0.81    0.86      0.20 4.4   0.0076
## NARQ_7       0.82      0.82    0.86      0.21 4.5   0.0075
## NARQ_12      0.81      0.81    0.86      0.20 4.3   0.0077
## NARQ_8       0.81      0.81    0.86      0.20 4.3   0.0079
## NARQ_9       0.81      0.81    0.85      0.20 4.3   0.0078
## NARQ_10      0.81      0.81    0.86      0.20 4.3   0.0077
## 
##  Item statistics 
##            n raw.r std.r r.cor r.drop mean   sd
## NARQ_2  1208  0.48  0.49  0.44   0.40  1.9 0.94
## NARQ_11 1208  0.26  0.26  0.17   0.15  3.1 1.03
## NARQ_5  1208  0.52  0.49  0.44   0.42  3.7 1.07
## NARQ_3  1208  0.63  0.61  0.60   0.55  2.8 1.10
## NARQ_15 1208  0.58  0.56  0.54   0.49  2.6 1.17
## NARQ_18 1208  0.35  0.34  0.28   0.25  3.2 0.93
## NARQ_16 1208  0.56  0.54  0.53   0.47  2.8 1.07
## NARQ_1  1208  0.54  0.52  0.48   0.44  3.1 1.10
## NARQ_14 1208  0.29  0.36  0.29   0.24  1.1 0.45
## NARQ_17 1208  0.48  0.52  0.49   0.40  1.5 0.81
## NARQ_4  1208  0.56  0.57  0.55   0.48  2.0 0.99
## NARQ_13 1208  0.46  0.49  0.46   0.37  1.6 0.94
## NARQ_6  1208  0.54  0.53  0.51   0.44  2.7 1.23
## NARQ_7  1208  0.47  0.45  0.43   0.37  3.1 1.01
## NARQ_12 1208  0.55  0.56  0.55   0.48  1.8 0.91
## NARQ_8  1208  0.59  0.58  0.55   0.51  2.3 1.09
## NARQ_9  1208  0.58  0.58  0.57   0.49  2.0 1.12
## NARQ_10 1208  0.54  0.54  0.51   0.45  1.9 1.06
## 
## Non missing response frequency for each item
##            1    2    3    4    5 miss
## NARQ_2  0.45 0.31 0.18 0.05 0.01    0
## NARQ_11 0.05 0.24 0.33 0.29 0.09    0
## NARQ_5  0.04 0.10 0.23 0.37 0.27    0
## NARQ_3  0.14 0.26 0.33 0.22 0.06    0
## NARQ_15 0.22 0.27 0.27 0.19 0.05    0
## NARQ_18 0.04 0.18 0.42 0.29 0.07    0
## NARQ_16 0.13 0.27 0.34 0.22 0.05    0
## NARQ_1  0.11 0.18 0.37 0.25 0.09    0
## NARQ_14 0.93 0.04 0.02 0.00 0.00    0
## NARQ_17 0.68 0.20 0.09 0.03 0.01    0
## NARQ_4  0.35 0.38 0.18 0.07 0.02    0
## NARQ_13 0.62 0.21 0.11 0.05 0.01    0
## NARQ_6  0.19 0.28 0.22 0.23 0.08    0
## NARQ_7  0.06 0.21 0.38 0.27 0.07    0
## NARQ_12 0.48 0.35 0.11 0.05 0.01    0
## NARQ_8  0.28 0.29 0.28 0.13 0.02    0
## NARQ_9  0.41 0.29 0.18 0.08 0.04    0
## NARQ_10 0.46 0.27 0.16 0.09 0.02    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  BFI_open  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.82      0.82    0.84      0.32 4.6 0.0076  3.7 0.65
## 
##  lower alpha upper     95% confidence boundaries
## 0.81 0.82 0.84 
## 
##  Reliability if an item is dropped:
##             raw_alpha std.alpha G6(smc) average_r S/N alpha se
## BFI_open_1       0.79      0.79    0.80      0.30 3.9   0.0088
## BFI_open_2       0.81      0.81    0.82      0.32 4.2   0.0083
## BFI_open_3       0.82      0.82    0.83      0.33 4.5   0.0079
## BFI_open_4       0.80      0.81    0.82      0.32 4.2   0.0083
## BFI_open_5       0.79      0.79    0.80      0.30 3.8   0.0088
## BFI_open_6       0.79      0.80    0.80      0.30 3.9   0.0089
## BFI_open_8       0.80      0.80    0.82      0.31 4.0   0.0085
## BFI_open_10      0.81      0.81    0.83      0.32 4.3   0.0081
## BFI_open_7       0.83      0.83    0.85      0.36 5.0   0.0071
## BFI_open_9       0.80      0.80    0.81      0.31 4.1   0.0085
## 
##  Item statistics 
##                n raw.r std.r r.cor r.drop mean   sd
## BFI_open_1  1208  0.71  0.72  0.71   0.62  3.4 1.04
## BFI_open_2  1208  0.61  0.63  0.56   0.51  4.2 0.88
## BFI_open_3  1208  0.49  0.52  0.42   0.38  4.2 0.87
## BFI_open_4  1208  0.63  0.63  0.57   0.51  4.0 1.02
## BFI_open_5  1208  0.72  0.73  0.72   0.63  3.4 1.03
## BFI_open_6  1208  0.72  0.70  0.69   0.62  3.9 1.13
## BFI_open_8  1208  0.66  0.67  0.63   0.56  3.8 0.99
## BFI_open_10 1208  0.61  0.59  0.52   0.47  3.1 1.18
## BFI_open_7  1208  0.38  0.38  0.25   0.22  3.4 1.08
## BFI_open_9  1208  0.67  0.65  0.62   0.55  3.9 1.17
## 
## Non missing response frequency for each item
##                1    2    3    4    5 miss
## BFI_open_1  0.04 0.17 0.29 0.36 0.14    0
## BFI_open_2  0.01 0.05 0.13 0.38 0.43    0
## BFI_open_3  0.01 0.04 0.15 0.37 0.43    0
## BFI_open_4  0.02 0.08 0.19 0.35 0.37    0
## BFI_open_5  0.05 0.14 0.32 0.36 0.13    0
## BFI_open_6  0.04 0.11 0.17 0.33 0.36    0
## BFI_open_8  0.02 0.09 0.21 0.42 0.26    0
## BFI_open_10 0.11 0.21 0.30 0.26 0.12    0
## BFI_open_7  0.05 0.14 0.31 0.33 0.17    0
## BFI_open_9  0.04 0.11 0.14 0.28 0.43    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  BFI_extra  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.88      0.88    0.88      0.47 7.1 0.0052  3.5 0.8
## 
##  lower alpha upper     95% confidence boundaries
## 0.87 0.88 0.89 
## 
##  Reliability if an item is dropped:
##             raw_alpha std.alpha G6(smc) average_r S/N alpha se
## BFI_extra_1      0.86      0.86    0.85      0.46 6.0   0.0062
## BFI_extra_3      0.88      0.88    0.87      0.50 7.0   0.0054
## BFI_extra_4      0.87      0.87    0.86      0.49 6.6   0.0056
## BFI_extra_6      0.88      0.88    0.87      0.50 7.0   0.0054
## BFI_extra_8      0.85      0.85    0.85      0.45 5.8   0.0064
## BFI_extra_2      0.85      0.85    0.84      0.45 5.7   0.0066
## BFI_extra_5      0.85      0.85    0.85      0.45 5.8   0.0064
## BFI_extra_7      0.87      0.86    0.86      0.48 6.3   0.0058
## 
##  Item statistics 
##                n raw.r std.r r.cor r.drop mean   sd
## BFI_extra_1 1209  0.77  0.78  0.74   0.69  3.9 1.02
## BFI_extra_3 1209  0.61  0.63  0.55   0.50  3.5 0.97
## BFI_extra_4 1209  0.67  0.68  0.61   0.57  3.7 1.02
## BFI_extra_6 1209  0.62  0.63  0.55   0.51  3.4 1.04
## BFI_extra_8 1209  0.81  0.81  0.78   0.73  3.4 1.09
## BFI_extra_2 1209  0.83  0.82  0.81   0.76  3.4 1.19
## BFI_extra_5 1209  0.80  0.80  0.78   0.73  3.9 1.10
## BFI_extra_7 1209  0.74  0.72  0.67   0.63  2.8 1.26
## 
## Non missing response frequency for each item
##                1    2    3    4    5 miss
## BFI_extra_1 0.02 0.10 0.17 0.39 0.33    0
## BFI_extra_3 0.03 0.12 0.33 0.38 0.14    0
## BFI_extra_4 0.03 0.11 0.23 0.42 0.21    0
## BFI_extra_6 0.04 0.16 0.27 0.40 0.14    0
## BFI_extra_8 0.05 0.14 0.29 0.33 0.18    0
## BFI_extra_2 0.07 0.18 0.24 0.32 0.19    0
## BFI_extra_5 0.03 0.10 0.18 0.33 0.36    0
## BFI_extra_7 0.18 0.28 0.21 0.23 0.10    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-4.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  BFI_consc  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.81      0.82    0.82      0.34 4.6 0.0081  3.5 0.68
## 
##  lower alpha upper     95% confidence boundaries
## 0.8 0.81 0.83 
## 
##  Reliability if an item is dropped:
##             raw_alpha std.alpha G6(smc) average_r S/N alpha se
## BFI_consc_1      0.78      0.79    0.78      0.32 3.7   0.0095
## BFI_consc_3      0.79      0.79    0.79      0.33 3.9   0.0091
## BFI_consc_5      0.79      0.80    0.79      0.33 4.0   0.0090
## BFI_consc_6      0.79      0.80    0.79      0.33 3.9   0.0091
## BFI_consc_7      0.80      0.81    0.80      0.34 4.2   0.0088
## BFI_consc_2      0.81      0.82    0.82      0.37 4.7   0.0081
## BFI_consc_9      0.80      0.81    0.80      0.34 4.2   0.0086
## BFI_consc_4      0.79      0.80    0.79      0.33 4.0   0.0092
## BFI_consc_8      0.79      0.80    0.80      0.34 4.1   0.0089
## 
##  Item statistics 
##                n raw.r std.r r.cor r.drop mean   sd
## BFI_consc_1 1208  0.72  0.74  0.71   0.63  3.9 0.96
## BFI_consc_3 1208  0.66  0.69  0.65   0.57  4.1 0.87
## BFI_consc_5 1208  0.64  0.66  0.61   0.53  3.5 1.02
## BFI_consc_6 1208  0.67  0.68  0.63   0.56  3.7 0.99
## BFI_consc_7 1208  0.59  0.61  0.54   0.48  3.7 0.94
## BFI_consc_2 1208  0.49  0.49  0.38   0.34  3.5 1.08
## BFI_consc_9 1208  0.65  0.61  0.54   0.48  3.0 1.39
## BFI_consc_4 1208  0.68  0.66  0.60   0.55  3.1 1.19
## BFI_consc_8 1208  0.64  0.63  0.56   0.51  3.3 1.15
## 
## Non missing response frequency for each item
##                1    2    3    4    5 miss
## BFI_consc_1 0.01 0.07 0.21 0.39 0.32    0
## BFI_consc_3 0.01 0.05 0.15 0.44 0.35    0
## BFI_consc_5 0.02 0.15 0.27 0.38 0.17    0
## BFI_consc_6 0.02 0.10 0.28 0.38 0.22    0
## BFI_consc_7 0.01 0.08 0.26 0.42 0.22    0
## BFI_consc_2 0.04 0.17 0.26 0.35 0.18    0
## BFI_consc_9 0.19 0.24 0.18 0.21 0.18    0
## BFI_consc_4 0.09 0.26 0.25 0.25 0.14    0
## BFI_consc_8 0.07 0.21 0.26 0.32 0.14    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-5.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  BFI_neuro  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.83      0.83    0.83      0.38 4.9 0.0075  3.1 0.75
## 
##  lower alpha upper     95% confidence boundaries
## 0.81 0.83 0.84 
## 
##  Reliability if an item is dropped:
##             raw_alpha std.alpha G6(smc) average_r S/N alpha se
## BFI_neuro_1      0.81      0.81    0.81      0.39 4.4   0.0083
## BFI_neuro_3      0.80      0.80    0.80      0.37 4.0   0.0088
## BFI_neuro_4      0.81      0.81    0.81      0.39 4.4   0.0083
## BFI_neuro_8      0.82      0.82    0.81      0.39 4.6   0.0080
## BFI_neuro_7      0.81      0.81    0.80      0.38 4.2   0.0086
## BFI_neuro_2      0.80      0.80    0.79      0.36 4.0   0.0089
## BFI_neuro_5      0.82      0.82    0.81      0.39 4.5   0.0081
## BFI_neuro_6      0.80      0.80    0.79      0.36 4.0   0.0088
## 
##  Item statistics 
##                n raw.r std.r r.cor r.drop mean  sd
## BFI_neuro_1 1209  0.65  0.64  0.57   0.52  2.4 1.2
## BFI_neuro_3 1209  0.72  0.72  0.67   0.62  3.1 1.0
## BFI_neuro_4 1209  0.65  0.65  0.57   0.52  3.7 1.1
## BFI_neuro_8 1209  0.62  0.61  0.53   0.48  3.3 1.2
## BFI_neuro_7 1209  0.69  0.68  0.61   0.56  2.9 1.2
## BFI_neuro_2 1209  0.74  0.74  0.71   0.63  3.3 1.1
## BFI_neuro_5 1209  0.61  0.62  0.55   0.48  3.0 1.1
## BFI_neuro_6 1209  0.72  0.73  0.70   0.62  3.0 1.1
## 
## Non missing response frequency for each item
##                1    2    3    4    5 miss
## BFI_neuro_1 0.29 0.31 0.22 0.13 0.06    0
## BFI_neuro_3 0.07 0.25 0.31 0.30 0.07    0
## BFI_neuro_4 0.03 0.14 0.20 0.33 0.30    0
## BFI_neuro_8 0.08 0.20 0.24 0.31 0.18    0
## BFI_neuro_7 0.11 0.31 0.25 0.23 0.09    0
## BFI_neuro_2 0.06 0.19 0.28 0.30 0.17    0
## BFI_neuro_5 0.07 0.26 0.32 0.27 0.07    0
## BFI_neuro_6 0.07 0.26 0.33 0.24 0.08    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-6.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  SGSE  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.84      0.84    0.83      0.52 5.4 0.0074  2.6 0.91
## 
##  lower alpha upper     95% confidence boundaries
## 0.83 0.84 0.86 
## 
##  Reliability if an item is dropped:
##        raw_alpha std.alpha G6(smc) average_r S/N alpha se
## SGSE_2      0.80      0.81    0.78      0.51 4.2   0.0094
## SGSE_5      0.86      0.86    0.84      0.61 6.2   0.0065
## SGSE_1      0.79      0.79    0.77      0.49 3.8   0.0102
## SGSE_4      0.80      0.81    0.77      0.51 4.1   0.0096
## SGSE_3      0.78      0.79    0.75      0.48 3.8   0.0102
## 
##  Item statistics 
##           n raw.r std.r r.cor r.drop mean  sd
## SGSE_2 1209  0.79  0.80  0.73   0.67  2.7 1.1
## SGSE_5 1209  0.67  0.65  0.50   0.46  2.6 1.3
## SGSE_1 1209  0.83  0.83  0.79   0.72  2.6 1.1
## SGSE_4 1209  0.81  0.81  0.76   0.68  2.6 1.2
## SGSE_3 1209  0.84  0.84  0.81   0.73  2.6 1.1
## 
## Non missing response frequency for each item
##           1    2    3    4    5 miss
## SGSE_2 0.14 0.34 0.29 0.19 0.04    0
## SGSE_5 0.22 0.30 0.20 0.19 0.09    0
## SGSE_1 0.18 0.32 0.28 0.16 0.07    0
## SGSE_4 0.20 0.31 0.24 0.16 0.09    0
## SGSE_3 0.16 0.34 0.27 0.17 0.06    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-7.png" width="672" /></p>
<pre><code>## 
## Reliability analysis  BFI_agree  
## Call: psych::alpha(x = stats::na.omit(results[, scale_item_names]), 
##     title = save_scale, check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.73      0.73    0.74      0.23 2.7 0.011  3.6 0.59
## 
##  lower alpha upper     95% confidence boundaries
## 0.71 0.73 0.75 
## 
##  Reliability if an item is dropped:
##             raw_alpha std.alpha G6(smc) average_r S/N alpha se
## BFI_agree_2      0.71      0.71    0.71      0.24 2.5    0.012
## BFI_agree_4      0.72      0.72    0.72      0.24 2.6    0.012
## BFI_agree_5      0.72      0.72    0.72      0.24 2.6    0.012
## BFI_agree_7      0.71      0.70    0.70      0.23 2.4    0.013
## BFI_agree_9      0.71      0.71    0.72      0.24 2.5    0.012
## BFI_agree_1      0.70      0.70    0.70      0.23 2.4    0.013
## BFI_agree_3      0.71      0.72    0.72      0.24 2.5    0.012
## BFI_agree_6      0.70      0.70    0.69      0.23 2.4    0.013
## BFI_agree_8      0.67      0.68    0.67      0.21 2.1    0.014
## 
##  Item statistics 
##                n raw.r std.r r.cor r.drop mean   sd
## BFI_agree_2 1209  0.49  0.54  0.45   0.35  3.8 0.87
## BFI_agree_4 1209  0.54  0.51  0.40   0.35  3.2 1.23
## BFI_agree_5 1209  0.50  0.51  0.40   0.34  3.8 1.01
## BFI_agree_7 1209  0.54  0.59  0.52   0.42  4.1 0.80
## BFI_agree_9 1209  0.53  0.55  0.45   0.37  3.9 0.99
## BFI_agree_1 1209  0.60  0.59  0.52   0.44  2.9 1.07
## BFI_agree_3 1209  0.51  0.52  0.41   0.35  4.1 0.99
## BFI_agree_6 1209  0.64  0.59  0.55   0.46  3.1 1.27
## BFI_agree_8 1209  0.71  0.68  0.67   0.57  3.4 1.19
## 
## Non missing response frequency for each item
##                1    2    3    4    5 miss
## BFI_agree_2 0.01 0.06 0.24 0.47 0.21    0
## BFI_agree_4 0.09 0.21 0.24 0.27 0.18    0
## BFI_agree_5 0.03 0.09 0.19 0.43 0.26    0
## BFI_agree_7 0.01 0.03 0.14 0.50 0.33    0
## BFI_agree_9 0.02 0.08 0.20 0.38 0.33    0
## BFI_agree_1 0.08 0.33 0.30 0.23 0.07    0
## BFI_agree_3 0.01 0.07 0.15 0.34 0.42    0
## BFI_agree_6 0.10 0.27 0.21 0.24 0.17    0
## BFI_agree_8 0.07 0.19 0.23 0.32 0.20    0</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-8.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-9.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-10.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-11.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-12.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-13.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-14.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-15.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-16.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-17.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-18.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-19.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-20.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-21.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-22.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-23.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-24.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-25.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-26.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-27.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-28.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-29.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-30.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-31.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-32.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-33.png" width="672" /><img src="1_wrangle_data_files/figure-html/unnamed-chunk-3-34.png" width="672" /></p>
<pre class="r"><code>stopifnot(0 == sum(duplicated(vorab$session)))
vorab[is.na(BFI_consc_8), ended := NA] # interrupters who we disabled

abschluss = abschluss[ order( rev(created)) , ]
abschluss = abschluss[ !duplicated(session), ]
stopifnot(0 == sum(duplicated(abschluss$session)))

nachbe_other_hormonal$session_id = as.numeric(nachbe_other_hormonal$session_id )
nachbe_other_hormonal = nachbe_other_hormonal[!session_id %in% c(171983, 171984), ]
stopifnot(0 == sum(duplicated(nachbe_other_hormonal$session)))
theme_set(theme_tufte(base_size = 20, base_family = &#39;Helvetica Neue&#39;))
einleit = einleit %&gt;% select(-email, -referring_website, -browser, -mobile_nr)
save(einleit, vorab, tagebuch, abschluss,nachbe, nachbe_other_hormonal, file = &#39;pretty_raw.rdata&#39;)</code></pre>
</div>
<div id="merge-vorab-and-abschluss" class="section level3">
<h3>Merge vorab and abschluss</h3>
<pre class="r"><code>load(&quot;pretty_raw.rdata&quot;)
p0 = merge(einleit[,list(session,age, gender, sex_orientation, hetero_relationship)], vorab, by = &quot;session&quot;, all.x = T)
p1 &lt;- merge(p0, abschluss, by = &quot;session&quot;, all.x = T, suffixes = c(&quot;.vorab&quot;,&quot;.abschluss&quot;))
names(nachbe_other_hormonal)[2:5] = paste0(names(nachbe_other_hormonal)[2:5], &quot;.nachbe_other_hormonal&quot;)
xsection &lt;- merge(p1, nachbe_other_hormonal, by = &quot;session&quot;, all.x = T)</code></pre>
</div>
</div>
<div id="subset-data" class="section level2">
<h2>Subset data</h2>
<pre class="r"><code>pipeline_hc = pipeline = list()
pipeline$signed_up = sum(!is.na(xsection$age))
xsection = xsection %&gt;% filter(!is.na(age))
pipeline$ineligible = sum(xsection$gender != 1 | xsection$hetero_relationship != 1, na.rm = T)
xsection = xsection %&gt;% filter(gender == 1 &amp; hetero_relationship == 1)
pipeline$did_not_complete_pre_survey = sum(is.na(xsection$ended.vorab), na.rm = TRUE)
xsection = xsection %&gt;% filter(!is.na(ended.vorab)) #only those who ended vorab
pipeline$finished_pre_survey = nrow(xsection)

tagebuch = tagebuch[ !is.na(ended) &amp; !is.na(session) &amp; session %in% xsection$session, ]  # no duds/testers
tagebuch$created_date = as.Date(tagebuch$created - dhours(9))
tagebuch$sess_day = paste(tagebuch$session, tagebuch$created_date)
table(duplicated(tagebuch$sess_day)) # 41 dupes due to an early bug</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 30930    41</code></pre>
<pre class="r"><code>setkey(tagebuch, session, created, ended, modified)
tagebuch = tagebuch[!duplicated(tagebuch$sess_day), ]</code></pre>
</div>
<div id="hypotheses-guessed" class="section level2">
<h2>Hypotheses guessed</h2>
<pre class="r"><code>xsection$hypothesis_guessed = NA_character_ # Hypothese erraten variable erstmal bei allen auf unkodiert setzen
# cat(xsection[ ! is.na(meaning_study) &amp; is.na(hypothesis_guessed), str_c( str_sub(session, 1, 10),&quot;\n&quot;, meaning_study,&quot;\n\n&quot;) ]) # zeigt alle die was geschrieben haben, aber nur die bei denen wir die Hypothese noch nicht kodiert haben
     
## beginnend bei Nr. 2 Abschluss FB
xsection$short = str_sub(xsection$session,1,10)
xsection[ short == &quot;c8cabb2407&quot;, hypothesis_guessed := &quot;pille&quot; ]
xsection[ short == &quot;0d2804a063&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df96f1da5c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a9995fe3d9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3f776540f0&quot;, hypothesis_guessed := &quot;zyklus, pille&quot; ]
xsection[ short == &quot;b726d9cd36&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2a656528d8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1794115cf9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6d97f9db84&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5528d129af&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3f776540f0&quot;, hypothesis_guessed := &quot;zyklus, pille&quot; ]
xsection[ short == &quot;d323f2f23e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0d2804a063&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b45e6029af&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;06d8ad9352&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;daf19d11c5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ad9c9b9040&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;602532ed06&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ef5d7a4afe&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4bb6d35c60&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2709df5b65&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1d55f16def&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1efa2a7b59&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0ce9853874&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e164a28749&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;304bca7f58&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;21054c807c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;35bb4b9d0e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0e8fb367d5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2001e6b0ba&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4adad13adb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;43273cd6f1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7d15b96270&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;129ac3ab6d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f9cc25fe9f&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;2384901dd0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e13702498c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df96f1da5c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;610e6193fc&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;14c0d954f2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;09521151c3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;74c219c7b4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8a656581da&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;714c09c81d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;968add9413&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4b1c22b386&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;741097daab&quot;, hypothesis_guessed := &quot;menstruation&quot; ]
xsection[ short == &quot;2fff8152a1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9c1c191a8c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fae818546b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;905fa66d73&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a9995fe3d9&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;9e7ca102d1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c368a1d25c&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;7f71877363&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;354137dd7f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d7c1497736&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5a52338d59&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1f21c8d01f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4402465c96&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;8de9e8403b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;56306eba82&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;34015d752d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;935ade8964&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;75b7a0b580&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7a5e6c3fe0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;24af1309b4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6a32bf9e58&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c6e2a0e0f5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a269d1c49b&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;41a22ad56a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2a32bc55a7&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;7e3f2d22a8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c680d6faed&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;28a22bdb79&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b7313e1259&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;76f7da03e6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;236a466536&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d8c77b5d7e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;998a173634&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8765bada78&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;eb50f2a1b0&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;75ca1e55f3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;36bf3909cd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6b4c442294&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cfd0e370c2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;da9c04f1dc&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b15de9d994&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;927a815661&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f206eb6c66&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a05777d688&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;008e1a3846&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;77bec8f9fa&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ffe3de7ada&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ce9110b32c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3d236f5b13&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;31fae1e494&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7d63af564f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0643a31c42&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6a451c3559&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1794115cf9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bde2228088&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7bcb402ac2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;56e91fba0d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e4878941c8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d9040996f0&quot;, hypothesis_guessed := &quot;pille&quot; ]
xsection[ short == &quot;1b186d0bdf&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a8f5c15eab&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;5fa900360e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0659e0ce76&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;99f35b7279&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;245e4d3f8e&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;bd88ffe4c2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9400580d09&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9a38c0f7a8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;90e1277822&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;02b30a1e88&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ae90c6f50d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;43a25b3770&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;58f42542f3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5770242e01&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fe928a062c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0fcec7e9e9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;44f48a8b61&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;be468466cb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8de9e8403b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;daf776aeb5&quot;, hypothesis_guessed := &quot;pille, zyklus&quot; ]
xsection[ short == &quot;c02d06c4b6&quot;, hypothesis_guessed := &quot;pille&quot; ]
xsection[ short == &quot;24ed183204&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;dd208c8a34&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5089861ec1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6e977547c4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f786b346c8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;96751721dd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f5448770a6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;646c651ea4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9f8b9c389a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;411c91350a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;21b5146134&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;445c1bbf06&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b068b06b12&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ec4505ed59&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6a01498107&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f1177b77af&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;689259c4a0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c5a8fe1c2e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b726d9cd36&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f42ae3caec&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cb90b67420&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;28012aed5e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9bb8c4ea35&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fa12f9e203&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;64bd3dba20&quot;, hypothesis_guessed := &quot;pille&quot; ]
xsection[ short == &quot;7b2fcea8a5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;19bca0c45f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d79c17faef&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6d97f9db84&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2a656528d8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;82d0f82850&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0a28af0a59&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e2f049ef95&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;28a246460d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;44ed3a0f94&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;128e5f2f9a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;53bf4f5456&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9f61438d5f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5530688d48&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cd75c19fa1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;59131d88d4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8a891f90ce&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;37276e25e2&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;8ec26c9036&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;01c277d3d0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c6dd42db4b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b1ec2b199e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;79bf667244&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;38bb042edd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1c40c3e9b3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a996908c50&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2e7a8138ce&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e8142dfc42&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;74996f8517&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5528d129af&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fe1da43c1c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ad5b746840&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;21d26d2761&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a902d3062e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4e9893da3b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;220d10348e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;23edbdf284&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;25199bbae1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;abe4c9949e&quot;, hypothesis_guessed := &quot;&quot; ]

# Kodierung Hanne reinkopiert
xsection[ short == &quot;03b4587939&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7392ad15ff&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0de89e1e3c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;21523ad67c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;16d4342214&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b9294fe7be&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6d3d339b5c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2ccbf1f5a6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9787db1a54&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3b4ef0781b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;38cb0923c8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;008ee8cd6a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6bf2fadeab&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3d58cbb50e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5cb71cce8b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;79e1cb73fe&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c4b0225e39&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c7eb229822&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5817ad784e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b0ef6c5149&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c70fa419b0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1f4a0cf36f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2dafb15a0a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fb035fee5a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7a76030651&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b5af1bfbf8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d1ea29bce0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;61d9f3549e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f480464fff&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c4c8152b39&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;dd791f1ba9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;17ecc0eef7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4baca29e4a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c3d67296d9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c78f64a555&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;2b408b1e5b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ddf84eabe6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1630e644ea&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6944eadc16&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;534af6e9d1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f7f94664b3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c807b3d9ff&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4233be9e00&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b8aa6808e6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5b4fad6f3f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;31f770fe6a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a27b5c61e7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e5da8d89ef&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;833a015ee7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5a27112b81&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a781509efd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d397efe829&quot;, hypothesis_guessed := &quot;pille&quot; ]
xsection[ short == &quot;0069356382&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;75c9e5f68a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4167741e29&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1b6147d4d2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;39800782ec&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;83c84a5860&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6b8a2e2171&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;742ef3fc8f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1f8cff71d7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ad9c9b9040&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cea9927c59&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df09cb4538&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;99e3b135c8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;910d9ca63a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e7e992c12b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;23e08d5150&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;942fd09099&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2f401ccc7c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;63df0811f6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8d46295b6e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b24ef936be&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a7f647e8cb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f5b82733fb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;aa5c29c4db&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;897feb9564&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;03cf5578bd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;34e3dfaf38&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;258a5b9029&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9e7394a8ce&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c0a44a7da5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8486317f22&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d6cce71fb6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f67c42dab9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7caf85a1eb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c9eb12c2b6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b554aec2b1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;dc15d44631&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;20804b1327&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;94a84368ce&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;57c5087f95&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ea963653a1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0815462c77&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df3fa2f601&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;768be5419d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c17df3e87a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;19e8cd093e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8d51dfefa0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3fe6cdbe1e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;470e0e5037&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;719f885747&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6d3d494d9c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c21f988273&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;48e45a498f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c729a3bdf3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5803bcd6a2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e9dfe8b9fa&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3e42652d76&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;100249933a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7d9c91f515&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;95ce064457&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;abe8a003bb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0eb89ad851&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;63d9ae1c8d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a34640c141&quot;, hypothesis_guessed := &quot;pille&quot; ]
xsection[ short == &quot;b33dc11492&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ae72052f5a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e9159a3bff&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;023f1ef6ac&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;58fa886642&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cc48a48f24&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f0e3e3814c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2d89985ad2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;90131fc94d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;393959f84d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2e024ac121&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;31b9cdb8c2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f57c949bc6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fec84c80ed&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;932ed913af&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ae95c11557&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;eb060e5336&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c45e627e15&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;453499e409&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;90089be9f5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ae58ec2dbb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9c13dee6fd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;582e1adeb9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9ee25c852d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;690a569b23&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0b8734f4a6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6aa4c44925&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b526819f16&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;28b79f4b6b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;98740e20b9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;80bc472a44&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;eb28d205a3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b544f1cfa6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e2b21db156&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;38921238de&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bc5773179f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0a616bcb8b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;05cc6c110f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ad89045d3e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;12424f035f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cd3bae7e4d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;82aadd4d54&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;74180956ce&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c44f074f27&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d69bd5e5c7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;84303fa3d9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f5983d5a38&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6387229fec&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a8e87b8625&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d6682585cf&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9521a5fc04&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5d88e189c5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c086dd95fe&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;08937722e0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b270e1cfcf&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;901a6883d2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f4cd3dfd2f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8946460c25&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b62fbfb07e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8e63797127&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;52c0e1e50b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7fd7916603&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;452d2bdfa1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;75ccee8d17&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c5981e2351&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;aefa543164&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5c53f68442&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;87e886967a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6c626a50be&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;70337246f2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bf2f915bb3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3dc0a45a14&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2f65164f23&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7582000c79&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;01f0227990&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0907998489&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;46aacd0680&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;21424e80c7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b8905fe532&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;327dbf66ce&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4b1d503bfb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;512bb9b013&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9ddeebb1b9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c2ea9ba138&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3cee8848fb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5b1a3ce2a5&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;42726af187&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;555c83d081&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;42a51ece43&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df32b62d17&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;85fd3a1813&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;196c17fcda&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bc96d50254&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3f776540f0&quot;, hypothesis_guessed := &quot;zyklus, pille&quot; ]
xsection[ short == &quot;daf776aeb5&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;02539de896&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;05033e888d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0a2c53e29f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2078f87efa&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;32cab9e923&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5b92bf3779&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7158408e37&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8f4f6b6442&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;98016254d4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cd0351ef4a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d7a118a86a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;eaca396225&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ff0fa19bd9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2103c78acb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d600c6e3b8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6b0dbbb71b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8f892266fb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b2b79b104b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b346650b0c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f5542c8c2f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fc9cbca3b3&quot;, hypothesis_guessed := &quot;&quot; ]

#Weitere Kodierungen von Laura (12.05.2015):
xsection[ short == &quot;016b21f02d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ffe2877aab&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;fa8e1fd4ab&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f8fbb1fe55&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;f89d76dc03&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f080731320&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;f037869cdb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;edb19a9192&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ec3bcb7064&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ea6bd8a246&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;e7ca4b128d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e68978de78&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e5be3120fa&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;e38438818f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e0ae7547cd&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df3c5400cf&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;d5b5462be5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ca9987aa7e&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;c8e5b1bb2a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c7d8266967&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c7cc8e9179&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c7002a6061&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;372209367e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;36ea7e6950&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;339b91c8e9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;30b5e0684a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;29220ba555&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2629507257&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;2433cc44b9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;23e07da87c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1fd70a942b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1e7809c3ff&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1be261786b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;16884a03a0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1642233f9a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0aa79cb247&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;07958bd3a3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;016b21f02d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c33d554719&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c43db6a7f3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c4a69cfdd2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c78e191ab8&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c8c1bab681&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;ccec904e73&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cd2d96883b&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;ce898dee12&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;ce8e40de7c&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;d278dadb38&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;dd7e68b004&quot;, hypothesis_guessed := &quot;hormones&quot; ]
xsection[ short == &quot;ee429eb56c&quot;, hypothesis_guessed := &quot;hormones&quot; ]
xsection[ short == &quot;f64039d090&quot;, hypothesis_guessed := &quot;hormones&quot; ]
xsection[ short == &quot;f7cba09218&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a5df9fb4a6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a7d84388f4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a80dd12d1c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;aa6e507b4a&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;b03ce0a6c1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b4235d3dec&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;b438d1b8d3&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b96d63f82a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b9c5ba5f45&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bb55d539b6&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bbd0ab2a7c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bd0a14ae7c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;bfbd787872&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8c6bdbb1ad&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8dd1e1df18&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8ff7ba488f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;90f7b0d155&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;933a0738fb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;94b1eeac56&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;96beeed073&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;9700064ee1&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;974be45de9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9b49e26d03&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a0e3e25747&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a1ec8fa016&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;a3c41a797b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;af7a926157&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7d57498d7c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7d9813e530&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7e6a0e3560&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7e6af239b5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7f30718a87&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7f58be6305&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;80e84bd511&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;82c07d327c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8346102b19&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;85f6ed2be2&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;8694034d6e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8bb8bdea8e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8bbd65530f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8c118bfaaa&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;62ad56f438&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;62f9888d39&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;698a496071&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6a2b85aade&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6b3264f6f7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6c08680fc7&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;6c9e8db5f5&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;71cde9c24a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7250a0eaef&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7347274f15&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;761f49975d&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;78308b0462&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;79ffad4690&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7ba9d146ee&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;495eb8a1a4&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4e49fb555e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4ff27e7894&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;52d2920018&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;57e9a4653d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;585d957869&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;59b7aacb65&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5ae3516355&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5b52495100&quot;, hypothesis_guessed := &quot;hormones&quot; ]
xsection[ short == &quot;5b947ae89f&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5bf0258d2e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;5e834dcb1b&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;5ee0ef1c0d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;62ab3b40ac&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;038daf9412&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;1100a0c1b8&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;2a7563b0e2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2f5c3a7f8d&quot;, hypothesis_guessed := &quot;hormones&quot; ]
xsection[ short == &quot;37226a6cf2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;385d08eaa9&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;3afca832d6&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;3b989930b5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;3e5128a514&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4587224153&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;46ebc8885a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4899378885&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;48ba97715e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;c0bb1efc7c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2460707240&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;41a214d646&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;5b5892bd42&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;7bf4ee841c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8490b693cd&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;266759ceac&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4230b1e4b9&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;88f484ab02&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;8b46361090&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;8b6988119b&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e811afaaf5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;08100198e5&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;2b77126cdf&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;4b831ccd26&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;679f9f427d&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;86fb131347&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9c36978700&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;ab247aac0e&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;cbe6931db2&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;df9f46844a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e98b2d9feb&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;edd8560a9c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;n1pbqggsCW&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;1c8aaf32ab&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;412e04ad03&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;9f95eb7af7&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;Q0-FN91tkB&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;jlDTAYbPji&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;F_ltXLLl8H&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;085635cb57&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;59858e60ea&quot;, hypothesis_guessed := &quot;hormones&quot; ]
xsection[ short == &quot;1d127ea9f0&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;ac24597894&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;b5ada85e09&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;99bbc3846c&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;e2f7046075&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ff6f9d2943&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;524434fcd0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;86e8d19764&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;0ba321ca04&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;51385268f0&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;667e0b755a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;ae9c69937a&quot;, hypothesis_guessed := &quot;zyklus&quot; ]
xsection[ short == &quot;b99aafa45a&quot;, hypothesis_guessed := &quot;&quot; ]
xsection[ short == &quot;dz_hzRfdL_&quot;, hypothesis_guessed := &quot;&quot; ]
# stand: 21.07.2015.

# we were asked to delete the last six diary days for this person (faked data after a break up)
remove = tail(tagebuch[str_sub(session,1,10) == &quot;73a5c0c50d&quot;, session_id], 6)
tagebuch = tagebuch[! session_id %in% remove, ]

cat(xsection[ ! is.na(meaning_study) &amp; is.na(hypothesis_guessed), str_c( str_sub(session, 1, 10),&quot;\n&quot;, meaning_study,&quot;\n\n&quot;) ]) # zeigt alle die was geschrieben haben, aber nur die bei denen wir die Hypothese noch nicht kodiert haben</code></pre>
<pre class="r"><code>xsection[is.na(hypothesis_guessed),]$hypothesis_guessed = &quot;&quot;</code></pre>
</div>
<div id="process-data" class="section level2 tab-content">
<h2>Process data</h2>
<div id="response-time" class="section level3">
<h3>Response time</h3>
<pre class="r"><code>tagebuch$dodgy_data = FALSE

tagebuch$time_of_response = hour(tagebuch$created) + minute(tagebuch$created)/60 + second(tagebuch$created) / 60/60
qplot(tagebuch$time_of_response)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>table(tagebuch$time_of_response &lt; 15 &amp; tagebuch$time_of_response &gt; 1)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 30705   219</code></pre>
<pre class="r"><code>tagebuch$dodgy_data = if_else(tagebuch$time_of_response &lt; 15 &amp; tagebuch$time_of_response &gt; 1, T, tagebuch$dodgy_data, F)

tagebuch$time_of_response[which(tagebuch$time_of_response &lt; 15 &amp; tagebuch$time_of_response &gt; 1)] = 1 # access time abberrations
tagebuch$time_of_response[which(tagebuch$time_of_response &lt; 15)] = 
  tagebuch$time_of_response[which(tagebuch$time_of_response &lt; 15)] + 24
qplot(tagebuch$time_of_response, binwidth = 5/60)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<pre class="r"><code>tagebuch$time_for_response = as.numeric(tagebuch$ended - tagebuch$created, units = &quot;mins&quot;)

table(tagebuch$time_for_response &gt; 60*24)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 30548   376</code></pre>
<pre class="r"><code>tagebuch$dodgy_data = if_else(tagebuch$time_for_response &gt; 60*24, T, tagebuch$dodgy_data)
table(tagebuch$time_for_response &lt; 1)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 30894    30</code></pre>
<pre class="r"><code>tagebuch$dodgy_data = if_else(tagebuch$time_for_response &lt; 1, T, tagebuch$dodgy_data)

table(tagebuch$time_for_response &gt; 60*24)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 30548   376</code></pre>
<pre class="r"><code>table(tagebuch$time_for_response &gt; 60*7)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 29736  1188</code></pre>
<pre class="r"><code>tagebuch$time_for_response[tagebuch$time_for_response &gt; 60 * 7] = NA

qplot(tagebuch$time_for_response) + scale_x_log10()</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-7-3.png" width="672" /></p>
<pre class="r"><code>qplot(tagebuch$time_for_response) + xlim(0,10)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-7-4.png" width="672" /></p>
<pre class="r"><code>table(tagebuch$time_for_response &lt; 1)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 29706    30</code></pre>
<pre class="r"><code>sd(tagebuch$time_for_response[tagebuch$time_for_response&lt;20], na.rm = T)</code></pre>
<pre><code>## [1] 2.695</code></pre>
<pre class="r"><code>mean(tagebuch$time_for_response[tagebuch$time_for_response&lt;20], na.rm = T)</code></pre>
<pre><code>## [1] 4.306</code></pre>
<pre class="r"><code>tagebuch$time_for_response[tagebuch$time_for_response&gt;100] = NA

tagebuch = tagebuch %&gt;% group_by(session) %&gt;% arrange(session,created, ended) %&gt;% 
  mutate(time_since_last_response = as.numeric(created - lag(ended) , units = &quot;hours&quot;))
qplot(tagebuch$time_since_last_response) + scale_x_log10()</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-7-5.png" width="672" /></p>
<pre class="r"><code>table(round(tagebuch$time_since_last_response)) %&gt;% head(24)</code></pre>
<pre><code>## 
## -121  -18  -15    0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18 
##    1    1    1   73    8    8   28   23   36   40   44   65   68   52   34   39   39   25   34   28  117  419 
##   19   20 
##  830 1047</code></pre>
<pre class="r"><code>table(tagebuch$time_since_last_response &lt; 17)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 29071   677</code></pre>
<pre class="r"><code>tagebuch = tagebuch %&gt;% 
  mutate(
    dodgy_data = if_else(time_since_last_response &lt; 17, T, dodgy_data, dodgy_data),
    # timing mishaps?
    time_since_last_response = if_else(time_since_last_response &lt; 17, NA_real_,
    # skipped days
    if_else(time_since_last_response &gt; 31, NA_real_, time_since_last_response)))

qplot(tagebuch$time_since_last_response)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-7-6.png" width="672" /></p>
<pre class="r"><code>tagebuch = tagebuch %&gt;% ungroup() %&gt;% tbl_df()</code></pre>
</div>
<div id="lazy-days" class="section level3">
<h3>Lazy days</h3>
<p>Check for days on which probands entered nonsensical data.</p>
<pre class="r"><code>likert_scales = tagebuch %&gt;% select(session, created, choice_of_clothing_1, choice_of_clothing_2, choice_of_clothing_3, choice_of_clothing_4, choice_of_clothing_5, choice_of_clothing_6, choice_of_clothing_7, choice_of_clothing_8, self_esteem_1, desirability_1, desirability_partner, NARQ_admiration_1, NARQ_admiration_2, NARQ_admiration_3, NARQ_rivalry_1, NARQ_rivalry_2, NARQ_rivalry_3, jealousy_1, male_jealousy_1, male_jealousy_2, male_jealousy_3, male_mate_retention_1, male_mate_retention_2, mate_retention_3, mate_retention_4, mate_retention_5, mate_retention_6, attention_1, attention_2, male_attention_1, extra_pair_2, extra_pair_3, extra_pair_4, extra_pair_5, extra_pair_6, extra_pair_7, extra_pair_8, extra_pair_9, extra_pair_10, extra_pair_11, extra_pair_12, extra_pair_13)

likert_scales = likert_scales %&gt;% gather(variable, value, -session, -created) %&gt;% group_by(session,created) 
# all 6-point scales
crosstabs(~ variable + value, data = likert_scales)</code></pre>
<pre><code>##                        value
## variable                    1     2     3     4     5     6  &lt;NA&gt;
##   attention_1            2950  1413  3069  7681  7269  7492  1050
##   attention_2            7785  3194  4982  5502  4166  4245  1050
##   choice_of_clothing_1   6472  3381  5966  7768  4545  1764  1028
##   choice_of_clothing_2    628  1046  3185  9221  8696  7116  1032
##   choice_of_clothing_3   2782  2963  5880  8896  6298  3068  1037
##   choice_of_clothing_4   5639  4092  7002  8183  3918  1050  1040
##   choice_of_clothing_5  14708  5023  5030  3347  1400   377  1039
##   choice_of_clothing_6   3567  2175  4804 10377  6510  2450  1041
##   choice_of_clothing_7  10425  4983  7017  4902  2004   550  1043
##   choice_of_clothing_8   8689  4507  7087  5938  2720   941  1042
##   desirability_1         3063  2944  6093  9126  5787  2868  1043
##   desirability_partner   3019  2413  5435  9046  6032  3934  1045
##   extra_pair_10         24168  1382  1145  1629   781   768  1051
##   extra_pair_11         26789  1080   728   773   299   204  1051
##   extra_pair_12         16870  2130  2522  4655  2281  1415  1051
##   extra_pair_13         24682  1332   930  1396   663   870  1051
##   extra_pair_2          12039  3570  4078  5888  2883  1416  1050
##   extra_pair_3          19277  2631  2303  2754  1518  1390  1051
##   extra_pair_4          26262  1237   763   825   355   431  1051
##   extra_pair_5          21919   991   877  1804  1429  2853  1051
##   extra_pair_6          18929  1310  1403  2853  2036  3342  1051
##   extra_pair_7          22819  2032  1579  1865   875   703  1051
##   extra_pair_8          26492  1258   880   766   277   200  1051
##   extra_pair_9          25338  1245   995  1262   522   511  1051
##   jealousy_1            16788  1826  2111  3706  2333  3113  1047
##   male_attention_1       7147  2601  3986  5240  4890  6010  1050
##   male_jealousy_1       24376  2162  1432  1209   429   268  1048
##   male_jealousy_2       24805  1817  1312  1176   433   334  1047
##   male_jealousy_3       27378  1128   600   403   191   176  1048
##   male_mate_retention_1 17532  1787  2043  3564  2062  2888  1048
##   male_mate_retention_2  7590  1225  2136  3458  3508 11959  1048
##   mate_retention_3      10603  2841  4843  5519  3674  2396  1048
##   mate_retention_4       7577  1239  2205  3522  3550 11783  1048
##   mate_retention_5      22085  2475  1817  2071   824   604  1048
##   mate_retention_6       9646  3944  5689  6026  2967  1603  1049
##   NARQ_admiration_1     10545  4120  6077  6020  2289   826  1047
##   NARQ_admiration_2     10803  3991  5827  6000  2397   859  1047
##   NARQ_admiration_3     11050  3939  5601  5852  2510   925  1047
##   NARQ_rivalry_1        24605  2457  1357   960   276   221  1048
##   NARQ_rivalry_2        25617  1753   960   894   321   332  1047
##   NARQ_rivalry_3        26119  1829  1012   611   202   103  1048
##   self_esteem_1          1115  1290  3612  9965  9971  3928  1043</code></pre>
<pre class="r"><code>no_variation = likert_scales %&gt;% summarise(no_variation = sd(value,na.rm = T) == 0)
table(no_variation$no_variation)</code></pre>
<pre><code>## 
## FALSE  TRUE 
## 29868    23</code></pre>
<pre class="r"><code>tagebuch = tagebuch %&gt;% left_join(no_variation, by = c(&quot;session&quot;, &quot;created&quot;)) %&gt;% 
  mutate(dodgy_data = if_else(no_variation, TRUE, dodgy_data, dodgy_data))

table(tagebuch$dodgy_data, exclude = NULL)</code></pre>
<pre><code>## 
## FALSE  TRUE  &lt;NA&gt; 
## 29660  1264     0</code></pre>
<pre class="r"><code>tagebuch = tagebuch %&gt;% tbl_dt()</code></pre>
</div>
<div id="correcting-errors-in-our-surveys-that-we-noticed-while-the-study-ran" class="section level3">
<h3>Correcting errors in our surveys that we noticed while the study ran</h3>
<p>On April 25, 2015, we changed an item prior to the evening diary. The item relationship_satisfaction_1 had a mix-up in the response options 4 and 5, so that mostly satisfied came before rather satisfied. Hence, we cannot interpret 4 and 5 very well prior to 4/25 because we cant know whether subjects respected the order or the phrasing. Hence, we decided to assign both 4s and 5s a 4.5 prior to April 25.</p>
<p>We did the same thing for the item sexual_intercourse_4 on May 29.</p>
<pre class="r"><code>library(car)
table(tagebuch$relationship_satisfaction_1)</code></pre>
<pre><code>## 
##     1     2     3     4     5     6 
##   707   880  2189  5569  9915 10642</code></pre>
<pre class="r"><code>tagebuch[, relationship_satisfaction_1 := as.numeric(relationship_satisfaction_1)]
tagebuch[created &lt; as.POSIXct(&#39;2014-04-25&#39;) , relationship_satisfaction_1 := Recode(relationship_satisfaction_1, &quot;4=4.5;5=4.5&quot;)]
table(tagebuch$relationship_satisfaction_1)</code></pre>
<pre><code>## 
##     1     2     3     4   4.5     5     6 
##   707   880  2189  5036  1440  9008 10642</code></pre>
<pre class="r"><code>table(tagebuch$sexual_intercourse_4)</code></pre>
<pre><code>## 
##    1    2    3    4    5    6 
##   46   78  250 1060 2188 2889</code></pre>
<pre class="r"><code>tagebuch[, sexual_intercourse_4 := as.numeric(sexual_intercourse_4)]
tagebuch[created &lt; as.POSIXct(&#39;2014-04-29&#39;) , sexual_intercourse_4 := Recode(sexual_intercourse_4, &quot;4=4.5;5=4.5&quot;)]
table(tagebuch$sexual_intercourse_4)</code></pre>
<pre><code>## 
##    1    2    3    4  4.5    5    6 
##   46   78  250  916  445 1887 2889</code></pre>
<pre class="r"><code>xsection$SOI_be = rowMeans(xsection[, list(SOI_R_1, SOI_R_2, SOI_R_3)])
xsection$SOI_im = rowMeans(xsection[, list(SOI_R_7, SOI_R_8, SOI_R_9)])
xsection$SOI_uv = rowMeans(xsection[, list(SOI_R_4, SOI_R_5, SOI_R_6)])

# this woman told us she reported masturbation as &quot;intimacy with someone other than my partner&quot;
tagebuch[session %begins_with% &quot;ce8e40de7c&quot;, ]$extra_pair_1 = NA
tagebuch[session %begins_with% &quot;ce8e40de7c&quot;, ]$extra_pair_1b = NA</code></pre>
<pre class="r"><code>xsection$duration_relationship_total &lt;- xsection$duration_relationship_months + xsection$duration_relationship_years*12 # create new variable duration_relationship_total</code></pre>
</div>
<div id="import-pill-dosage" class="section level3">
<h3>Import pill dosage</h3>
<pre class="r"><code>xsection[, hormonal_contraception := ifelse( contraception %contains% &quot;contraceptive_pill&quot; | contraception %contains% &quot;other_hormonal&quot;, 1, 0) ]
qplot(factor(xsection$hormonal_contraception))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/import.pill.dosage-1.png" width="672" /></p>
<pre class="r"><code>xsection[, pill_contraception := ifelse( contraception %contains% &quot;contraceptive_pill&quot;, 1, 0) ]
qplot(factor(xsection$pill_contraception))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/import.pill.dosage-2.png" width="672" /></p>
<pre class="r"><code>library(xlsx)
pillen = read.xlsx( &quot;item_tables/Vorab_Fragebogen1-v3.xlsx&quot;, sheetName = &quot;Choices&quot;)
pillen = as.data.table(pillen[ 1:97, ])
pillen[, gestagen_ug_merged := as.numeric(as.character( str_replace_all(
  str_replace_all(   str_replace_all( Gestagen.Milligramm.pro.Pille, &#39;500&#39;, &#39;,500&#39;), &#39;000&#39;, &#39;&#39;)
  ,pattern = &#39;,&#39;,&#39;.&#39;) )) * 1000]
pillen[, gestagen_cycle := as.numeric(as.character( str_replace_all( Gestagen.Milligramm.pro.Zyklus , pattern = &#39;,&#39;,&#39;.&#39;)))]

pillen[name == &quot;yasmin&quot;, ]
crosstabs(pillen$gestagen_ug_merged)</code></pre>
<pre><code>## pillen$gestagen_ug_merged
##   30   60   75  100  125  150  250 2000 2500 3000 &lt;NA&gt; 
##    2    1    7   10    3   14    1   31    1    8   19</code></pre>
<pre class="r"><code>pillen[, estrogen_ug_cycle := as.numeric(as.character( strogenmikrogramm.pro.Zyklus )) ]
pillen[, gestagen_type := as.character(Art.des.Gestagens)   ]
crosstabs(pillen$gestagen_type)</code></pre>
<pre><code>## pillen$gestagen_type
##   CMA   CPA   DNG   DSG   DSP   GSD   LNG   NES   NGT NOMAC  &lt;NA&gt; 
##    16    10     8    18     8     3    26     4     2     1     1</code></pre>
<pre class="r"><code>pillen[, pills := as.character(name)]

pillen[is.na(estrogen_ug_cycle), list(pills, strogenmikrogramm.pro.Zyklus) ]
pillen[is.na(gestagen_ug_merged), list(pills, Gestagen.Milligramm.pro.Pille) ]
pillen = pillen[ pills != &#39;other&#39;, ]
pillen[is.na(strogenmikrogramm.pro.Zyklus), estrogen_ug_cycle := 0 ]
pillen[is.na(strogenmikrogramm.pro.Pille), estrogen_ug_merged := 0 ]
qplot(pillen$estrogen_ug_cycle)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/import.pill.dosage-3.png" width="672" /></p>
<pre class="r"><code>table(xsection$pills == &quot;qlaira&quot;)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##   606     4</code></pre>
<pre class="r"><code>table(xsection$pills == &quot;zoely&quot;)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##   602     8</code></pre>
<pre class="r"><code>xsection = merge(xsection, pillen[,list(pills, estrogen_ug_merged,  estrogen_ug_cycle
                                        , gestagen_type,gestagen_ug_merged, gestagen_cycle
                                        )], by = &quot;pills&quot;, all.x = T)
table(xsection$pills == &quot;other&quot;)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##   556    54</code></pre>
<pre class="r"><code>crosstabs(pillen[, estrogen_ug_cycle/estrogen_ug_merged])</code></pre>
<pre><code>## pillen[, estrogen_ug_cycle/estrogen_ug_merged]
##  NaN &lt;NA&gt; 
##    9   87</code></pre>
<pre class="r"><code>## Estrogen Levels for all people (also for those who didnt take the pill)
crosstabs(xsection$estrogen_ug_cycle)</code></pre>
<pre><code>## xsection$estrogen_ug_cycle
##    0  360  420  480  630  665  680  730  735 1150 &lt;NA&gt; 
##   26    1  141   11  328    3    4    2   26    2  664</code></pre>
<pre class="r"><code>xsection[, estrogen_ug_all := ifelse(hormonal_contraception, estrogen_ug_cycle, 0)]
crosstabs(xsection$estrogen_ug_all)</code></pre>
<pre><code>## xsection$estrogen_ug_all
##    0  360  420  480  630  665  680  730  735 1150 &lt;NA&gt; 
##  540    1  141   11  328    3    4    2   26    2  150</code></pre>
<pre class="r"><code># Forming Categories
xsection[, estrogen_categories := cut(estrogen_ug_all, breaks = c(0, 300, 600, 1200), include.lowest = T)]
crosstabs(xsection$estrogen_categories)</code></pre>
<pre><code>## xsection$estrogen_categories
##       [0,300]     (300,600] (600,1.2e+03] 
##           540           153           365</code></pre>
<div id="code-other-pill-names" class="section level4">
<h4>Code other pill names</h4>
<pre class="r"><code>cat(xsection[ pills==&#39;other&#39; &amp; is.na(estrogen_ug_cycle), str_c( str_sub(session, 1, 10),&quot;\n&quot;, other_pill_name,&quot;\n\n&quot;) ])</code></pre>
<pre><code>## 033d3e1d21
## yris mite
## 
##  0643a31c42
## swingo 
## 
##  0d9a341ceb
## desofemine 20 Nova
## 
##  1528e9536b
## dienovel
## 
##  1c93be41a1
## Carlin
## 
##  1f9fc2cc79
## Kleodina
## 
##  21054c807c
## Maitalon
## 
##  2433cc44b9
## ludal gl
## 
##  24af1309b4
## Estinette
## 
##  29220ba555
## Swingo 
## 
##  319e2ce5cb
## Midane
## 
##  354137dd7f
## Sibilla
## 
##  37226a6cf2
## Asumate 30
## 
##  3d0adfe3a2
## Aristelle
## 
##  4167741e29
## yara hexal
## 
##  4202863d09
## Cedia
## 
##  47b6e59dfa
## Layaisa
## 
##  4aafa757ef
## Eliza
## 
##  511189d8a0
## Selina
## 
##  59858e60ea
## Solera
## 
##  5b4fad6f3f
## visanne
## 
##  62f9888d39
## Swingo 30
## 
##  640a7b047b
## aristelle
## 
##  646c651ea4
## Leanova AL
## 
##  6da65c4e45
## Dienovel
## 
##  82aadd4d54
## Dienovel
## 
##  83c84a5860
## Selina
## 
##  86fb131347
## Aristelle
## 
##  8bd7c4624b
## Dienovel
## 
##  8c118bfaaa
## Swingo
## 
##  8f892266fb
## Yvette
## 
##  9336f57640
## Midane
## 
##  9700064ee1
## Dienovel
## 
##  9b49e26d03
## Minette
## 
##  9c89af2b7f
## Microgynon
## 
##  9f61438d5f
## Violette
## 
##  aa38292783
## minesse
## 
##  aebdd368b4
## Swingo 30
## 
##  b726d9cd36
## Swingo
## 
##  c09518da85
## Lysandra beta
## 
##  c33d554719
## Dienovel
## 
##  c6dd42db4b
## desofemono
## 
##  c8ca0944d9
## Velafee
## 
##  cf37f837bc
## Dienogenance
## 
##  d30783c574
## Mirelle
## 
##  d5b5462be5
## Solera
## 
##  e0eeb02960
## LISA - Studienpille
## 
##  e2f049ef95
## mercilon
## 
##  e68978de78
## Desogestrel aristo
## 
##  e7e992c12b
## Desogestrel atisto
## 
##  edb19a9192
## Solgest
## 
##  f42ae3caec
## sibilla
## 
##  f64039d090
## Swingo 30
## 
##  f9454c5d18
## Dienovel</code></pre>
<pre class="r"><code>xsection[ short == &quot;0643a31c42&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;0643a31c42&quot;, gestagens_ug := 100] 
xsection[ short == &quot;0643a31c42&quot;, gestagens := &quot;LNG&quot;]

xsection[ short == &quot;1528e9536b&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;1528e9536b&quot;, gestagens_ug := 2000] 
xsection[ short == &quot;1528e9536b&quot;, gestagens := &quot;DNG&quot;]

xsection[ short == &quot;21054c807c&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;21054c807c&quot;, gestagens_ug := 3000] 
xsection[ short == &quot;21054c807c&quot;, gestagens := &quot;DSP&quot;]

#one person swapped their values
xsection[ short == &quot;24af1309b4&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;24af1309b4&quot;, gestagens_ug := 75] 
xsection[ short == &quot;24af1309b4&quot;, gestagens := &quot;GSD&quot;]

xsection[ short == &quot;4167741e29&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;4167741e29&quot;, gestagens_ug := 3000] 
xsection[ short == &quot;4167741e29&quot;, gestagens := &quot;DSP&quot;]

# visanne is used as a contraceptive only in combination with something containing estrogen, but we don&#39;t know what was the case here
xsection[ short == &quot;5b4fad6f3f&quot;, estrogen_ug := NA]
xsection[ short == &quot;5b4fad6f3f&quot;, gestagens_ug := NA] 
xsection[ short == &quot;5b4fad6f3f&quot;, gestagens := NA_character_]

xsection[ short == &quot;71f06ef90f&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;71f06ef90f&quot;, gestagens_ug := 300] 
xsection[ short == &quot;71f06ef90f&quot;, gestagens := &quot;DNG&quot;]

xsection[ short == &quot;82aadd4d54&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;82aadd4d54&quot;, gestagens_ug := 2000] 
xsection[ short == &quot;82aadd4d54&quot;, gestagens := &quot;DNG&quot;]

xsection[ short == &quot;83c84a5860&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;83c84a5860&quot;, gestagens_ug := 150] 
xsection[ short == &quot;83c84a5860&quot;, gestagens := &quot;LNG&quot;]

xsection[ short == &quot;8bd7c4624b&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;8bd7c4624b&quot;, gestagens_ug := 2000] 
xsection[ short == &quot;8bd7c4624b&quot;, gestagens := &quot;DNG&quot;]

xsection[ short == &quot;9b49e26d03&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;9b49e26d03&quot;, gestagens_ug := 2000] 
xsection[ short == &quot;9b49e26d03&quot;, gestagens := &quot;CMA&quot;]

xsection[ short == &quot;9f61438d5f&quot;, estrogen_ug := 30 ]
xsection[ short == &quot;9f61438d5f&quot;, gestagens_ug := 2000] 
xsection[ short == &quot;9f61438d5f&quot;, gestagens := &quot;DNG&quot;]

xsection[ short == &quot;b726d9cd36&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;b726d9cd36&quot;, gestagens_ug := 100] 
xsection[ short == &quot;b726d9cd36&quot;, gestagens := &quot;LNG&quot;]

xsection[ short == &quot;c09518da85&quot;, estrogen_ug := 35 ]
xsection[ short == &quot;c09518da85&quot;, gestagen_ug := 250] 
xsection[ short == &quot;c09518da85&quot;, gestagens := &quot;NGT&quot;]

xsection[ short == &quot;c6dd42db4b&quot;, estrogen_ug := 0 ]
xsection[ short == &quot;c6dd42db4b&quot;, gestagens_ug := 75] 
xsection[ short == &quot;c6dd42db4b&quot;, gestagens := &quot;DSG&quot;]

xsection[ short == &quot;e2f049ef95&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;e2f049ef95&quot;, gestagens_ug := 60] 
xsection[ short == &quot;e2f049ef95&quot;, gestagens := &quot;DSG&quot;]


xsection[ short == &quot;59858e60ea&quot;, estrogen_ug := 20 ]
xsection[ short == &quot;59858e60ea&quot;, gestagens_ug := 60] 
xsection[ short == &quot;59858e60ea&quot;, gestagens := &quot;DSG&quot;]


xsection[ pills == &quot;other&quot;, list(other_pill_name, estrogen_ug,estrogen_ug_cycle, gestagens, gestagens_ug)]
## could also use info on gestagens etc
xsection[ pills == &quot;other&quot;, estrogen_ug_merged := estrogen_ug] # per pill
xsection[ pills == &quot;other&quot;, estrogen_ug_cycle := 21 * estrogen_ug] # times 21
xsection[ pills == &quot;other&quot;, gestagen_type := gestagens]
xsection[ pills == &quot;other&quot;, gestagen_ug_merged := gestagens_ug]

crosstabs(~is.na(xsection$pills) + is.na(xsection$estrogen_ug_cycle)) # except qlaira and zoely</code></pre>
<pre><code>##                      is.na(xsection$estrogen_ug_cycle)
## is.na(xsection$pills) FALSE TRUE
##                 FALSE   597   13
##                 TRUE      0  598</code></pre>
<pre class="r"><code>qplot(xsection$estrogen_ug_cycle)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/other.pill.name.coding-1.png" width="672" /></p>
<pre class="r"><code># qplot(xsection$gestagen_ug_merged)
# xsection[ gestagen_ug_merged &lt; 100, ]
# xsection[gestagen_ug_merged &lt;= estrogen_ug_merged, list(pills, other_pill_name, gestagen_ug_merged, estrogen_ug_merged) ]
qplot(data=xsection, estrogen_ug_cycle, estrogen_ug_merged, geom = &#39;jitter&#39;)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/other.pill.name.coding-2.png" width="672" /></p>
</div>
</div>
<div id="use-detailed-info-on-non-pill-hormonal-contraception-from-post-survey" class="section level3">
<h3>Use detailed info on non-pill hormonal contraception from post survey</h3>
<pre class="r"><code>library(xlsx)
other_hormonal = read.xlsx( &quot;item_tables/Nachbefragung_other_hormonal.xlsx&quot;, sheetName = &quot;Choices&quot;)
other_hormonal = as.data.table(other_hormonal)
other_hormonal[, hormonal_2 := as.character( name)]

xsection = merge(xsection, other_hormonal[,list(hormonal_2, estrogen_ug_other)], by = &quot;hormonal_2&quot;, all.x = T)

nrow(xsection[!is.na(xsection$estrogen_ug_other),])</code></pre>
<pre><code>## [1] 39</code></pre>
<pre class="r"><code>table(xsection$estrogen_ug_other)</code></pre>
<pre><code>## 
##   0 315 420 
##  12  26   1</code></pre>
<pre class="r"><code>xsection[!is.na(estrogen_ug_other), estrogen_ug_cycle := estrogen_ug_other]</code></pre>
</div>
<div id="pill-by-weight" class="section level3">
<h3>Pill by weight</h3>
<pre class="r"><code>qplot(data = xsection, estrogen_ug_merged, estrogen_ug_cycle)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/pill.by.weight-1.png" width="672" /></p>
<pre class="r"><code>qplot(data = xsection, estrogen_ug_cycle, weight) + geom_smooth() # no association</code></pre>
<p><img src="1_wrangle_data_files/figure-html/pill.by.weight-2.png" width="672" /></p>
<pre class="r"><code>qplot(data = xsection, estrogen_ug_cycle / weight)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/pill.by.weight-3.png" width="672" /></p>
<pre class="r"><code>table(xsection$weight)</code></pre>
<pre><code>## 
##  20  21  22  28  29  30  32  35  37  41  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59 
##   4   3   1   1   2   1   2   1   2   2   4   3   6   6  13  11  19  38  21  38  42  37  73  36  42  73  45 
##  60  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86 
##  82  33  45  45  36  61  39  25  34  21  45  12  15  10  10  29   7   7   9   6  25   3  11   5   5   6   2 
##  87  88  89  90  91  92  93  95  97  99 100 101 105 107 110 111 112 113 114 115 120 130 134 143 166 
##   1   4   2   5   1   1   1   5   2   3   5   1   3   2   1   2   1   1   1   2   6   1   1   1   1</code></pre>
<pre class="r"><code>xsection[, estrogen_ug_per_kg := estrogen_ug_cycle / weight]
xsection[ estrogen_ug_per_kg &gt; 20, list(estrogen_ug_cycle, weight, height)]

crosstabs(xsection$estrogen_ug_cycle)</code></pre>
<pre><code>## xsection$estrogen_ug_cycle
##    0  315  360  420  480  630  665  680  730  735 1150 &lt;NA&gt; 
##   44   28    1  156   11  356    3    4    2   29    2  572</code></pre>
</div>
</div>
<div id="scales" class="section level2 tab-content">
<h2>Scales</h2>
<div id="calculate-partner-attractiveness-and-various-related-scales" class="section level3 tab-content">
<h3>calculate partner attractiveness and various related scales</h3>
<pre class="r"><code>xsection$person = sample(1:nrow(xsection), size = nrow(xsection), replace = F)
library(psych); library(RSA)
alpha = function(x,...) psych::alpha(data.frame(x), ...)

## age_cat
xsection$age_group = cut(xsection$age,c(18,20,25,30,35,45,70), include.lowest = T)</code></pre>
<div id="mate-value-own-partner" class="section level4">
<h4>Mate value (own &amp; partner)</h4>
<pre class="r"><code>xsection$MV_1R = xsection$MV_1
xsection$MV_2R = xsection$MV_2
xsection$MV_P_1R = xsection$MV_P_1
xsection$MV_P_2R = xsection$MV_P_2
xsection[, MV_1 := 6 - MV_1]
xsection[, MV_2 := 6 - MV_2]
xsection[, MV_P_1 := 6 - MV_P_1]
xsection[, MV_P_2 := 6 - MV_P_2]

alpha(xsection[, list(MV_1, MV_2, MV_3, MV_4, MV_5)])</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.73      0.74    0.78      0.37 2.9 0.013  3.3 0.74
## 
##  lower alpha upper     95% confidence boundaries
## 0.71 0.73 0.76 
## 
##  Reliability if an item is dropped:
##      raw_alpha std.alpha G6(smc) average_r S/N alpha se
## MV_1      0.74      0.77    0.76      0.46 3.3    0.013
## MV_2      0.72      0.73    0.74      0.40 2.7    0.013
## MV_3      0.66      0.66    0.67      0.33 1.9    0.016
## MV_4      0.63      0.64    0.64      0.31 1.8    0.017
## MV_5      0.68      0.69    0.73      0.35 2.2    0.016
## 
##  Item statistics 
##         n raw.r std.r r.cor r.drop mean   sd
## MV_1 1208  0.57  0.56  0.39   0.34  2.2 1.02
## MV_2 1208  0.70  0.65  0.52   0.44  3.2 1.29
## MV_3 1208  0.74  0.77  0.75   0.59  3.9 0.90
## MV_4 1208  0.78  0.81  0.80   0.64  3.5 0.97
## MV_5 1208  0.72  0.73  0.63   0.51  3.5 1.10
## 
## Non missing response frequency for each item
##         1    2    3    4    5 miss
## MV_1 0.31 0.35 0.24 0.09 0.02    0
## MV_2 0.13 0.16 0.23 0.29 0.18    0
## MV_3 0.01 0.07 0.19 0.48 0.25    0
## MV_4 0.03 0.11 0.33 0.39 0.13    0
## MV_5 0.06 0.13 0.23 0.41 0.17    0</code></pre>
<pre class="r"><code>alpha(xsection[, list(MV_P_1, MV_P_2, MV_P_3, MV_P_4, MV_P_5)])</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.69       0.7    0.72      0.32 2.4 0.014  3.1 0.69
## 
##  lower alpha upper     95% confidence boundaries
## 0.66 0.69 0.72 
## 
##  Reliability if an item is dropped:
##        raw_alpha std.alpha G6(smc) average_r S/N alpha se
## MV_P_1      0.71      0.73    0.71      0.41 2.8    0.014
## MV_P_2      0.65      0.67    0.67      0.33 2.0    0.017
## MV_P_3      0.61      0.61    0.59      0.28 1.6    0.019
## MV_P_4      0.60      0.60    0.57      0.27 1.5    0.019
## MV_P_5      0.64      0.65    0.67      0.32 1.9    0.017
## 
##  Item statistics 
##           n raw.r std.r r.cor r.drop mean   sd
## MV_P_1 1208  0.55  0.52  0.34   0.28  2.4 1.05
## MV_P_2 1208  0.70  0.66  0.52   0.44  3.2 1.19
## MV_P_3 1208  0.72  0.75  0.72   0.54  3.6 0.92
## MV_P_4 1208  0.74  0.77  0.74   0.57  3.3 0.92
## MV_P_5 1208  0.67  0.68  0.56   0.45  3.1 1.03
## 
## Non missing response frequency for each item
##           1    2    3    4    5 miss
## MV_P_1 0.19 0.36 0.28 0.13 0.03    0
## MV_P_2 0.09 0.20 0.28 0.27 0.16    0
## MV_P_3 0.01 0.11 0.29 0.43 0.17    0
## MV_P_4 0.02 0.15 0.40 0.34 0.10    0
## MV_P_5 0.07 0.22 0.36 0.28 0.08    0</code></pre>
<pre class="r"><code>alpha(xsection[, list(MV_3, MV_4, MV_5)])</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##       0.84      0.85     0.8      0.65 5.6 0.0081  3.6 0.87
## 
##  lower alpha upper     95% confidence boundaries
## 0.82 0.84 0.86 
## 
##  Reliability if an item is dropped:
##      raw_alpha std.alpha G6(smc) average_r S/N alpha se
## MV_3      0.76      0.76    0.61      0.61 3.2   0.0138
## MV_4      0.72      0.73    0.57      0.57 2.7   0.0158
## MV_5      0.87      0.87    0.77      0.77 6.6   0.0076
## 
##  Item statistics 
##         n raw.r std.r r.cor r.drop mean   sd
## MV_3 1208  0.87  0.89  0.82   0.74  3.9 0.90
## MV_4 1208  0.90  0.91  0.86   0.77  3.5 0.97
## MV_5 1208  0.85  0.83  0.67   0.63  3.5 1.10
## 
## Non missing response frequency for each item
##         1    2    3    4    5 miss
## MV_3 0.01 0.07 0.19 0.48 0.25    0
## MV_4 0.03 0.11 0.33 0.39 0.13    0
## MV_5 0.06 0.13 0.23 0.41 0.17    0</code></pre>
<pre class="r"><code>alpha(xsection[, list(MV_P_3, MV_P_4, MV_P_5)])</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean  sd
##       0.78      0.79    0.73      0.56 3.8 0.011  3.3 0.8
## 
##  lower alpha upper     95% confidence boundaries
## 0.76 0.78 0.81 
## 
##  Reliability if an item is dropped:
##        raw_alpha std.alpha G6(smc) average_r S/N alpha se
## MV_P_3      0.67      0.67    0.50      0.50 2.0    0.019
## MV_P_4      0.63      0.63    0.46      0.46 1.7    0.021
## MV_P_5      0.83      0.83    0.70      0.70 4.7    0.010
## 
##  Item statistics 
##           n raw.r std.r r.cor r.drop mean   sd
## MV_P_3 1208  0.85  0.86  0.78   0.66  3.6 0.92
## MV_P_4 1208  0.87  0.88  0.81   0.70  3.3 0.92
## MV_P_5 1208  0.80  0.78  0.57   0.52  3.1 1.03
## 
## Non missing response frequency for each item
##           1    2    3    4    5 miss
## MV_P_3 0.01 0.11 0.29 0.43 0.17    0
## MV_P_4 0.02 0.15 0.40 0.34 0.10    0
## MV_P_5 0.07 0.22 0.36 0.28 0.08    0</code></pre>
<pre class="r"><code>pairs.panels(xsection %&gt;% select(matches(&quot;MV_\\d$&quot;)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre class="r"><code>fa.parallel(xsection %&gt;% select(matches(&quot;MV_\\d$&quot;)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<pre><code>## Parallel analysis suggests that the number of factors =  2  and the number of components =  2</code></pre>
<pre class="r"><code>fa(xsection %&gt;% select(matches(&quot;MV_\\d$&quot;)), 2)</code></pre>
<pre><code>## Factor Analysis using method =  minres
## Call: fa(r = xsection %&gt;% select(matches(&quot;MV_\\d$&quot;)), nfactors = 2)
## Standardized loadings (pattern matrix) based upon correlation matrix
##        MR1   MR2   h2   u2 com
## MV_1 -0.03  0.90 0.80 0.20 1.0
## MV_2  0.19  0.53 0.37 0.63 1.3
## MV_3  0.85 -0.03 0.72 0.28 1.0
## MV_4  0.91  0.01 0.82 0.18 1.0
## MV_5  0.67  0.02 0.46 0.54 1.0
## 
##                        MR1  MR2
## SS loadings           2.05 1.12
## Proportion Var        0.41 0.22
## Cumulative Var        0.41 0.63
## Proportion Explained  0.65 0.35
## Cumulative Proportion 0.65 1.00
## 
##  With factor correlations of 
##      MR1  MR2
## MR1 1.00 0.24
## MR2 0.24 1.00
## 
## Mean item complexity =  1.1
## Test of the hypothesis that 2 factors are sufficient.
## 
## The degrees of freedom for the null model are  10  and the objective function was  1.8 with Chi Square of  2171
## The degrees of freedom for the model are 1  and the objective function was  0 
## 
## The root mean square of the residuals (RMSR) is  0 
## The df corrected root mean square of the residuals is  0 
## 
## The harmonic number of observations is  1208 with the empirical chi square  0.01  with prob &lt;  0.91 
## The total number of observations was  1208  with Likelihood Chi Square =  0.03  with prob &lt;  0.86 
## 
## Tucker Lewis Index of factoring reliability =  1.004
## RMSEA index =  0  and the 90 % confidence intervals are  0 NA
## BIC =  -7.07
## Fit based upon off diagonal values = 1
## Measures of factor score adequacy             
##                                                 MR1  MR2
## Correlation of scores with factors             0.94 0.91
## Multiple R square of scores with factors       0.89 0.82
## Minimum correlation of possible factor scores  0.78 0.65</code></pre>
<pre class="r"><code>pairs.panels(xsection %&gt;% select(matches(&quot;MV_P_\\d$&quot;)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-12-3.png" width="672" /></p>
<pre class="r"><code>fa.parallel(xsection %&gt;% select(matches(&quot;MV_P_\\d$&quot;)) %&gt;% data.frame())</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-12-4.png" width="672" /></p>
<pre><code>## Parallel analysis suggests that the number of factors =  2  and the number of components =  2</code></pre>
<pre class="r"><code>fa(xsection %&gt;% select(matches(&quot;MV_P_\\d$&quot;)) %&gt;% data.frame(), 2)</code></pre>
<pre><code>## Factor Analysis using method =  minres
## Call: fa(r = xsection %&gt;% select(matches(&quot;MV_P_\\d$&quot;)) %&gt;% data.frame(), 
##     nfactors = 2)
## Standardized loadings (pattern matrix) based upon correlation matrix
##          MR2   MR1   h2    u2 com
## MV_P_1 -0.02  0.47 0.21 0.788   1
## MV_P_2  0.00  0.96 0.92 0.075   1
## MV_P_3  0.80  0.00 0.65 0.353   1
## MV_P_4  0.88 -0.02 0.76 0.236   1
## MV_P_5  0.56  0.06 0.33 0.666   1
## 
##                        MR2  MR1
## SS loadings           1.73 1.15
## Proportion Var        0.35 0.23
## Cumulative Var        0.35 0.58
## Proportion Explained  0.60 0.40
## Cumulative Proportion 0.60 1.00
## 
##  With factor correlations of 
##      MR2  MR1
## MR2 1.00 0.34
## MR1 0.34 1.00
## 
## Mean item complexity =  1
## Test of the hypothesis that 2 factors are sufficient.
## 
## The degrees of freedom for the null model are  10  and the objective function was  1.32 with Chi Square of  1592
## The degrees of freedom for the model are 1  and the objective function was  0 
## 
## The root mean square of the residuals (RMSR) is  0 
## The df corrected root mean square of the residuals is  0.01 
## 
## The harmonic number of observations is  1208 with the empirical chi square  0.15  with prob &lt;  0.7 
## The total number of observations was  1208  with Likelihood Chi Square =  0.29  with prob &lt;  0.59 
## 
## Tucker Lewis Index of factoring reliability =  1.004
## RMSEA index =  0  and the 90 % confidence intervals are  0 0.033
## BIC =  -6.8
## Fit based upon off diagonal values = 1
## Measures of factor score adequacy             
##                                                 MR2  MR1
## Correlation of scores with factors             0.92 0.96
## Multiple R square of scores with factors       0.85 0.93
## Minimum correlation of possible factor scores  0.70 0.85</code></pre>
<pre class="r"><code># in both cases the first two items don&#39;t play well with the rest. the questions are also extremely complex, require counterfactual thinking and tap into at least perception of own attractiveness, perception of partner attractiveness, perception of own/partner mating skills. Hence we just use MV_short, MV_P_short, discard the rest


xsection$MV = rowMeans(xsection[, list(MV_1, MV_2, MV_3, MV_4, MV_5)])
xsection$MV_P = rowMeans(xsection[, list(MV_P_1, MV_P_2, MV_P_3, MV_P_4, MV_P_5)])
xsection$MV_short = rowMeans(xsection[, list( MV_3, MV_4, MV_5)])
xsection$MV_P_short = rowMeans(xsection[, list(MV_P_3, MV_P_4, MV_P_5)])
cor.test(xsection$MV_P_short, xsection$MV_short)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  xsection$MV_P_short and xsection$MV_short
## t = 8.9, df = 1200, p-value &lt;2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.1959 0.3017
## sample estimates:
##    cor 
## 0.2495</code></pre>
<pre class="r"><code>cor.test(xsection$MV_P, xsection$MV)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  xsection$MV_P and xsection$MV
## t = 4.1, df = 1200, p-value = 0.00005
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.0606 0.1719
## sample estimates:
##    cor 
## 0.1166</code></pre>
</div>
<div id="zip-relationship-satisfaction" class="section level4">
<h4>ZIP (relationship satisfaction)</h4>
<pre class="r"><code>pairs.panels(xsection %&gt;% select(matches(&quot;ZIP_\\d$&quot;)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="r"><code>psych::alpha(xsection %&gt;% select(matches(&quot;ZIP_\\d$&quot;)) %&gt;% data.frame())</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = xsection %&gt;% select(matches(&quot;ZIP_\\d$&quot;)) %&gt;% 
##     data.frame())
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd
##        0.9       0.9    0.89      0.55 8.6 0.0045  4.1 0.72
## 
##  lower alpha upper     95% confidence boundaries
## 0.89 0.9 0.9 
## 
##  Reliability if an item is dropped:
##       raw_alpha std.alpha G6(smc) average_r S/N alpha se
## ZIP_1      0.88      0.88    0.87      0.55 7.5   0.0052
## ZIP_5      0.87      0.88    0.87      0.54 7.0   0.0055
## ZIP_6      0.89      0.89    0.88      0.58 8.1   0.0049
## ZIP_2      0.86      0.87    0.85      0.52 6.4   0.0059
## ZIP_3      0.88      0.88    0.87      0.54 7.1   0.0054
## ZIP_7      0.89      0.89    0.88      0.58 8.2   0.0048
## ZIP_4      0.88      0.88    0.87      0.55 7.3   0.0052
## 
##  Item statistics 
##          n raw.r std.r r.cor r.drop mean   sd
## ZIP_1 1208  0.77  0.78  0.73   0.69  4.0 0.88
## ZIP_5 1208  0.82  0.81  0.78   0.74  3.9 1.03
## ZIP_6 1208  0.70  0.72  0.65   0.61  4.5 0.76
## ZIP_2 1208  0.87  0.88  0.87   0.82  4.2 0.93
## ZIP_3 1208  0.81  0.81  0.77   0.73  4.2 0.92
## ZIP_7 1208  0.72  0.71  0.64   0.61  3.4 0.99
## ZIP_4 1208  0.79  0.79  0.74   0.70  4.4 0.93
## 
## Non missing response frequency for each item
##          1    2    3    4    5 miss
## ZIP_1 0.01 0.06 0.17 0.45 0.32    0
## ZIP_5 0.02 0.10 0.18 0.35 0.36    0
## ZIP_6 0.01 0.02 0.07 0.24 0.66    0
## ZIP_2 0.01 0.05 0.13 0.37 0.43    0
## ZIP_3 0.01 0.05 0.16 0.34 0.44    0
## ZIP_7 0.05 0.15 0.28 0.44 0.08    0
## ZIP_4 0.01 0.04 0.11 0.17 0.67    0</code></pre>
<pre class="r"><code># aggregation justified</code></pre>
<pre class="r"><code>xsection$attractiveness_overall = xsection$attractiveness_face # wrong item name

# short term, long term, global
pairs.panels(xsection %&gt;% select(one_of(&quot;attractiveness_stp&quot;, &quot;attractiveness_ltp&quot;, &quot;attractiveness_overall&quot;)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre class="r"><code># same logic here, short/long-term attractiveness relative to self is a very complex question, mixes a bunch of things and is hard to parse, also seen in pattern of correlations, so we cut it
attr_items = c(&quot;attractiveness_relativ_1&quot;, &quot;attractiveness_stp&quot;, &quot;attractiveness_stp_self&quot;, &quot;attractiveness_overall&quot;, 
&quot;attractiveness_body&quot;,  &quot;attractiveness_occupation&quot;, &quot;attractiveness_ltp&quot;, &quot;attractiveness_ltp_self&quot;, &quot;attractiveness_finance_1&quot;,
&quot;attractiveness_finance_2&quot;)
st_attr_items = c(&quot;attractiveness_stp&quot;, &quot;attractiveness_body&quot;, &quot;sexy&quot;)
pairs.panels(xsection %&gt;% select(one_of(attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
<pre class="r"><code>pairs.panels(xsection %&gt;% select(one_of(st_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-3.png" width="672" /></p>
<pre class="r"><code>psych::alpha(xsection %&gt;% select(one_of(st_attr_items)) %&gt;% data.frame(), check.keys = F)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = xsection %&gt;% select(one_of(st_attr_items)) %&gt;% 
##     data.frame(), check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.73      0.76     0.7      0.51 3.2 0.013  3.8 0.81
## 
##  lower alpha upper     95% confidence boundaries
## 0.71 0.73 0.76 
## 
##  Reliability if an item is dropped:
##                     raw_alpha std.alpha G6(smc) average_r S/N alpha se
## attractiveness_stp       0.80      0.81    0.68      0.68 4.2    0.011
## attractiveness_body      0.61      0.63    0.46      0.46 1.7    0.021
## sexy                     0.55      0.58    0.41      0.41 1.4    0.024
## 
##  Item statistics 
##                        n raw.r std.r r.cor r.drop mean   sd
## attractiveness_stp  1208  0.82  0.76  0.53   0.48  3.2 1.22
## attractiveness_body 1208  0.80  0.84  0.75   0.61  4.2 0.82
## sexy                1208  0.84  0.87  0.79   0.65  3.8 0.92
## 
## Non missing response frequency for each item
##                        1    2    3    4    5 miss
## attractiveness_stp  0.06 0.29 0.21 0.25 0.19    0
## attractiveness_body 0.00 0.02 0.16 0.37 0.44    0
## sexy                0.01 0.06 0.28 0.38 0.27    0</code></pre>
<pre class="r"><code>fa.parallel(xsection %&gt;% select(one_of(st_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-4.png" width="672" /></p>
<pre><code>## Parallel analysis suggests that the number of factors =  1  and the number of components =  1</code></pre>
<pre class="r"><code>qplot(age, attractiveness_finance_2, data = xsection) + geom_smooth(method = &quot;gam&quot;, formula = y ~ s(x))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-5.png" width="672" /></p>
<pre class="r"><code>xsection$attractiveness_income_age_corrected = residuals(mgcv::gam(attractiveness_finance_2 ~ s(age), data = xsection, na.action = na.exclude)) # we don&#39;t have the partner&#39;s age, so make do with the woman&#39;s age. # adjusting doesn&#39;t do much
lt_attr_items = c(&quot;attractiveness_occupation&quot;, &quot;attractiveness_ltp&quot;, &quot;attractiveness_finance_1&quot;, &quot;attractiveness_income_age_corrected&quot;, &quot;attractiveness_finance_2&quot;)
pairs.panels(xsection %&gt;% select(one_of(lt_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-6.png" width="672" /></p>
<pre class="r"><code>psych::alpha(xsection %&gt;% select(one_of(lt_attr_items)) %&gt;% data.frame(), check.keys = F)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = xsection %&gt;% select(one_of(lt_attr_items)) %&gt;% 
##     data.frame(), check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.72       0.7    0.74      0.32 2.3 0.012  2.7 0.71
## 
##  lower alpha upper     95% confidence boundaries
## 0.7 0.72 0.74 
## 
##  Reliability if an item is dropped:
##                                     raw_alpha std.alpha G6(smc) average_r S/N alpha se
## attractiveness_occupation                0.72      0.69    0.73      0.36 2.2   0.0120
## attractiveness_ltp                       0.79      0.78    0.79      0.48 3.6   0.0098
## attractiveness_finance_1                 0.60      0.57    0.64      0.25 1.3   0.0181
## attractiveness_income_age_corrected      0.59      0.57    0.57      0.25 1.4   0.0185
## attractiveness_finance_2                 0.61      0.59    0.59      0.27 1.4   0.0177
## 
##  Item statistics 
##                                        n raw.r std.r r.cor r.drop     mean   sd
## attractiveness_occupation           1208  0.58  0.61  0.43   0.36  3.5e+00 0.95
## attractiveness_ltp                  1208  0.33  0.40  0.13   0.10  4.3e+00 0.84
## attractiveness_finance_1            1208  0.81  0.80  0.74   0.66  3.0e+00 1.07
## attractiveness_income_age_corrected 1208  0.82  0.79  0.81   0.69 -1.6e-14 1.02
## attractiveness_finance_2            1208  0.82  0.77  0.78   0.62  2.7e+00 1.26</code></pre>
<pre class="r"><code>fa.parallel(xsection %&gt;% select(one_of(lt_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-14-7.png" width="672" /></p>
<pre><code>## Parallel analysis suggests that the number of factors =  2  and the number of components =  2</code></pre>
</div>
<div id="partners-physical-attractiveness" class="section level4">
<h4>Partners physical attractiveness</h4>
<pre class="r"><code>spearman_brown = function(df) {
  cor = cor(df)[1,2]
  2*cor/(1+cor)
}
physical_attr_items = c(&quot;attractiveness_body&quot;, &quot;sexy&quot;)
pairs.panels(xsection %&gt;% select(one_of(physical_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>xsection %&gt;% select(one_of(physical_attr_items)) %&gt;% spearman_brown()</code></pre>
<pre><code>## [1] 0.8066</code></pre>
<pre class="r"><code>xsection %&gt;% select(one_of(physical_attr_items)) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean  sd
##        0.8      0.81    0.68      0.68 4.2 0.011    4 0.8
## 
##  lower alpha upper     95% confidence boundaries
## 0.78 0.8 0.83 
## 
##  Reliability if an item is dropped:
##                     raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## attractiveness_body      0.68      0.68    0.46      0.68   NA       NA
## sexy                     0.46      0.68      NA        NA 0.68    0.024
## 
##  Item statistics 
##                        n raw.r std.r r.cor r.drop mean   sd
## attractiveness_body 1208  0.90  0.92  0.75   0.68  4.2 0.82
## sexy                1208  0.93  0.92  0.75   0.68  3.8 0.92
## 
## Non missing response frequency for each item
##                        1    2    3    4    5 miss
## attractiveness_body 0.00 0.02 0.16 0.37 0.44    0
## sexy                0.01 0.06 0.28 0.38 0.27    0</code></pre>
<pre class="r"><code>xsection$partner_attractiveness_physical = rowSums(xsection %&gt;% select(one_of(physical_attr_items)))</code></pre>
</div>
<div id="partners-financial-attractiveness" class="section level4">
<h4>Partners financial attractiveness</h4>
<pre class="r"><code>money_attr_items = c(&quot;attractiveness_occupation&quot;, &quot;attractiveness_finance_1&quot;, &quot;attractiveness_finance_2&quot;)
pairs.panels(xsection %&gt;% select(one_of(money_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="r"><code>psych::alpha(xsection %&gt;% select(one_of(money_attr_items)) %&gt;% data.frame(), check.keys = F)</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = xsection %&gt;% select(one_of(money_attr_items)) %&gt;% 
##     data.frame(), check.keys = F)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.66      0.66    0.62       0.4   2 0.016  3.1 0.85
## 
##  lower alpha upper     95% confidence boundaries
## 0.63 0.66 0.7 
## 
##  Reliability if an item is dropped:
##                           raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## attractiveness_occupation      0.73      0.73    0.58      0.58 2.77    0.015
## attractiveness_finance_1       0.33      0.34    0.20      0.20 0.51    0.037
## attractiveness_finance_2       0.58      0.58    0.41      0.41 1.38    0.024
## 
##  Item statistics 
##                              n raw.r std.r r.cor r.drop mean   sd
## attractiveness_occupation 1208  0.64  0.69  0.43   0.33  3.5 0.95
## attractiveness_finance_1  1208  0.86  0.86  0.78   0.65  3.0 1.07
## attractiveness_finance_2  1208  0.81  0.77  0.62   0.48  2.7 1.26
## 
## Non missing response frequency for each item
##                              1    2    3    4    5 miss
## attractiveness_occupation 0.02 0.13 0.30 0.41 0.13    0
## attractiveness_finance_1  0.08 0.26 0.30 0.29 0.06    0
## attractiveness_finance_2  0.18 0.34 0.22 0.14 0.13    0</code></pre>
<pre class="r"><code>fa.parallel(xsection %&gt;% select(one_of(money_attr_items)))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-16-2.png" width="672" /></p>
<pre><code>## Parallel analysis suggests that the number of factors =  2  and the number of components =  1</code></pre>
<pre class="r"><code>fa(xsection %&gt;% select(one_of(money_attr_items)), 2)</code></pre>
<pre><code>## Factor Analysis using method =  minres
## Call: fa(r = xsection %&gt;% select(one_of(money_attr_items)), nfactors = 2)
## Standardized loadings (pattern matrix) based upon correlation matrix
##                            MR1   MR2   h2   u2 com
## attractiveness_occupation 0.02  0.66 0.45 0.55 1.0
## attractiveness_finance_1  0.64  0.30 0.67 0.33 1.4
## attractiveness_finance_2  0.82 -0.10 0.61 0.39 1.0
## 
##                        MR1  MR2
## SS loadings           1.14 0.59
## Proportion Var        0.38 0.20
## Cumulative Var        0.38 0.58
## Proportion Explained  0.66 0.34
## Cumulative Proportion 0.66 1.00
## 
##  With factor correlations of 
##      MR1  MR2
## MR1 1.00 0.48
## MR2 0.48 1.00
## 
## Mean item complexity =  1.1
## Test of the hypothesis that 2 factors are sufficient.
## 
## The degrees of freedom for the null model are  3  and the objective function was  0.59 with Chi Square of  716.6
## The degrees of freedom for the model are -2  and the objective function was  0 
## 
## The root mean square of the residuals (RMSR) is  0 
## The df corrected root mean square of the residuals is  NA 
## 
## The harmonic number of observations is  1208 with the empirical chi square  0  with prob &lt;  NA 
## The total number of observations was  1208  with Likelihood Chi Square =  0  with prob &lt;  NA 
## 
## Tucker Lewis Index of factoring reliability =  1.004
## Fit based upon off diagonal values = 1
## Measures of factor score adequacy             
##                                                 MR1  MR2
## Correlation of scores with factors             0.87 0.76
## Multiple R square of scores with factors       0.76 0.58
## Minimum correlation of possible factor scores  0.53 0.15</code></pre>
<pre class="r"><code>xsection$partner_attractiveness_money = rowMeans(xsection %&gt;% select(one_of(money_attr_items)))

xsection$partner_attractiveness_global = scale(rowSums(xsection %&gt;% select(attractiveness_overall, MV_P_short)))</code></pre>
</div>
<div id="partners-short-term-attractiveness" class="section level4">
<h4>Partners short-term attractiveness</h4>
<pre class="r"><code>xsection %&gt;% select(attractiveness_stp, partner_attractiveness_physical, satisfaction_sexual_intercourse) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.62      0.63    0.55      0.36 1.7 0.017  5.1 0.98
## 
##  lower alpha upper     95% confidence boundaries
## 0.59 0.62 0.66 
## 
##  Reliability if an item is dropped:
##                                 raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## attractiveness_stp                   0.49      0.55    0.37      0.37 1.20    0.025
## partner_attractiveness_physical      0.37      0.38    0.24      0.24 0.62    0.035
## satisfaction_sexual_intercourse      0.63      0.64    0.48      0.48 1.81    0.020
## 
##  Item statistics 
##                                    n raw.r std.r r.cor r.drop mean   sd
## attractiveness_stp              1208  0.76  0.75  0.56   0.46  3.2 1.22
## partner_attractiveness_physical 1208  0.87  0.81  0.68   0.55  8.1 1.59
## satisfaction_sexual_intercourse 1155  0.63  0.71  0.45   0.36  4.0 0.92</code></pre>
<pre class="r"><code>xsection %&gt;% select(attractiveness_stp, attractiveness_face, attractiveness_body, sexy) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N  ase mean   sd
##       0.78      0.79    0.76      0.49 3.9 0.01  3.7 0.75
## 
##  lower alpha upper     95% confidence boundaries
## 0.76 0.78 0.8 
## 
##  Reliability if an item is dropped:
##                     raw_alpha std.alpha G6(smc) average_r S/N alpha se
## attractiveness_stp       0.79      0.79    0.73      0.55 3.7    0.011
## attractiveness_face      0.73      0.76    0.70      0.51 3.2    0.013
## attractiveness_body      0.70      0.72    0.63      0.46 2.6    0.014
## sexy                     0.68      0.70    0.61      0.44 2.3    0.015
## 
##  Item statistics 
##                        n raw.r std.r r.cor r.drop mean   sd
## attractiveness_stp  1208  0.78  0.73  0.57   0.52  3.2 1.22
## attractiveness_face 1208  0.75  0.76  0.63   0.57  3.7 0.88
## attractiveness_body 1208  0.78  0.81  0.75   0.64  4.2 0.82
## sexy                1208  0.82  0.84  0.79   0.67  3.8 0.92
## 
## Non missing response frequency for each item
##                        1    2    3    4    5 miss
## attractiveness_stp  0.06 0.29 0.21 0.25 0.19    0
## attractiveness_face 0.01 0.10 0.26 0.47 0.15    0
## attractiveness_body 0.00 0.02 0.16 0.37 0.44    0
## sexy                0.01 0.06 0.28 0.38 0.27    0</code></pre>
<pre class="r"><code>xsection$partner_attractiveness_shortterm = scale(rowSums(xsection %&gt;% select(attractiveness_stp, partner_attractiveness_physical, satisfaction_sexual_intercourse), na.rm = TRUE)) # missings in satisfaction_sexual_intercourse for those who haven&#39;t yet had sex with partner 
xsection$partner_attractiveness_shortterm_v2 = scale(rowSums(xsection %&gt;% select(attractiveness_stp, attractiveness_face, attractiveness_body, sexy), na.rm = TRUE)) # missings in satisfaction_sexual_intercourse for those who haven&#39;t yet had sex with partner </code></pre>
</div>
<div id="partners-long-term-attractiveness" class="section level4">
<h4>Partners long-term attractiveness</h4>
<pre class="r"><code>xsection$partner_attractiveness_longterm = scale(rowSums(xsection %&gt;% select(attractiveness_ltp)))</code></pre>
</div>
<div id="partners-attractiveness-relative-to-own" class="section level4">
<h4>Partners attractiveness relative to own</h4>
<pre class="r"><code>xsection[, MV_diff := MV_P_short - MV_short]

attractiveness = RSA(attractiveness_relativ_1 ~ MV_P_short * MV_short, data = xsection, center = T)</code></pre>
<pre><code>## [1] &quot;Computing additive model (additive) ...&quot;
## [1] &quot;Computing x + x^2 model (onlyx2) ...&quot;
## [1] &quot;Computing y + y^2 model (onlyy2) ...&quot;
## [1] &quot;Computing x model (onlyx) ...&quot;
## [1] &quot;Computing y model (onlyy) ...&quot;
## [1] &quot;Computing interaction model (IA)...&quot;
## [1] &quot;Computing squared difference model (SQD) ...&quot;
## [1] &quot;Computing shifted squared difference model (SSQD) ...&quot;
## [1] &quot;Computing rising ridge model (RR) ...&quot;
## [1] &quot;Computing shifted rising ridge model (SRR) ...&quot;
## [1] &quot;Computing rotated and shifted rising ridge model (SRRR), up ...&quot;
## [1] &quot;Computing rotated and shifted rising ridge model (SRRR), down ...&quot;
## [1] &quot;Direction of SRRR curvature: down&quot;
## [1] &quot;Computing rotated squared difference model (SRSQD), up ...&quot;
## [1] &quot;Computing rotated squared difference model (SRSQD), down ...&quot;
## [1] &quot;Direction of SRSQD curvature: up&quot;
## [1] &quot;Computing polynomial model (full) ...&quot;</code></pre>
<pre class="r"><code>summary(attractiveness)</code></pre>
<pre><code>## RSA output (package version 0.9.10)
## ===========================================
## 
## Are there discrepancies in the predictors (with respect to numerical congruence)?
## ----------------------------
## Congruence
## MV_short &lt; MV_P_short            Congruence MV_short &gt; MV_P_short 
##                  29.4                  44.3                  26.3 
## 
## Is the full polynomial model significant?
## ----------------------------
## Test on model significance: R^2 = 0.361, p &lt;.001
## 
## 
## Number of observations: n = 1208
## ----------------------------
## 
## 
## Regression coefficients for model &lt;full&gt;
## ----------------------------
##                                              label    est    se ci.lower ci.upper   beta   pvalue sig
## attractiveness_relativ_1~1                      b0  2.284 0.021    2.243    2.326  3.304  p &lt;.001 ***
## attractiveness_relativ_1~MV_P_short             b1  0.400 0.022    0.358    0.443  0.464  p &lt;.001 ***
## attractiveness_relativ_1~MV_short               b2 -0.415 0.022   -0.458   -0.373 -0.520  p &lt;.001 ***
## attractiveness_relativ_1~MV_P_short2            b3 -0.003 0.019   -0.040    0.035 -0.003 p = .887    
## attractiveness_relativ_1~MV_P_short_MV_short    b4 -0.080 0.021   -0.121   -0.038 -0.090  p &lt;.001 ***
## attractiveness_relativ_1~MV_short2              b5 -0.010 0.016   -0.041    0.021 -0.015 p = .539    
## 
## 
## 
## Surface tests (a1 to a4) for model &lt;full&gt;
## ----------------------------
##   label    est    se ci.lower ci.upper   pvalue sig
## 1    a1 -0.015 0.027   -0.068    0.037 p = .574    
## 2    a2 -0.092 0.026   -0.142   -0.042  p &lt;.001 ***
## 3    a3  0.816 0.034    0.749    0.882  p &lt;.001 ***
## 4    a4  0.067 0.035   -0.001    0.135 p = .055   
## 
## a1: Linear additive effect on line of congruence? NO
## a2: Is there curvature on the line of congruence? YES
## a3: Is the ridge shifted away from the LOC? YES
## a4: Is there a general effect of incongruence? NO
## 
## 
## Location of stationary point for model &lt;full&gt;
## ----------------------------
## MV_P_short = -6.573; MV_short = 5.484; predicted attractiveness_relativ_1 = -0.17
## 
## 
## Principal axes for model &lt;full&gt;
## ----------------------------
##                    label    est    se ci.lower ci.upper   pvalue sig
## Intercept of 1. PA   p10 -0.531 1.423   -3.320    2.257 p = .709    
## Slope of 1. PA       p11 -0.915 0.314   -1.530   -0.300 p = .004  **
## Intercept of 2. PA   p20 12.667 6.603   -0.274   25.608 p = .055   
## Slope of 2. PA       p21  1.093 0.375    0.359    1.827 p = .004  **
##   --&gt; Lateral shift of first PA from LOC at point (0; 0): C1 =  6.258 
##   --&gt; Lateral shift of second PA from LOC at point (0; 0): C2 =  -6.053</code></pre>
<pre class="r"><code>plot(attractiveness) # nothing funny here, conforms to expected pattern, i.e. the more MV_P &gt; MV then relative attractiveness is higher</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code>sapply(xsection[, MV_diff, attractiveness_relativ_1], scale) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase     mean   sd
##       0.74      0.74    0.59      0.59 2.9 0.015 -4.7e-17 0.89
## 
##  lower alpha upper     95% confidence boundaries
## 0.72 0.74 0.77 
## 
##  Reliability if an item is dropped:
##                          raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## attractiveness_relativ_1      0.59      0.59    0.35      0.59   NA       NA
## MV_diff                       0.35      0.59      NA        NA 0.59    0.022
## 
##  Item statistics 
##                             n raw.r std.r r.cor r.drop     mean sd
## attractiveness_relativ_1 1208  0.89  0.89  0.69   0.59 -1.3e-16  1
## MV_diff                  1208  0.89  0.89  0.69   0.59  7.5e-18  1</code></pre>
<pre class="r"><code>sapply(xsection[, MV_diff, attractiveness_relativ_1], scale) %&gt;% spearman_brown()</code></pre>
<pre><code>## [1] 0.7445</code></pre>
<pre class="r"><code>xsection$partner_attractiveness_rel_to_self = scale(rowSums(sapply(xsection[, MV_diff, attractiveness_relativ_1], scale)))

pairs.panels(xsection %&gt;% select(partner_attractiveness_rel_to_self, attractiveness_overall, MV_short, MV_P_short, partner_attractiveness_money, partner_attractiveness_physical, partner_attractiveness_shortterm, partner_attractiveness_longterm)) # relative measure is orthogonal to all absolute measures</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-19-2.png" width="672" /></p>
</div>
</div>
<div id="diary-scales" class="section level3">
<h3>diary scales</h3>
<pre class="r"><code># create  NARQ_K_total scale

tagebuch$NARQ_K_total = rowMeans(tagebuch[, list(NARQ_admiration_1, NARQ_admiration_2, NARQ_admiration_3, NARQ_rivalry_1, NARQ_rivalry_2, NARQ_rivalry_3 ) ])

###create extra-pair subscales

#extra-pair desire/fantasies; extra_pair_7, extra_pair_10, extra_pair_11, extra_pair_12, extra_pair_13
tagebuch$extra_pair_desire = rowMeans(tagebuch[, list(extra_pair_7, extra_pair_10, extra_pair_11, extra_pair_12, extra_pair_13)])

tagebuch$extra_pair_sexual_fantasies = tagebuch$extra_pair_13

#extra-pair flirting; extra_pair_4, extra_pair_8, extra_pair_9 
tagebuch$extra_pair_flirting = rowMeans(tagebuch[, list(extra_pair_4, extra_pair_8, extra_pair_9)])

#extra-pair compliments; extra_pair_2, extra_pair_3 
tagebuch$extra_pair_compliments = rowMeans(tagebuch[, list(extra_pair_2, extra_pair_3)])

#extra-pair going out; extra_pair_5, extra_pair_6
tagebuch$extra_pair_going_out = rowMeans(tagebuch[, list(extra_pair_5, extra_pair_6)])

tagebuch$extra_pair = rowMeans( subset(tagebuch, select = extra_pair_2:extra_pair_13) )


tagebuch %&gt;%
  filter(!is.na(created)) %&gt;%
  arrange(session, created) %&gt;%
  rename(sexual_intercourse_satisfaction =  sexual_intercourse_4) %&gt;% 
  mutate(
    short_session = str_sub(session, 1, 6),
    created_date = as.Date(created - dhours(9)),
    partner_initiated_sexual_intercourse =  ifelse(sexual_intercourse_3 == 2, 1, 0),
    had_sexual_intercourse =  ifelse(sexual_intercourse_2 == 3, 0, 1),
    had_petting =  ifelse(sexual_intercourse_5 == 3, 0, 1),
    extra_pair_intimacy = ifelse(extra_pair_1 == 1, 1, 0),
    extra_pair_sex = ifelse(is.na(extra_pair_1b) | extra_pair_1b != 1, 0, 1)
) -&gt; tagebuch

tagebuch %&gt;% select(matches(&quot;choice_of_clothing_(4|6|7)&quot;)) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.84      0.84    0.79      0.64 5.3 0.0016  3.1 1.2
## 
##  lower alpha upper     95% confidence boundaries
## 0.84 0.84 0.85 
## 
##  Reliability if an item is dropped:
##                      raw_alpha std.alpha G6(smc) average_r S/N alpha se
## choice_of_clothing_4      0.72      0.72    0.56      0.56 2.5   0.0032
## choice_of_clothing_6      0.85      0.85    0.74      0.74 5.7   0.0017
## choice_of_clothing_7      0.77      0.77    0.62      0.62 3.3   0.0026
## 
##  Item statistics 
##                          n raw.r std.r r.cor r.drop mean  sd
## choice_of_clothing_4 29884  0.90  0.90  0.85   0.77  3.1 1.4
## choice_of_clothing_6 29883  0.84  0.83  0.68   0.63  3.7 1.4
## choice_of_clothing_7 29881  0.88  0.88  0.80   0.72  2.5 1.4
## 
## Non missing response frequency for each item
##                         1    2    3    4    5    6 miss
## choice_of_clothing_4 0.19 0.14 0.23 0.27 0.13 0.04 0.03
## choice_of_clothing_6 0.12 0.07 0.16 0.35 0.22 0.08 0.03
## choice_of_clothing_7 0.35 0.17 0.23 0.16 0.07 0.02 0.03</code></pre>
<pre class="r"><code>tagebuch$sexy_clothes = rowMeans(tagebuch %&gt;% select(matches(&quot;choice_of_clothing_(4|6|7)&quot;)) , na.rm = T)
tagebuch$showy_clothes = tagebuch$choice_of_clothing_8

tagebuch$sexual_intercourse_1_6scale = tagebuch$sexual_intercourse_1/5*6
tagebuch %&gt;% select(sexual_intercourse_1_6scale, desirability_partner, attention_2) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.86      0.87    0.82      0.69 6.6 0.0013  3.6 1.4
## 
##  lower alpha upper     95% confidence boundaries
## 0.86 0.86 0.87 
## 
##  Reliability if an item is dropped:
##                             raw_alpha std.alpha G6(smc) average_r S/N alpha se
## sexual_intercourse_1_6scale      0.81      0.82    0.69      0.69 4.5   0.0021
## desirability_partner             0.79      0.80    0.66      0.66 3.9   0.0023
## attention_2                      0.83      0.83    0.71      0.71 4.8   0.0020
## 
##  Item statistics 
##                                 n raw.r std.r r.cor r.drop mean  sd
## sexual_intercourse_1_6scale 29902  0.88  0.89  0.80   0.74  3.7 1.5
## desirability_partner        29879  0.89  0.90  0.82   0.77  3.8 1.5
## attention_2                 29874  0.90  0.88  0.79   0.73  3.3 1.8</code></pre>
<pre class="r"><code>tagebuch$in_pair_desire = rowMeans(tagebuch %&gt;% select(sexual_intercourse_1_6scale, desirability_partner, attention_2))

tagebuch %&gt;% select(male_jealousy_2, male_mate_retention_1, male_mate_retention_2, male_attention_1) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N    ase mean  sd
##       0.49      0.48    0.44      0.18 0.91 0.0044  2.8 1.1
## 
##  lower alpha upper     95% confidence boundaries
## 0.48 0.49 0.5 
## 
##  Reliability if an item is dropped:
##                       raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## male_jealousy_2            0.51      0.50    0.43      0.25 1.00   0.0048
## male_mate_retention_1      0.47      0.43    0.38      0.20 0.74   0.0044
## male_mate_retention_2      0.31      0.35    0.26      0.15 0.53   0.0064
## male_attention_1           0.32      0.33    0.26      0.14 0.50   0.0062
## 
##  Item statistics 
##                           n raw.r std.r r.cor r.drop mean   sd
## male_jealousy_2       29877  0.38  0.55  0.25   0.16  1.4 0.98
## male_mate_retention_1 29876  0.60  0.61  0.36   0.23  2.3 1.79
## male_mate_retention_2 29876  0.75  0.67  0.52   0.38  4.0 2.06
## male_attention_1      29874  0.72  0.67  0.53   0.38  3.5 1.84
## 
## Non missing response frequency for each item
##                          1    2    3    4    5    6 miss
## male_jealousy_2       0.83 0.06 0.04 0.04 0.01 0.01 0.03
## male_mate_retention_1 0.59 0.06 0.07 0.12 0.07 0.10 0.03
## male_mate_retention_2 0.25 0.04 0.07 0.12 0.12 0.40 0.03
## male_attention_1      0.24 0.09 0.13 0.18 0.16 0.20 0.03</code></pre>
<pre class="r"><code>tagebuch$partner_mate_retention = rowMeans(tagebuch %&gt;% select(male_jealousy_2, male_mate_retention_1, male_mate_retention_2, male_attention_1))

tagebuch %&gt;% select(mate_retention_3, mate_retention_4, mate_retention_5, mate_retention_6, attention_1) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd
##       0.71      0.71    0.69      0.33 2.4 0.0024  3.1 1.1
## 
##  lower alpha upper     95% confidence boundaries
## 0.71 0.71 0.72 
## 
##  Reliability if an item is dropped:
##                  raw_alpha std.alpha G6(smc) average_r S/N alpha se
## mate_retention_3      0.66      0.65    0.62      0.31 1.8   0.0030
## mate_retention_4      0.65      0.64    0.59      0.30 1.7   0.0031
## mate_retention_5      0.75      0.75    0.70      0.43 3.0   0.0023
## mate_retention_6      0.65      0.64    0.61      0.31 1.8   0.0030
## attention_1           0.61      0.60    0.55      0.28 1.5   0.0034
## 
##  Item statistics 
##                      n raw.r std.r r.cor r.drop mean  sd
## mate_retention_3 29876  0.71  0.70  0.58   0.50  2.9 1.7
## mate_retention_4 29876  0.77  0.72  0.64   0.53  4.0 2.1
## mate_retention_5 29876  0.42  0.49  0.26   0.22  1.6 1.2
## mate_retention_6 29875  0.70  0.71  0.61   0.51  2.8 1.6
## attention_1      29874  0.78  0.77  0.73   0.62  4.3 1.5
## 
## Non missing response frequency for each item
##                     1    2    3    4    5    6 miss
## mate_retention_3 0.35 0.10 0.16 0.18 0.12 0.08 0.03
## mate_retention_4 0.25 0.04 0.07 0.12 0.12 0.39 0.03
## mate_retention_5 0.74 0.08 0.06 0.07 0.03 0.02 0.03
## mate_retention_6 0.32 0.13 0.19 0.20 0.10 0.05 0.03
## attention_1      0.10 0.05 0.10 0.26 0.24 0.25 0.03</code></pre>
<pre class="r"><code>tagebuch$female_mate_retention = rowMeans(tagebuch %&gt;% select(mate_retention_3, mate_retention_4, mate_retention_5, mate_retention_6, attention_1), na.rm = T)
cor.test(tagebuch$female_mate_retention, tagebuch$in_pair_desire)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  tagebuch$female_mate_retention and tagebuch$in_pair_desire
## t = 140, df = 30000, p-value &lt;2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.6226 0.6363
## sample estimates:
##    cor 
## 0.6295</code></pre>
<pre class="r"><code>tagebuch %&gt;% select(jealousy_1, male_jealousy_1, male_jealousy_3) %&gt;% alpha()</code></pre>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = data.frame(x))
## 
##   raw_alpha std.alpha G6(smc) average_r  S/N    ase mean   sd
##       0.35      0.46    0.37      0.22 0.85 0.0055  1.7 0.83
## 
##  lower alpha upper     95% confidence boundaries
## 0.34 0.35 0.36 
## 
##  Reliability if an item is dropped:
##                 raw_alpha std.alpha G6(smc) average_r  S/N alpha se
## jealousy_1           0.48      0.50    0.33      0.33 1.00   0.0055
## male_jealousy_1      0.18      0.26    0.15      0.15 0.35   0.0061
## male_jealousy_3      0.26      0.30    0.18      0.18 0.44   0.0069
## 
##  Item statistics 
##                     n raw.r std.r r.cor r.drop mean   sd
## jealousy_1      29877  0.85  0.64  0.29   0.20  2.4 1.83
## male_jealousy_1 29876  0.61  0.73  0.50   0.27  1.4 0.96
## male_jealousy_3 29876  0.51  0.71  0.48   0.27  1.2 0.68
## 
## Non missing response frequency for each item
##                    1    2    3    4    5    6 miss
## jealousy_1      0.56 0.06 0.07 0.12 0.08 0.10 0.03
## male_jealousy_1 0.82 0.07 0.05 0.04 0.01 0.01 0.03
## male_jealousy_3 0.92 0.04 0.02 0.01 0.01 0.01 0.03</code></pre>
<pre class="r"><code>tagebuch$female_jealousy = rowMeans(tagebuch %&gt;% select(jealousy_1, male_jealousy_1, male_jealousy_3), na.rm = T)

tagebuch %&gt;% select(in_pair_desire, female_jealousy, female_mate_retention, partner_mate_retention) %&gt;% cor(use=&#39;na.or.complete&#39;) %&gt;% round(2)</code></pre>
<pre><code>##                        in_pair_desire female_jealousy female_mate_retention partner_mate_retention
## in_pair_desire                   1.00            0.15                  0.63                   0.57
## female_jealousy                  0.15            1.00                  0.22                   0.46
## female_mate_retention            0.63            0.22                  1.00                   0.70
## partner_mate_retention           0.57            0.46                  0.70                   1.00</code></pre>
</div>
<div id="clean-up-some-of-our-more-messy-items" class="section level3">
<h3>clean up some of our more messy items</h3>
<pre class="r"><code>xsection$has_not_had_sex_yet = ifelse(xsection$first_time == 999, 1, 0)
xsection$first_time = ifelse(xsection$first_time == 999 | xsection$first_time &lt; 8, NA_real_, xsection$first_time)

xsection[menarche == 1, menarche := NA_real_] # unlikely
xsection[age &lt; first_time, has_not_had_sex_yet := 1] # one person, presumably entered this info before we told people how to indicate that they have not had sex
xsection[age &lt; first_time, first_time := NA_real_]
xsection$trying_to_get_pregnant = ifelse(xsection$wish_for_child == 2, &quot;no&quot;, &quot;yes&quot;)
xsection$had_sex_with_partner_yet = ifelse(xsection$sexual_intercourse_partner == 2, &quot;no&quot;, &quot;yes&quot;)
###Ttigkeit_Cleaning
# Die Gruppen &quot;Auszubildende&quot; hat ein Leerzeichen in der Gruppenbezeichnung
xsection[occupation == &quot;Auszubildende &quot;, occupation := &quot;Auszubildende&quot; ]
xsection[ , occupation_clean := occupation]
xsection[ occupation %in% c(&#39;Angestellte&#39;,&#39;Beamtin&#39;,&#39;berufsttig&#39;), occupation_clean := &#39;Berufsttig&#39;]
xsection[ occupation %in% c(&#39;Student (Chemie)&#39;,&#39;Examenskandidatin/Studentin&#39;), occupation_clean := &#39;Studentin&#39;]
xsection[ occupation %in% c(&#39;wie &quot;was&quot;? Erwerbsstatus? &#39;,&#39;In Bezug worauf?&#39;,&#39;ein Einhorn&#39;, &#39;glcklich&#39;, &#39;Mensch&#39;), occupation_clean := NA]
(common1 = count(xsection, vars = occupation_clean))</code></pre>
<pre><code>## Source: local data table [8 x 2]
## 
## # A tibble: 8 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code>#Religion_Cleaning
xsection[ , religion_clean := religion]
xsection[ religion %in% c(&#39;katholisch&#39;,&#39;Evangelisch&#39;,&#39;evangelisch&#39;, &#39;katholisch &#39;), religion_clean := &#39;Christentum&#39;]
xsection[ religion %in% c(&#39;Atheist&#39;,&#39;keine&#39;,&#39;Atheismus&#39;, &#39;nicht organisiert glubig&#39;, &#39;nichts&#39;, &#39;gar keiner&#39;, &#39;keiner&#39;), religion_clean := &#39;Nicht glubig&#39;]
xsection[ religion %in% c(&#39;agnostisch&#39;,&#39;Agnostizismus&#39;,&#39;evangelisch - buddhistisch&#39;), religion_clean := NA]
(common2 = count(xsection, vars = religion_clean))</code></pre>
<pre><code>## Source: local data table [7 x 2]
## 
## # A tibble: 7 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code>#Beziehungsstatus_Cleaning
xsection[ , relationship_status_clean := relationship_status]
xsection[ relationship_status %in% c(&#39;feste Beziehung, es kriselt ein wenig&#39;,&#39;vergeben&#39;,&#39;in einer festen Partnerschaft&#39;, &#39;feste Partnerschaft&#39;, &#39;Partnerschaft (nicht verheiratet)&#39;, &#39;in einer Beziehung&#39;, &#39;feste Beziehung&#39;, &#39;Fernbeziehung&#39;, &#39;Beziehung&#39;, &#39;Freundin&#39;, &#39;offen&#39;, &#39;frisch verliebt&#39;, &#39;es ist kriselt&#39;), relationship_status_clean := &#39;Partnerschaft&#39;]
xsection[ relationship_status %in% c(&#39;verheiratet&#39;), relationship_status_clean := &#39;Verheiratet&#39;]
(common3 = count(xsection, vars = relationship_status_clean))</code></pre>
<pre><code>## Source: local data table [3 x 2]
## 
## # A tibble: 3 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code># Verhtungsmethode beim Kennenlernen_Cleaning
xsection[ , method_meeting_clean := method_meeting]
xsection[ method_meeting %in% c(&#39;pille&#39;, &#39;pille, wie bereits 30 mal gesagt&#39;), method_meeting_clean := &#39;Pille&#39;]
xsection[ method_meeting %in% c(&#39;diese&#39;), method_meeting_clean := NA]
(common4 = count(xsection, vars = method_meeting_clean))</code></pre>
<pre><code>## Source: local data table [7 x 2]
## 
## # A tibble: 7 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code>xsection[age &lt; 10+ duration_relationship_total/12, list(age, duration_relationship_total/12, duration_relationship_years, duration_relationship_months)]
xsection[age &lt; 10+ duration_relationship_total/12, duration_relationship_total := NA]
qplot(as.numeric(xsection$ended.vorab - xsection$created.vorab),binwidth=1) + xlim(0,120)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/cleaning%20up%20some%20messy%20items-1.png" width="672" /></p>
<pre class="r"><code>qplot(as.numeric(xsection$ended.vorab - xsection$created.vorab)) + xlim(0,NA)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/cleaning%20up%20some%20messy%20items-2.png" width="672" /></p>
<pre class="r"><code>#Verhtung
count(xsection, vars=contraception) %&gt;% arrange(desc(n)) %&gt;% head(15)</code></pre>
<pre><code>## Source: local data table [15 x 2]
## 
## # A tibble: 15 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code>contrabroad = count(xsection, vars=contraception) %&gt;% arrange(desc(n))

## Transformation of contraceptive methods into broader categories

xsection[ contraception == &quot;none, contraceptive_pill, morning_after_pill, other_hormonal, infertile, partner_infertile, intrauterine_pessar, kalendermethode, coitus_interruptus, spermicide&quot;, contraception := NA] # this one simply clicked everything
xsection$contraceptives_broad_categories = xsection$contraception
xsection[contraceptives_broad_categories %in% contrabroad[contrabroad$n &lt;= 10, ]$vars, contraceptives_broad_categories := &quot;other&quot;]
xsection[ contraception %contains% &quot;temperature_billings&quot;, contraceptives_broad_categories := &quot;counting_and_or_temperature_methods&quot;]
xsection[ contraception %contains% &quot;kalendermethode&quot;, contraceptives_broad_categories := &quot;counting_and_or_temperature_methods&quot;]
xsection[ contraception %contains% &quot;computer&quot;, contraceptives_broad_categories := &quot;counting_and_or_temperature_methods&quot;]
xsection[ contraception %contains% &quot;coitus_interruptus&quot;, contraceptives_broad_categories := &quot;occasionally_use_coitus_interruptus&quot;]
(contrabroad = count(xsection, vars=contraceptives_broad_categories) %&gt;% arrange(desc(n)))</code></pre>
<pre><code>## Source: local data table [11 x 2]
## 
## # A tibble: 11 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code># Contraception Categories &quot;barrier or abstinence&quot; vs &quot;fertility awareness&quot; vs &quot;hormonal&quot;
xsection[, contraceptive_method := NA_character_]
xsection[ contraception %contains% &quot;condoms&quot; |  contraception %contains% &quot;intrauterine_pessar&quot; |  contraception %contains% &quot;partner_sterilised&quot;|  contraception %contains% &quot;partner_infertile&quot; | contraception  %contains% &quot;coitus_interruptus&quot; | (contraception == &quot;none&quot; &amp; had_sex_with_partner_yet == &quot;no&quot;), contraceptive_method := &quot;barrier_or_abstinence&quot;]
xsection[ contraception %contains% &quot;temperature_billings&quot; | contraception %contains% &quot;kalendermethode&quot; |  contraception %contains% &quot;computer&quot;, contraceptive_method := &quot;fertility_awareness&quot;]
xsection[ contraception %contains% &quot;contraceptive_pill&quot; | contraception %contains% &quot;other_hormonal&quot;, contraceptive_method := &quot;hormonal&quot;]
xsection[ contraception == &quot;none&quot;, contraceptive_method := &quot;none&quot;]
xsection[ is.na(contraceptive_method), contraceptive_method := &quot;other&quot;]


xsection[, contraceptive_method_by_pearl := NA_character_]
xsection[ contraception %contains% &quot;temperature_billings&quot; | contraception %contains% &quot;kalendermethode&quot; |  contraception %contains% &quot;computer&quot;, contraceptive_method_by_pearl := &quot;fertility_awareness&quot;]
xsection[ contraception %contains% &quot;condoms&quot; |  contraception %contains% &quot;intrauterine_pessar&quot; |  contraception %contains% &quot;partner_sterilised&quot; |  contraception %contains% &quot;partner_infertile&quot; | (contraception == &quot;none&quot; &amp; had_sex_with_partner_yet == &quot;no&quot;), contraceptive_method_by_pearl := &quot;barrier_or_abstinence&quot;]
xsection[ is.na(contraceptive_method_by_pearl) &amp;  contraception  %contains% &quot;coitus_interruptus&quot; , contraceptive_method_by_pearl := &quot;barrier_or_abstinence&quot;]
xsection[ contraception %contains% &quot;contraceptive_pill&quot; | contraception %contains% &quot;other_hormonal&quot;, contraceptive_method_by_pearl := &quot;hormonal&quot;]
xsection[ contraception == &quot;none&quot;, contraceptive_method_by_pearl := &quot;none&quot;]
xsection[ is.na(contraceptive_method_by_pearl), contraceptive_method_by_pearl := &quot;other&quot;]

(count(xsection[contraceptive_method == &quot;other&quot;, ], vars=contraception) %&gt;% arrange(desc(n)) %&gt;% data.frame())</code></pre>
<pre><code>##                        vars n
## 1                    andere 8
## 2                sterilised 7
## 3                           2
## 4                 infertile 2
## 5              none, andere 2
## 6           none, infertile 1
## 7          none, sterilised 1
## 8  none, morning_after_pill 1
## 9     infertile, sterilised 1
## 10       morning_after_pill 1
## 11                     &lt;NA&gt; 1</code></pre>
<pre class="r"><code>(contramethod = count(xsection, vars=contraceptive_method) %&gt;% arrange(desc(n)) %&gt;% data.frame())</code></pre>
<pre><code>##                    vars   n
## 1              hormonal 693
## 2 barrier_or_abstinence 329
## 3                  none  98
## 4   fertility_awareness  61
## 5                 other  27</code></pre>
<pre class="r"><code>crosstabs(~ contraceptive_method, data = xsection)</code></pre>
<pre><code>## contraceptive_method
## barrier_or_abstinence   fertility_awareness              hormonal                  none                 other 
##                   329                    61                   693                    98                    27</code></pre>
<pre class="r"><code>xsection[contraceptive_method == &quot;other&quot;,list(contraception, had_sex_with_partner_yet == &quot;yes&quot;, age, occupation, wish_for_child==1, breast_feeding==1, pregnant==1)] %&gt;% na.omit()%&gt;% pander()</code></pre>
<table style="width:94%;">
<colgroup>
<col width="34%" />
<col width="8%" />
<col width="8%" />
<col width="18%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">contraception</th>
<th align="center">V2</th>
<th align="center">age</th>
<th align="center">occupation</th>
<th align="center">V5</th>
<th align="center">V6</th>
<th align="center">V7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"></td>
<td align="center">TRUE</td>
<td align="center">23</td>
<td align="center">Studentin</td>
<td align="center">TRUE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">andere</td>
<td align="center">TRUE</td>
<td align="center">28</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">36</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">andere</td>
<td align="center">FALSE</td>
<td align="center">24</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">andere</td>
<td align="center">TRUE</td>
<td align="center">23</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">andere</td>
<td align="center">FALSE</td>
<td align="center">23</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">andere</td>
<td align="center">TRUE</td>
<td align="center">58</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">37</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">none, infertile</td>
<td align="center">TRUE</td>
<td align="center">25</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">48</td>
<td align="center">Hausfrau</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">andere</td>
<td align="center">TRUE</td>
<td align="center">41</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">infertile</td>
<td align="center">TRUE</td>
<td align="center">57</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">none, sterilised</td>
<td align="center">TRUE</td>
<td align="center">53</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">50</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">none, andere</td>
<td align="center">TRUE</td>
<td align="center">26</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">andere</td>
<td align="center">TRUE</td>
<td align="center">28</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
<td align="center">TRUE</td>
</tr>
<tr class="odd">
<td align="center">none, morning_after_pill</td>
<td align="center">TRUE</td>
<td align="center">28</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">53</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">andere</td>
<td align="center">FALSE</td>
<td align="center">19</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">49</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">none, andere</td>
<td align="center">TRUE</td>
<td align="center">25</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">TRUE</td>
</tr>
<tr class="even">
<td align="center">infertile, sterilised</td>
<td align="center">TRUE</td>
<td align="center">49</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">infertile</td>
<td align="center">TRUE</td>
<td align="center">46</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center">morning_after_pill</td>
<td align="center">FALSE</td>
<td align="center">21</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="odd">
<td align="center">sterilised</td>
<td align="center">TRUE</td>
<td align="center">50</td>
<td align="center">Berufsttig</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center">TRUE</td>
<td align="center">22</td>
<td align="center">Studentin</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
<td align="center">FALSE</td>
</tr>
</tbody>
</table>
<pre class="r"><code>(contramethod = count(xsection, vars = contraceptive_method) %&gt;% arrange(desc(n)) %&gt;% data.frame())</code></pre>
<pre><code>##                    vars   n
## 1              hormonal 693
## 2 barrier_or_abstinence 329
## 3                  none  98
## 4   fertility_awareness  61
## 5                 other  27</code></pre>
<pre class="r"><code>##Transformation of contraceptive methods into natural and artifical categories
# Hier mssen wir nochmal schauen, in welcher Reihenfolge wir das machen wollen. Im Moment werden - glaube ich? - die letzten Befehle als wichtigstes Kriterium eingeschtzt.
xsection$contraceptives_categories_natural = xsection$contraception
xsection[ contraception == &quot;&quot;, contraceptives_categories_natural := NA_character_]
xsection[ contraception %contains% &quot;none&quot;, contraceptives_categories_natural := &quot;none&quot;]
xsection[ contraception %contains% &quot;condoms&quot;, contraceptives_categories_natural := &quot;artifical&quot;]
xsection[ contraception %contains% &quot;contraceptive_pill&quot;, contraceptives_categories_natural := &quot;artifical&quot;]
xsection[ contraception %contains% &quot;other_hormonal&quot;, contraceptives_categories_natural := &quot;artifical&quot;]
xsection[ contraception %contains% &quot;intrauterine_pessar&quot;, contraceptives_categories_natural := &quot;artifical&quot;]
xsection[ contraception %contains% &quot;morning_after_pill&quot;, contraceptives_categories_natural := &quot;artifical&quot;]
xsection[ contraception %contains% &quot;coitus_interruptus&quot;, contraceptives_categories_natural := &quot;natural&quot;]
xsection[ contraception %contains% &quot;kalendermethode&quot;, contraceptives_categories_natural := &quot;natural&quot;]
xsection[ contraception %contains% &quot;computer&quot;, contraceptives_categories_natural := &quot;natural&quot;]
xsection[ contraception %contains% &quot;temperature_billings&quot;, contraceptives_categories_natural := &quot;natural&quot;]
xsection[ contraception %contains% &quot;sterilised&quot;, contraceptives_categories_natural := NA_character_]
xsection[ contraception %contains% &quot;andere&quot;, contraceptives_categories_natural := NA_character_]
xsection[ contraception %contains% &quot;partner_sterilised&quot;, contraceptives_categories_natural := NA_character_]
(contrabroadnatural = count(xsection, vars=contraceptives_categories_natural) %&gt;% arrange(desc(n)))</code></pre>
<pre><code>## Source: local data table [6 x 2]
## 
## # A tibble: 6 x 2
## # ... with 2 variables: vars &lt;chr&gt;, n &lt;int&gt;</code></pre>
<pre class="r"><code>## Transformation of number of children (combined into: &quot;children&quot; and &quot;no children&quot;)
xsection$children_broad_categories = xsection$children
xsection[ children == &quot;&quot;, children_broad_categories := &#39;no_children&#39;]
xsection[ children %contains% 1, children_broad_categories := &quot;children&quot;]
xsection[ children %contains% 2, children_broad_categories := &quot;children&quot;]
xsection[ children %contains% 3, children_broad_categories := &quot;children&quot;]
xsection[ children %contains% 4, children_broad_categories := &quot;children&quot;]
xsection[ children %contains% 5, children_broad_categories := &quot;no_children&quot;]
summary(xsection$children_broad_categories)</code></pre>
<pre><code>##    Length     Class      Mode 
##      1208 character character</code></pre>
<pre class="r"><code>## Attractiveness_finance
xsection$attractiveness_finance = (xsection$attractiveness_finance_1 + xsection$attractiveness_finance_2)/2</code></pre>
</div>
<div id="last-cleaning-steps" class="section level3">
<h3>last cleaning steps</h3>
<p>give proper variable labels for plots etc.</p>
<pre class="r"><code>xsection$breast_feeding_in_last_3_months = ifelse(xsection$breast_feeding == 2, &quot;no&quot;, &quot;yes&quot;)
xsection$pregnant_in_last_3_months = ifelse(xsection$pregnant == 2, &quot;no&quot;, &quot;yes&quot;)
xsection$hormonal_medication_in_last_3_months = ifelse(xsection$antibiotics == 2, &quot;no&quot;, &quot;yes&quot;)
xsection$pill_in_last_3_months = ifelse(xsection$pille_control == 2, &quot;no&quot;, &quot;yes&quot;)
childrenrecode = c(&quot;1&quot; = &quot;Biological children&quot;, &quot;2&quot; = &quot;Adopted children&quot;, &quot;3&quot; = &quot;Step children&quot;, &quot;4&quot; = &quot;Foster children&quot;, &quot;5&quot; = &quot;No children&quot;)
# xsection$children_categories = str_replace_all(xsection$children, childrenrecode)
xsection$children_narrow_categories = childrenrecode[xsection$children]
xsection$children_narrow_categories[is.na(xsection$children_narrow_categories)] = &quot;Complex family&quot;
xsection$children_narrow_categories[xsection$children == &quot;&quot;] = &quot;No children&quot;
incomebrackets = c(&quot;1&quot; = &quot;&lt; 500&quot;, &quot;2&quot; = &quot;500-1000&quot;, &quot;3&quot; = &quot;1000-2000&quot;, &quot;4&quot; = &quot;2000-3000&quot;, &quot;5&quot; = &quot;&gt; 3000&quot;)
# xsection$children_categories = str_replace_all(xsection$children, childrenrecode)
xsection$income = recode_ordered(incomebrackets, xsection$attractiveness_finance_self)
xsection$income_partner = incomebrackets[xsection$attractiveness_finance_2]
cohabitation = c(&quot;1&quot; = &quot;Long-distance&quot;, &quot;2&quot; = &quot;Live in same city&quot;, &quot;3&quot; = &quot;Live in same apartment&quot;)
xsection$cohabitation = cohabitation[xsection$long_distance_relationship]
living_situation = c(&quot;1&quot; = &quot;living alone&quot;, &quot;2&quot; = &quot;living in flatshare&quot;)
xsection$living_situation = living_situation[xsection$situation_of_living]
xsection$living_situation = ifelse(xsection$long_distance_relationship == 3, &quot;living with partner&quot;, xsection$living_situation)
xsection$living_situation = ifelse(xsection$living_situation == &#39;living in flatshare&#39;, ifelse(xsection$flat_share == 1, &#39;living in all-female flatshare&#39;, &#39;living in mixed-sex flatshare&#39;), xsection$living_situation)
days_with_partner_per_month = c(&quot;1&quot; = &#39;&lt; 3 days&#39;, &#39;2&#39; = &#39;3-5 days&#39;, &#39;3&#39; = &#39;5-7 days&#39;, &#39;4&#39; = &#39;7-14 days&#39;, &#39;5&#39; =  &#39;&gt; 14 days&#39;)
xsection$days_with_partner_per_month = recode_ordered(days_with_partner_per_month, xsection$long_distance_relationship_2)
distance_to_partner_hours = c(&quot;1&quot; = &#39;&lt; 1h&#39;, &#39;2&#39; =   &#39;1-2h&#39;, &#39;3&#39; = &#39;2-3h&#39;, &#39;4&#39;   = &#39;3-5h&#39;, &#39;5&#39; = &#39;5-9h&#39;, &#39;6&#39; = &#39;9-12h&#39;, &#39;7&#39; = &#39;&gt;12h&#39;)
xsection$distance_to_partner_hours = recode_ordered(distance_to_partner_hours, xsection$distance_partner)
days_with_partner = c(&#39;1&#39; = &#39;&lt; 3 days&#39;, &#39;2&#39; = &#39;3-5 days&#39;, &#39;3&#39; = &#39;7 days&#39;) # forgot 6...
nights_with_partner = c(&#39;1&#39; = &#39;&lt; 3 nights&#39;, &#39;2&#39; = &#39;3-5 nights&#39;, &#39;3&#39; = &#39;7 nights&#39;)
xsection$days_with_partner = recode_ordered(days_with_partner, xsection$days_with_partner)
xsection$nights_with_partner = recode_ordered(nights_with_partner, xsection$nights_with_partner)
xsection$duration_relationship_years = xsection$duration_relationship_total/12
xsection$cycle_length = xsection$cyklus_3
xsection$cycle_length_groups = cut(xsection$cycle_length, breaks = c(19,25,30,35,41))
xsection$certainty_menstruation = factor(round(rowMeans(xsection[, list(cyklus_2, cyklus_4, cyklus_6)])))
xsection$cycle_regularity = factor(xsection$cyklus_5, levels = 1:3, labels = c(&quot;very regular,\nup to 2 days off&quot;, &quot;slightly irregular,\nup to 5 days off&quot;, &quot;irregular,\nmore than 5 days off&quot;))

xsection$sexual_intercourse_partner = NULL
xsection$wish_for_child = NULL</code></pre>
</div>
</div>
<div id="merge-diary-data-with-cross-sectional-data" class="section level2">
<h2>Merge diary data with cross-sectional data</h2>
<pre class="r"><code>prev_names = names(xsection)
stopifnot(sum(duplicated(xsection$session)) == 0)
diary = merge(xsection, tagebuch, by = &quot;session&quot;, all.x = T)
diary = setDF(diary)
table(is.na(diary$created.vorab))</code></pre>
<pre><code>## 
## FALSE 
## 30956</code></pre>
<pre class="r"><code># diary[is.na(created.vorab),list(session, choice_of_clothing_2, created.vorab, created.abschluss)]
crosstabs(as.Date(diary$created) == as.Date(diary$created - dhours(9))) # we can left shift dates by 7 hours, because even though were supposed to start filling out before midnight, bugs in our survey software sometimes led to the invitations being sent a little and rarely a lot late)</code></pre>
<pre><code>## as.Date(diary$created) == as.Date(diary$created - dhours(9))
## FALSE  TRUE  &lt;NA&gt; 
##   188 30736    32</code></pre>
<pre class="r"><code>diary = diary %&gt;% filter(!is.na(created.vorab))

diary$weekend = factor(weekdays(  diary$created) %in% c(&quot;Friday&quot;,&quot;Saturday&quot;,&quot;Sunday&quot;))
diary$weekday = factor(weekdays(  diary$created) , levels = c(&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;,&quot;Sunday&quot;))
diary$first_day = ave(diary$created_date, diary$session, FUN = min)
diary$day_number = as.integer(round(as.numeric(diary$created_date - diary$first_day, units = &quot;days&quot;)))
combos = diary %&gt;% select(session, day_number)
combos$sess_day = paste(combos$session, combos$day_number)
table(duplicated(combos$sess_day))</code></pre>
<pre><code>## 
## FALSE 
## 30956</code></pre>
<pre class="r"><code># head(combos)
diary$spent_night_with_partner = ifelse(diary$mate_retention_1 == 1, 1, 0)
diary$in_pair_public_intimacy = ifelse(diary$mate_retention_2 != 3, 1, 0)
diary2 = diary</code></pre>
</div>
<div id="compute-menstrual-onsets" class="section level2">
<h2>Compute menstrual onsets</h2>
<p>To compute menstrual onsets from the diary data, we have to clear a few hurdles:</p>
<ul>
<li>diaries could be filled out until 3 am (and later in some special cases), but participants will tend to count backwards from the preceding day when asked when the last menstruation occurred</li>
<li>women could report the same menstrual onset several times (-&gt; use the report closest to the onset, more accurate)</li>
<li>women reported a last menstrual onset in survey preceding the diary and in the follow-up survey following the diary</li>
<li>we need to count backward and forward from each menstrual onset</li>
<li>we need to include the dates from the demographic and the follow-up questionnaire without overwriting more pertinent dates from the diary</li>
<li>we want to bridge gaps between reports of menstruation that are at most 40 days wide (because wider gaps probably mean that there was something going on with the menstrual cycle such as a miscarriage, menopause, etc.), but non-reports mean that we cannot use the heuristic that gaps between rows are gaps between days (as days are missing from the diary)</li>
</ul>
<p>Therefore we use a multi-step procedure:</p>
<ol style="list-style-type: decimal">
<li>Collect unique menstrual onsets reported by each woman</li>
<li>Expand the onsets into time-series by participant.</li>
<li>Merge/prefer reports closer to the onset when several different reports were made</li>
<li>Count forward &amp; backward.</li>
<li>Merge on participant &amp; created_date.</li>
</ol>
<pre class="r"><code>diary = diary2
diary = diary %&gt;% setDF %&gt;% group_by(session) %&gt;%  
  mutate(
      menstruation_dates = created_date,  # get dates
      menstruation_dates = if_else(menstruation_1 == 2 | is.na(menstruation_1), as.Date(NA), menstruation_dates),  # set to missing one dates where no menstruation was reported
      days = length(unique(created_date)),
      day_count = seq_along(created),
      first_diary_date = min(created_date),
      last_diary_date = max(created_date),
      timespan = as.numeric( last_diary_date - first_diary_date ),
# diary[, timespan := ave(x= created_num, session, FUN = function(x) { round((max(x,na.rm=T)-min(x,na.rm=T))/(24*3600)) } )]
      days_responded_percentage = ifelse( timespan==0, NA_real_, days/timespan),
      sufficient_diary_coverage = days &gt;= 30 &amp; days_responded_percentage &gt; 0.5,
      last_menstruation = if_else(all(is.na(menstruation_dates)), as.Date(NA), max(menstruation_dates, na.rm=T)),
      last_lag = ifelse(is.na(last_menstruation), NA_real_, as.numeric(last_diary_date - last_menstruation))  # how many days after their last observed menstruation did they last fill out the diary
  ) %&gt;% data.table()

crosstabs(diary$menstruation_2)</code></pre>
<pre><code>## diary$menstruation_2
##     1     2     3     4     5     6  &lt;NA&gt; 
##   781   897   824   800   766   726 26162</code></pre>
<pre class="r"><code>diary[, days_since_menstrual_onset := ifelse(menstruation_2 == 6, NA_real_, menstruation_2 - 1 )] # the way we collected this variable, we have to set &quot;more than 4 days ago&quot; to missing, because it&#39;s unspecific
diary[, menstrual_onset_date_inferred := created_date - ddays(days_since_menstrual_onset)] ### count back from each current diary day, to create a menstrual onset date
crosstabs(is.na(diary$menstrual_onset_date_inferred))</code></pre>
<pre><code>## is.na(diary$menstrual_onset_date_inferred)
## FALSE  TRUE 
##  4068 26888</code></pre>
<pre class="r"><code>### define a variable containing the number of days since the last menstruation as counted on the current diary day

# step 1
menstrual_onsets = diary %&gt;% setDF() %&gt;%
  group_by(session) %&gt;%
  arrange(created) %&gt;% 
  select(session, created_date, menstrual_onset_date_inferred)

followup_survey = nachbe %&gt;% setDF() %&gt;%
  mutate(
    menstrual_onset_date_inferred = if_else(menstrual_bleeding_1 == 1, as.Date(created), as.Date(menstrual_bleeding_2)),
    created_date = menstrual_onset_date_inferred) %&gt;%
  select(session, created_date, menstrual_onset_date_inferred)

pre_survey = vorab %&gt;% setDF() %&gt;%
  mutate(menstrual_onset_date_inferred = as.Date(cyklus_1),
         created_date = menstrual_onset_date_inferred) %&gt;%
  select(session, created_date, menstrual_onset_date_inferred)</code></pre>
<pre class="r"><code>mons = menstrual_onsets %&gt;% 
  select(session, created_date, menstrual_onset_date_inferred) %&gt;% 
   bind_rows(
      pre_survey, 
      followup_survey
     ) %&gt;% 
  filter( !is.na(menstrual_onset_date_inferred)) %&gt;%
  unique() %&gt;%
  group_by(session) %&gt;%
  arrange(session, created_date) %&gt;%
      # step 3: prefer reports closer to event if they conflict
  mutate(
    onset_diff = abs( as.double( lag(menstrual_onset_date_inferred) - menstrual_onset_date_inferred, units = &quot;days&quot;)), # was there a change in the reference menstrual onset
    onset_diff = if_else(onset_diff == 0, NA_real_, onset_diff, NA_real_), # we want to take the date that is freshest in memory. no switch is set to missing
    menstrual_onset_date_inferred = if_else(is.na(lag(menstrual_onset_date_inferred)), # if last date not known
         menstrual_onset_date_inferred, # use current date
         if_else(onset_diff &lt; 7, # if last date is known, but is slightly different from current date 
                 as.Date(NA), # attribute it to memory, not extremely short cycle, use fresher date
                 menstrual_onset_date_inferred, # if it&#39;s a big difference, use the current date 
                 as.Date(NA))), # if no date is assigned today, keep it like that
    
  menstrual_onset_date_inferred =  formr::repeat_last(menstrual_onset_date_inferred)) %&gt;%
  mutate(created_date = menstrual_onset_date_inferred) %&gt;%
  filter(!is.na(menstrual_onset_date_inferred)) %&gt;% 
  select(-onset_diff) %&gt;%
  unique()

avg_cycle_lengths = mons %&gt;% 
  select(session, menstrual_onset_date_inferred) %&gt;% 
  unique() %&gt;% 
  arrange(session, menstrual_onset_date_inferred) %&gt;% 
  mutate(
    number_of_cycles = n(),
    cycle_nr = row_number(),
    cycle_length_diary = as.double(lead(menstrual_onset_date_inferred) - menstrual_onset_date_inferred, units = &quot;days&quot;),
    mean_cycle_length_diary = mean(cycle_length_diary, na.rm = TRUE),
    median_cycle_length_diary = median(cycle_length_diary, na.rm = TRUE))

menstrual_onsets = menstrual_onsets %&gt;% select(session, created_date) %&gt;% 
  bind_rows(
    diary = ., 
    demo = pre_survey %&gt;% select(session, created_date), 
    followup = followup_survey %&gt;% select(session, created_date), 
    .id = &quot;date_origin&quot;) %&gt;%
  filter(!is.na(created_date)) %&gt;%
  unique() %&gt;%
  group_by(session) %&gt;%
  arrange(session, created_date) %&gt;%
  # step 2 expand into time-series for participant
  complete(created_date = full_seq(created_date, period = 1)) %&gt;%
  left_join(mons, by = c(&quot;session&quot;, &quot;created_date&quot;)) %&gt;%
  unique()

menstrual_onsets = menstrual_onsets %&gt;%
  group_by(session) %&gt;%
  mutate(
    # carry the last observation (the last observed menstrual onset) backward/forward (within person).
    # first we carry it backward (because reporting is retrospective)
    next_menstrual_onset = formr::repeat_last(menstrual_onset_date_inferred, forward = FALSE),
    # then we carry it forward
    last_menstrual_onset = formr::repeat_last(menstrual_onset_date_inferred),
    # calculate the diff to current date
    menstrual_onset_days_until = as.numeric(created_date - next_menstrual_onset),
    menstrual_onset_days_since = as.numeric(created_date - last_menstrual_onset)
)

# mons %&gt;% filter(session %contains% &quot;43a25b&quot;) %&gt;% View()
# menstrual_onsets %&gt;% filter(session %contains% &quot;43a25b&quot;) %&gt;% View()
# menstrual_onsets %&gt;% filter(session %starts_with% &quot;020f65ea45&quot;) %&gt;% View()

diary = diary %&gt;% 
  setDF() %&gt;%
  left_join(menstrual_onsets %&gt;% 
      select(session, created_date, next_menstrual_onset, last_menstrual_onset, menstrual_onset_days_until, menstrual_onset_days_since) %&gt;%
        unique() #  unique because some women reported the last menstrual date in the diary again in the followup
      ,
      by = c(&quot;session&quot;, &quot;created_date&quot;)
    ) %&gt;% 
  left_join(avg_cycle_lengths %&gt;% rename(last_menstrual_onset = menstrual_onset_date_inferred), by = c(&quot;session&quot;, &quot;last_menstrual_onset&quot;)) %&gt;%
  mutate(
        next_menstrual_onset_inferred = if_else(is.na(next_menstrual_onset),
                                    last_menstrual_onset + days(cyklus_3),
                                    next_menstrual_onset),
        RCD_inferred = as.numeric(created_date - next_menstrual_onset_inferred)
  ) %&gt;% 
  data.table()

diary[!duplicated(session) &amp; median_cycle_length_diary &lt;= 40 &amp; median_cycle_length_diary &gt;= 20, qplot(median_cycle_length_diary, cyklus_3) + geom_smooth()]</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r"><code>diary[!duplicated(session) &amp; median_cycle_length_diary &lt;= 40 &amp; median_cycle_length_diary &gt;= 20, lm(median_cycle_length_diary ~ cyklus_3)]</code></pre>
<pre><code>## 
## Call:
## lm(formula = median_cycle_length_diary ~ cyklus_3)
## 
## Coefficients:
## (Intercept)     cyklus_3  
##      20.681        0.287</code></pre>
<pre class="r"><code># diary %&gt;% filter(session %starts_with% &quot;020f65ea45&quot;) %&gt;% select(created_date, next_menstrual_onset, last_menstrual_onset, menstrual_onset_days_until, menstrual_onset_days_since) %&gt;% View()</code></pre>
<pre class="r"><code>xtabs(~ is.na(menstrual_onset_days_until) + is.na(menstrual_onset_days_since), diary)</code></pre>
<pre><code>##                                  is.na(menstrual_onset_days_since)
## is.na(menstrual_onset_days_until) FALSE  TRUE
##                             FALSE 18614     0
##                             TRUE  12310    32</code></pre>
<pre class="r"><code>diary = diary %&gt;%
  mutate(
        FCD = menstrual_onset_days_since + 1,
        RCD = menstrual_onset_days_until,
        RCD_for_merge = (RCD * -1) + 1,
        RCD_squished = if_else(
          cycle_length_diary - FCD &lt; 14,
          29 - (cycle_length_diary - FCD),
          round((FCD/ (cycle_length_diary - 14) ) * 15)),
        RCD_inferred = (RCD_inferred * -1) + 1,
# add 15 days to the reverse cycle days to arrive at the estimated day of ovulation
        RCD_rel_to_ovulation = RCD + 15
  )
crosstabs(diary$RCD_squished)</code></pre>
<pre><code>## diary$RCD_squished
##     0     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15    16    17 
##    74   426   444   382   437   458   467   310   547   488   534   509   641   574   663   643   606   612 
##    18    19    20    21    22    23    24    25    26    27    28    29  &lt;NA&gt; 
##   663   668   694   716   762   768   801   780   820   828   846   857 12938</code></pre>
<pre class="r"><code>crosstabs(diary$RCD_for_merge)</code></pre>
<pre><code>## diary$RCD_for_merge
##     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15    16    17    18 
##   934   857   846   828   820   780   801   768   759   715   693   667   661   609   601   582   563   542 
##    19    20    21    22    23    24    25    26    27    28    29    30    31    32    33    34    35    36 
##   529   499   477   449   419   401   370   342   305   252   159   119   100    77    65    49    49    44 
##    37    38    39    40    41    42    43    44    45    46    47    48    49    50    51    52    53    54 
##    37    34    24    33    28    31    32    25    27    24    17    19    14    21    20    18    12    16 
##    55    56    57    58    59    60    61    62    63    64    65    66    67    68    69    70    71    72 
##    15    10    13     8    10     9     9    11     7     8     4     5     8     8     7     8    10     9 
##    73    74    75    76    77    78    79    80    81    82    83    84    85    86    87    88    89    90 
##     9     7     9     8     7     5     9     4     5     3     4     2     2     6     6     5     3     2 
##    91    92    93    94    95    96    97    98    99   100   101   102   103   104   105   106   107   108 
##     5     3     5     3     4     4     3     2     3     2     5     3     6     5     2     1     2     1 
##   109   112   113   114   115   117   118   120   121   122   123   124   125   126   127   128   129   130 
##     3     1     2     1     2     1     1     2     1     2     1     1     1     2     1     1     2     2 
##   131   132   133   134   135   136   137   138   139   140   141   142   143   144   145   150   151   155 
##     2     1     2     3     1     2     2     2     1     1     1     1     2     2     2     1     1     1 
##   156   157   158   159   161   163   164   166   167   168   170   171   174   175   178   179   182   183 
##     1     1     2     2     1     1     1     1     1     1     1     1     2     1     1     1     1     1 
##   186   187   189   190   191   192   193   194   195   196   197   198   199   200   201   203   205   208 
##     2     1     2     1     1     1     1     1     1     1     2     2     1     1     1     1     1     1 
##   209   210   211   218   224   227   242   248   249   250   251   252   253   265   282   300   301   302 
##     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1 
##   315   317   318   319   323   344   347   348   349   350   351   352   353   354   355   356   357   358 
##     1     1     1     1     1     1     1     1     1     1     2     1     1     1     1     1     1     1 
##   359   360  &lt;NA&gt; 
##     1     1 12342</code></pre>
<pre class="r"><code>crosstabs(diary$FCD)</code></pre>
<pre><code>## diary$FCD
##    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22 
##  934  951  928  978 1003  951  938  978  957  960  939  939  936  948  923  899  933  883  896  924  882  872 
##   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44 
##  861  849  812  743  723  644  415  271  215  195  172  150  142  140  116  101   97   90   92   85   91   82 
##   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66 
##   91   82   77   84   80   70   64   58   63   65   56   54   38   45   41   36   47   49   75   77   74   73 
##   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88 
##   63   67   63   65   51   51   58   50   49   56   49   45   52   43   44   38   42   36   36   40   34   33 
##   89   90   91   92   93   94   95   96   97   98   99  100  101  102  103  104  105  106  107  108  109  110 
##   35   32   28   31   31   32   30   26   27   21   26   26   21   21   14   19   13    8    8   10    8    9 
##  111  112  113  114  115  116  117  118  119  120  121  122  123  124  125  126  127  128  129  130  131  132 
##    4    6    4    5    5    4    6   10    6    6    5    2    1    2    6    4    4    2    7    3    5    3 
##  133  134  135  136  137  138  139  140  141  142  143  144  145  146  147  148  149  150  151  152  153  154 
##    8    2    3    2    4    2    4    3    6    3    3    2    4    5    2    2    2    1    1    2    2    2 
##  155  156  157  158  159  160  161  162  163  164  165  166  167  168  169  170  171  172  173  174  175  176 
##    2    2    4    5    2    1    3    4    3    4    1    3    1    2    3    2    1    2    1    4    2    2 
##  178  179  181  183  186  188  192  195  196  197  198  200  201  204  206  207  208  209  211  214  216  218 
##    2    1    1    1    1    2    2    2    1    3    1    1    2    1    1    1    1    1    3    2    2    3 
##  220  221  222  223  225  229  233  234  235  236  239  240  242  245  247  250  251  252  257  258  260  261 
##    1    2    1    1    2    1    1    1    1    1    1    1    1    1    1    2    1    1    1    2    3    1 
##  262  263  264  265  267  268  271  272  275  280  281  283  284  285  292  294  299  300  301  303  304  310 
##    1    1    1    1    3    1    2    2    1    2    2    2    1    1    1    2    1    1    2    2    1    1 
##  311  312  313  318  321  322  326  329  330  331  332  333  334  336  337  338  342  351  375  396  397  398 
##    1    2    1    2    1    1    1    1    2    1    1    1    1    1    1    2    1    2    1    1    1    1 
##  404  432  440  483  615 &lt;NA&gt; 
##    1    1    1    1    1   32</code></pre>
<pre class="r"><code>crosstabs(~RCD_squished+ RCD_for_merge, diary %&gt;% filter(cycle_length_diary&lt;40))</code></pre>
<pre><code>##             RCD_for_merge
## RCD_squished   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24
##           1  255   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           2   21   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           3    4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   8   7
##           4    4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   3   4   7  19
##           5    3   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   0   9  18  31
##           6    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   3   3   4   6  35 146
##           7    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0  10  20  48  55
##           8    1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   3   3  16  27  78 184  62
##           9    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   4   6   8  91 205  47  25
##           10   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   4  17 116 216  56  25  19
##           11   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   5  59 250  64  28   4   0
##           12   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   9  82 339  62  17   0   0   0
##           13   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0  17 358  56   2   0   0   0   0
##           14   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 481  32   0   0   0   0   0   0
##           15   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 533   0   0   0   0   0   0   0   0
##           16   5   0   0   0   0   0   0   0   0   0   0   0   0   0 542   0   0   0   0   0   0   0   0   0
##           17   3   0   0   0   0   0   0   0   0   0   0   0   0 555   0   0   0   0   0   0   0   0   0   0
##           18   2   0   0   0   0   0   0   0   0   0   0   0 599   0   0   0   0   0   0   0   0   0   0   0
##           19   1   0   0   0   0   0   0   0   0   0   0 608   0   0   0   0   0   0   0   0   0   0   0   0
##           20   1   0   0   0   0   0   0   0   0   0 629   0   0   0   0   0   0   0   0   0   0   0   0   0
##           21   1   0   0   0   0   0   0   0   0 644   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           22   3   0   0   0   0   0   0   0 681   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           23   0   0   0   0   0   0   0 685   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           24   0   0   0   0   0   0 720   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           25   0   0   0   0   0 703   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           26   0   0   0   0 742   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           27   0   0   0 749   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           28   0   0 772   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           29   0 772   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##             RCD_for_merge
## RCD_squished  25  26  27  28  29  30  31  32  33  34  35  36  37  38
##           1    0   0   0   0   0   0   0   0   0   0   6   4   5   1
##           2    0  29  36  79  41  20  25  20  13  13   6   8   2   0
##           3   16  39  83  40  19  28  10   6  11  10   6   0   0   0
##           4   30  92  48  40  31  19  10   9   6   1   0   0   0   0
##           5  133  46  48  10  17  11  12   8   1   0   0   0   0   0
##           6   56  46  23  25  11   6   5   0   0   0   0   0   0   0
##           7   48  25  16  13   6   1   0   0   0   0   0   0   0   0
##           8   29  27  17   5   0   0   0   0   0   0   0   0   0   0
##           9   21   4   0   0   0   0   0   0   0   0   0   0   0   0
##           10   1   0   0   0   0   0   0   0   0   0   0   0   0   0
##           11   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           12   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           13   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           14   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           15   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           16   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           17   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           18   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           19   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           20   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           21   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           22   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           23   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           24   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           25   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           26   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           27   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           28   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##           29   0   0   0   0   0   0   0   0   0   0   0   0   0   0</code></pre>
<pre class="r"><code>ggplot(diary %&gt;% filter(cycle_length_diary&lt;40), aes(FCD, RCD_squished)) + geom_point() + facet_wrap(~cycle_length_diary)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<pre class="r"><code>days = data.frame(
    RCD_for_merge = c(29:1, 30:41),
    FCD = c(1:41),
    prc_stirn_b = c(.01, .01, .02, .03, .05, .09, .16, .27, .38, .48, .56, .58, .55, .48, .38, .28, .20, .14, .10, .07, .06, .04, .03, .02, .01, .01, .01, .01, .01, rep(.01, times = 12)),
#                   rep(.01, times = 70)), # gangestad uses .01 here, but I think such cases are better thrown than kept, since we might simply have missed a mens
    prc_wcx_b = c(.000, .000, .001, .002, .004, .009, .018, .032, .050, .069, .085, .094, .093, .085, .073, .059, .047, .036, .028, .021, .016, .013, .010, .008, .007, .006, .005, .005, .005, rep(.005, times = 12))
)
                  # rep(NA_real_, times = 70))  # gangestad uses .005 here, but I think such cases are better thrown than kept, since we might simply have missed a mens
days = days %&gt;% mutate(
 fertile_narrow = ifelse(between(RCD_for_merge,15,19), mean(prc_stirn_b[between(RCD_for_merge,15, 19)], na.rm = T), 
                     ifelse(between(RCD_for_merge,4,12), mean(prc_stirn_b[between(RCD_for_merge,4,12)], na.rm = T), NA_real_)), # these days are likely infertile
 
  fertile_broad = ifelse(between(RCD_for_merge,14,22), mean(prc_stirn_b[between(RCD_for_merge,14,22)], na.rm = T), 
                     ifelse(between(RCD_for_merge,4,12), mean(prc_stirn_b[between(RCD_for_merge,4,12)], na.rm = T), NA_real_)), # these days are likely infertile
 fertile_window = factor(ifelse(fertile_broad, ifelse(!is.na(fertile_narrow), &quot;narrow&quot;, &quot;broad&quot;),&quot;infertile&quot;), levels = c(&quot;infertile&quot;,&quot;broad&quot;, &quot;narrow&quot;)),
 premenstrual_phase = ifelse(between(RCD_for_merge, 2, 7), TRUE, FALSE)
)

rcd_days = days %&gt;% select(-FCD)
diary = left_join(diary %&gt;% setDF(), rcd_days, by = &quot;RCD_for_merge&quot;)

fcd_days = days %&gt;% select(-RCD_for_merge)
names(fcd_days) = paste0(names(fcd_days), &quot;_forward_counted&quot;)
fcd_days = fcd_days %&gt;% rename(FCD = FCD_forward_counted)
diary = left_join(diary, fcd_days, by = &quot;FCD&quot;)

rcd_inferred_days = days %&gt;% select(-FCD)
names(rcd_inferred_days) = paste0(names(rcd_inferred_days), &quot;_backward_inferred&quot;)
rcd_inferred_days = rcd_inferred_days %&gt;% 
  rename(RCD_inferred = RCD_for_merge_backward_inferred)
diary = left_join(diary, rcd_inferred_days, by = &quot;RCD_inferred&quot;)

rcd_squished = days %&gt;% select(-RCD_for_merge)
names(rcd_squished) = paste0(names(rcd_squished), &quot;_squished&quot;)
rcd_squished = rcd_squished %&gt;% 
  rename(RCD_squished = FCD_squished)
diary = left_join(diary, rcd_squished, by = &quot;RCD_squished&quot;)

ggplot(diary %&gt;% filter(cycle_length_diary&lt;40), aes(FCD, prc_stirn_b_squished))+geom_point() + facet_wrap(~cycle_length_diary )</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-25-2.png" width="672" /></p>
<pre class="r"><code>ggplot(diary %&gt;% filter(cycle_length_diary&lt;40), aes(RCD, prc_stirn_b_squished))+geom_point() + facet_wrap(~cycle_length_diary )</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-25-3.png" width="672" /></p>
<pre class="r"><code>ggplot(diary %&gt;% filter(cycle_length_diary&lt;40) %&gt;% select(FCD,RCD,prc_stirn_b,prc_stirn_b_squished,cycle_length_diary) %&gt;% gather(approach,prc_stirn_b,-RCD,-FCD, -cycle_length_diary), aes(RCD, prc_stirn_b, colour = approach))+geom_point() + facet_wrap(~cycle_length_diary ) + geom_vline(aes(xintercept = cycle_length_diary/2 * -1))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-25-4.png" width="672" /></p>
<pre class="r"><code>diary %&gt;% select(starts_with(&quot;prc_stirn_b&quot;)) %&gt;% 
cor(use=&#39;pairwise.complete.obs&#39;)</code></pre>
<pre><code>##                               prc_stirn_b prc_stirn_b_forward_counted prc_stirn_b_backward_inferred
## prc_stirn_b                        1.0000                      0.6846                        1.0000
## prc_stirn_b_forward_counted        0.6846                      1.0000                        0.7153
## prc_stirn_b_backward_inferred      1.0000                      0.7153                        1.0000
## prc_stirn_b_squished               0.8578                      0.6695                        0.8578
##                               prc_stirn_b_squished
## prc_stirn_b                                 0.8578
## prc_stirn_b_forward_counted                 0.6695
## prc_stirn_b_backward_inferred               0.8578
## prc_stirn_b_squished                        1.0000</code></pre>
<pre class="r"><code>pander(missingness_patterns(diary %&gt;% ungroup %&gt;% select(prc_stirn_b, prc_stirn_b_forward_counted, prc_stirn_b_backward_inferred)))</code></pre>
<p>index col missings 1 prc_stirn_b 13069 2 prc_stirn_b_backward_inferred 3813 3 prc_stirn_b_forward_counted 3576</p>
<table style="width:61%;">
<colgroup>
<col width="13%" />
<col width="9%" />
<col width="37%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Pattern</th>
<th align="center">Freq</th>
<th align="center">Culprit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">_____</td>
<td align="center">16782</td>
<td align="center">_</td>
</tr>
<tr class="even">
<td align="center">1____</td>
<td align="center">9256</td>
<td align="center">prc_stirn_b</td>
</tr>
<tr class="odd">
<td align="center">1_2_3</td>
<td align="center">2471</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">1_2__</td>
<td align="center">1342</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">____3</td>
<td align="center">1105</td>
<td align="center">prc_stirn_b_forward_counted</td>
</tr>
</tbody>
</table>
<pre class="r"><code>diary = diary %&gt;% 
  mutate(fertile_fab = if_else(is.na(prc_stirn_b), prc_stirn_b_backward_inferred, prc_stirn_b),
         premenstrual_phase_fab = if_else(is.na(premenstrual_phase), premenstrual_phase_backward_inferred, premenstrual_phase),
         fertile_forward_and_backward = fertile_fab
  ) %&gt;% 
  data.table()

diary[, menstruated_at_all := menstruation_1 == 1]
diary[ is.na(menstruated_at_all), menstruated_at_all := F]
table(diary$menstruated_at_all, exclude = NULL)</code></pre>
<pre><code>## 
## FALSE  TRUE  &lt;NA&gt; 
## 26151  4805     0</code></pre>
<pre class="r"><code>diary[, menstruation := factor(ifelse(menstruated_at_all,&quot;yes&quot;, ifelse(premenstrual_phase, &quot;pre&quot;,&quot;no&quot;)), levels = c(&quot;no&quot;, &quot;pre&quot;, &quot;yes&quot;))]
diary[is.na(menstruation), menstruation := &quot;no&quot;]


# diary %&gt;% select(short, created_date, ended, last_menstrual_onset,next_menstrual_onset, menstrual_onset_days_until, menstrual_onset_days_since, prc_stirn_b, prc_stirn_b_forward_counted, fertile_fab)  %&gt;% View()</code></pre>
<div id="find-fertile-window" class="section level3">
<h3>Find fertile window</h3>
<pre class="r"><code>diary[, ever_menstruated := ave(menstruated_at_all, session, FUN = any)]
diary[, any_RCD := !ave(is.na(RCD), session, FUN = all)]
diary[, menstruation_strength := menstruation_3]
diary[ is.na(menstruation_strength), menstruation_strength := 0]
diary[, menstruation_strength := factor(menstruation_strength)]
diary[, menstrual_onset := created_date == next_menstrual_onset]
diary[, we_know_fertile_days := ave(!is.na(prc_stirn_b) | !is.na(prc_stirn_b_forward_counted), session, FUN = any)]
crosstabs(diary[!duplicated(session),]$we_know_fertile_days)</code></pre>
<pre><code>## diary[!duplicated(session), ]$we_know_fertile_days
## FALSE  TRUE 
##    96  1112</code></pre>
<pre class="r"><code>diary$fertile_cont = diary$prc_stirn_b

diary %&gt;% filter(sufficient_diary_coverage==T &amp; ever_menstruated == T &amp; any_RCD == T) %&gt;%
  ggplot(aes(x = menstrual_onset_days_until, y = as.factor(as.numeric(as.factor(session)))))+ 
  scale_y_discrete(&quot;Person&quot;) + 
  geom_tile(aes(fill = fertile_cont)) + 
  scale_x_continuous(&quot;Relative to last observed menstrual onset&quot;, limits= c(-40, 15), breaks = seq(-40,15, by = 5)) + 
  geom_point(aes(colour=menstruation_strength)) + 
  scale_fill_distiller() + 
  scale_color_manual(values = c(&quot;0&quot;=&quot;transparent&quot;,&quot;1&quot;=&quot;pink&quot;,&quot;2&quot;=&quot;red&quot;,&quot;3&quot;=&quot;darkred&quot;))  + 
  geom_vline(aes(xintercept = limits, linetype = Window),data = data.frame(limits= c(-14.5,-19.5, -13.5,-22.5,-3.5,-12.5), Window = rep(c(&quot;narrow&quot;,&quot;broad&quot;,&quot;infertile&quot;),each=2)),color = &#39;black&#39;, size = 0.9, alpha = 0.9,show.legend = T) +
  scale_linetype_manual(values = c(&quot;narrow&quot;=&quot;solid&quot;,&quot;broad&quot;=&quot;dashed&quot;,&quot;infertile&quot;=&quot;dotted&quot;))</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<pre class="r"><code># a case where the nachbe helped
# diary[session %contains% &quot;eaca39&quot;, list(created_date,  menstruation_dates, next_menstrual_onset, last_menstrual_onset, menstruated_at_all, menstruation_2,RCD, fertile_cont,fertile_broad) ] %&gt;% arrange(created_date) %&gt;% View()
# a case where we observed a menstruation at the end and in the beginning, but missed the onsets
# diary[session %contains% &quot;b270e1&quot;, list(created_date,  menstruation_dates, next_menstrual_onset, last_menstrual_onset, menstruated_at_all, menstruation_2,RCD, fertile_cont,fertile_broad) ] %&gt;% arrange(created_date) %&gt;% View()
# a case where we observed a menstruation at the end and in the beginning
# diary[session %contains% &quot;0b8734&quot;, list(created_date,  menstruation_dates, next_menstrual_onset, last_menstrual_onset, menstruated_at_all, menstruation_2,RCD, fertile_cont,fertile_broad) ] %&gt;% arrange(created_date) %&gt;% View()

# a case where she first indicated menstrual onset on the day it occurred (likely correct), then two days later reported that it occurred yesterday (likely incorrect). problem solved by not treating extremely close together menstrual onsets as separate, instead using the earlier date (closer to onset, more likely to be correct)
# diary[session %contains% &quot;c7cc8e&quot;, list(created_date,  menstruation_dates, next_menstrual_onset, last_menstrual_onset, menstruated_at_all, menstruation_2,RCD, fertile_cont,fertile_broad) ] %&gt;% arrange(created_date) %&gt;% View()

## two cases with a little misreporting of ongoing periods
# diary[session %contains% &quot;43a25b&quot;, list(created_date,  menstruation_dates, next_menstrual_onset, last_menstrual_onset, menstruated_at_all, menstruation_2,RCD, fertile_cont,fertile_broad) ] %&gt;% arrange(created_date) %&gt;% head(60) %&gt;% View()
# diary[session %contains% &quot;8d4629&quot;, list(created_date,  menstruation_dates, next_menstrual_onset, last_menstrual_onset, menstruated_at_all, menstruation_2,RCD, fertile_cont,fertile_broad) ] %&gt;% arrange(created_date) %&gt;% head(60) %&gt;% View()


qplot(data = diary[!duplicated(session) &amp; between(median_cycle_length_diary, 20,40), ], median_cycle_length_diary, cyklus_3, colour =  factor(cyklus_4)) + geom_smooth(method = &#39;lm&#39;)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-26-2.png" width="672" /></p>
<pre class="r"><code>cor.test(diary[!duplicated(session) &amp; between(median_cycle_length_diary, 20,40) &amp; cyklus_4 &gt; 4, ]$median_cycle_length_diary, diary[!duplicated(session) &amp; between(median_cycle_length_diary, 20,40) &amp; cyklus_4 &gt; 4, ]$cyklus_3)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  diary[!duplicated(session) &amp; between(median_cycle_length_diary,  and diary[!duplicated(session) &amp; between(median_cycle_length_diary,     20, 40) &amp; cyklus_4 &gt; 4, ]$median_cycle_length_diary and     20, 40) &amp; cyklus_4 &gt; 4, ]$cyklus_3
## t = 4.5, df = 250, p-value = 0.00001
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.1537 0.3815
## sample estimates:
##    cor 
## 0.2714</code></pre>
<pre class="r"><code>diary$week_number = cut(diary$day_number, c(0,7,14,21,28,35,600), include.lowest = T)

diary = diary %&gt;% 
  group_by(session, cycle_nr) %&gt;%
  mutate(minimum_cycle_length_diary = if_else(!is.na(cycle_length_diary), cycle_length_diary,
                                              max(FCD,na.rm = T)),
          minimum_cycle_length_diary = if_else(minimum_cycle_length_diary == -Inf, NA_real_, minimum_cycle_length_diary)
         ) %&gt;%
  group_by(session) %&gt;%
  data.table()</code></pre>
</div>
</div>
<div id="applying-various-inclusion-criteria" class="section level2">
<h2>Applying various inclusion criteria</h2>
<pre class="r"><code>pipeline$completed_pre_survey = nrow(xsection)</code></pre>
<div id="include_all" class="section level3">
<h3>include_all</h3>
<p>some preparations:</p>
<pre class="r"><code>library(dplyr)
min_max_diff = function(x) {as.numeric(max(as.Date(x),na.rm=T) - min(as.Date(x)),na.rm=T) }
diary_summaries = diary %&gt;% 
  group_by(session) %&gt;% 
  summarise(took_days = min_max_diff(created),
            n_days = sum(!is.na(ended) &amp; !is.na(communication_partner_1)), # look at first item too, because some had ended due to being &quot;closed&quot; after some time of non-response, a software thing
            avg_diff = mean(as.numeric(diff(created), units = &quot;days&quot;),na.rm = T),
            biggest_diff = max(as.numeric(diff(created), units = &quot;days&quot;),na.rm = T),
            had_any_period = any(menstruation_1 == 1, na.rm = T),
            fertile_days_known_backward = sum(!is.na(ended) &amp; !is.na(communication_partner_1) &amp; !is.na(prc_stirn_b)),
            fertile_days_known_backward_inferred = sum(!is.na(ended) &amp; !is.na(communication_partner_1) &amp; !is.na(prc_stirn_b_backward_inferred)),
            fertile_days_known_forward = sum(!is.na(ended) &amp; !is.na(communication_partner_1) &amp; !is.na(prc_stirn_b_forward_counted))
            )
diary_summaries[, any_fertile_days_known := fertile_days_known_backward_inferred &gt; 0]
crosstabs(~ any_fertile_days_known + had_any_period, diary_summaries)</code></pre>
<pre><code>##                       had_any_period
## any_fertile_days_known FALSE TRUE
##                  FALSE   124    6
##                  TRUE    174  904</code></pre>
<pre class="r"><code>crosstabs(~ had_any_period + (n_days &gt; 20), data = diary_summaries)</code></pre>
<pre><code>##               n_days &gt; 20
## had_any_period FALSE TRUE
##          FALSE   229   69
##          TRUE    163  747</code></pre>
<pre class="r"><code>xsection = merge(xsection, diary_summaries, by = &quot;session&quot;, all.x = T) %&gt;% data.table()
crosstabs(~ age + had_any_period, data = xsection[n_days &gt; 35, ])</code></pre>
<pre><code>##     had_any_period
## age  FALSE TRUE
##   18     1   10
##   19     0   28
##   20     3   38
##   21     1   31
##   22     3   26
##   23     3   33
##   24     1   14
##   25     0   17
##   26     1   14
##   27     0    9
##   28     0    7
##   29     0    7
##   30     1    4
##   31     0    5
##   32     0    7
##   33     1    2
##   34     0    4
##   35     0    3
##   36     0    2
##   37     0    3
##   38     1    0
##   39     0    3
##   40     0    3
##   41     0    3
##   42     0    2
##   43     1    0
##   45     0    3
##   46     1    1
##   47     1    2
##   48     0    2
##   49     2    2
##   50     3    1
##   51     1    0
##   53     1    0
##   55     1    0
##   58     1    0
##   60     1    0</code></pre>
<pre class="r"><code>crosstabs(~ age + any_fertile_days_known, data = xsection[n_days &gt; 35, ])</code></pre>
<pre><code>##     any_fertile_days_known
## age  FALSE TRUE
##   18     1   10
##   19     0   28
##   20     0   41
##   21     0   32
##   22     2   27
##   23     2   34
##   24     1   14
##   25     0   17
##   26     0   15
##   27     0    9
##   28     0    7
##   29     0    7
##   30     0    5
##   31     0    5
##   32     0    7
##   33     1    2
##   34     0    4
##   35     0    3
##   36     0    2
##   37     0    3
##   38     0    1
##   39     0    3
##   40     0    3
##   41     0    3
##   42     0    2
##   43     0    1
##   45     0    3
##   46     0    2
##   47     0    3
##   48     0    2
##   49     2    2
##   50     1    3
##   51     0    1
##   53     1    0
##   55     0    1
##   58     0    1
##   60     1    0</code></pre>
<pre class="r"><code>crosstabs(~ age + (fertile_days_known_backward &gt; 0), data = xsection[n_days &gt; 35, ])</code></pre>
<pre><code>##     fertile_days_known_backward &gt; 0
## age  FALSE TRUE
##   18     1   10
##   19     1   27
##   20     3   38
##   21     1   31
##   22     3   26
##   23     4   32
##   24     1   14
##   25     0   17
##   26     1   14
##   27     0    9
##   28     0    7
##   29     0    7
##   30     1    4
##   31     0    5
##   32     0    7
##   33     1    2
##   34     0    4
##   35     0    3
##   36     0    2
##   37     0    3
##   38     1    0
##   39     0    3
##   40     0    3
##   41     0    3
##   42     0    2
##   43     1    0
##   45     0    3
##   46     1    1
##   47     1    2
##   48     0    2
##   49     2    2
##   50     3    1
##   51     0    1
##   53     1    0
##   55     1    0
##   58     1    0
##   60     1    0</code></pre>
<pre class="r"><code>crosstabs(~ age + (fertile_days_known_forward &gt; 0), data = xsection)</code></pre>
<pre><code>##     fertile_days_known_forward &gt; 0
## age  FALSE TRUE
##   18     7   29
##   19     6   68
##   20     8   85
##   21     8  104
##   22     9   96
##   23    11  118
##   24     7  101
##   25     3   73
##   26     5   80
##   27     5   47
##   28     7   39
##   29     3   32
##   30     5   24
##   31     0   16
##   32     0   20
##   33     4   23
##   34     1   11
##   35     0   11
##   36     0   13
##   37     1    9
##   38     0    9
##   39     1   12
##   40     1    9
##   41     1    8
##   42     0    3
##   43     0    3
##   44     0    7
##   45     2    7
##   46     0    3
##   47     1    7
##   48     1    3
##   49     3    6
##   50     3    8
##   51     1    3
##   52     2    1
##   53     3    2
##   54     1    0
##   55     1    1
##   57     0    1
##   58     1    1
##   60     2    0
##   69     0    1</code></pre>
<pre class="r"><code>unique(xsection[n_days &gt; 0, list(age, n_days, fertile_days_known_forward, fertile_days_known_backward, had_any_period,any_fertile_days_known)]) %&gt;% arrange(age) %&gt;% tail(40)
unique(xsection[n_days &gt;= 30, list(age, n_days, fertile_days_known_forward, fertile_days_known_backward, had_any_period,any_fertile_days_known)]) %&gt;% arrange(age) %&gt;% tail(40)
xsection[age &gt; 45 &amp; !had_any_period, any_fertile_days_known := FALSE]
unique(xsection[n_days &gt;= 30 &amp; any_fertile_days_known == T, list(age, n_days, fertile_days_known_forward, fertile_days_known_backward, had_any_period,any_fertile_days_known)]) %&gt;% arrange(age) %&gt;% tail(40)</code></pre>
<div id="non-debatable-exclusion-criteria" class="section level4">
<h4>non-debatable exclusion criteria:</h4>
<ul>
<li>menopausal (indirectly defined by us still observing periods)</li>
<li>use hormonal contraception</li>
<li>pregnant</li>
</ul>
<pre class="r"><code>excluded_old = NULL
xsection[, include_all := T] # default is to include everybody
xsection[ include_all == T, include_all := !is.na(n_days) &amp; n_days &gt; 0] # ever responded to diary
pipeline$never_did_diary = n_excluded(xsection$include_all)</code></pre>
<pre><code>## 54 excluded</code></pre>
<pre class="r"><code>xsection[str_sub(session, 1,10) == &quot;cd78621db4&quot;, include_all := F] # reported hormonal treatment in preparation for IVF
xsection[ include_all == T, include_all := ! pregnant %contains% &quot;1&quot;] # only non-pregnant (in last 3 months)
pipeline$pregnant = n_excluded(xsection$include_all)</code></pre>
<pre><code>## 24 excluded</code></pre>
<pre class="r"><code>xsection[ include_all == T, include_all := ! contraception %contains_word% &quot;infertile&quot;] # only not infertile
pipeline$infertile = n_excluded(xsection$include_all)</code></pre>
<pre><code>## 5 excluded</code></pre>
<pre class="r"><code>xsection[ include_all == T, include_all := ! contraception %contains_word% &quot;sterilised&quot;] # only non-pregnant (in last 3 months)
pipeline$sterilised = n_excluded(xsection$include_all)</code></pre>
<pre><code>## 12 excluded</code></pre>
<pre class="r"><code>xsection[ include_all == T, include_all := any_fertile_days_known] # only those where we could infer fertility on at least one day
pipeline$no_period = n_excluded(xsection$include_all)</code></pre>
<pre><code>## 70 excluded</code></pre>
<pre class="r"><code># here we allow those who breastfed in last 3 months, because those we excluded those with lactational amenorrhoe already above
# xsection[ include_all == T, include_all := ! breast_feeding %contains% &quot;1&quot;] # only non-breast_feeding
# n_excluded(xsection$include_all)

xsection[, hormonal_all := include_all]
pipeline$naturally_cycling = sum(xsection[ include_all == T, 
    ! contraception %contains% &quot;contraceptive_pill&quot;  &amp; 
    !contraception %contains% &quot;other_hormonal&quot;], na.rm = T)
xsection[ include_all == T, include_all := 
    ! contraception %contains% &quot;contraceptive_pill&quot;  &amp; 
    !contraception %contains% &quot;other_hormonal&quot;] # only non-hormonally contracepting, in this case we leave women who take the morning after pill with the naturally cycling women

pipeline_hc$HC_users = sum(xsection[ hormonal_all == T, 
    contraception %contains% &quot;contraceptive_pill&quot;  | 
    contraception %contains% &quot;other_hormonal&quot;], na.rm = T)
xsection[ hormonal_all == T, hormonal_all := 
    contraception %contains% &quot;contraceptive_pill&quot;  | 
    contraception %contains% &quot;other_hormonal&quot;] # only hormonally contracepting

xsection[, included_bool := include_all &amp; !hormonal_all]
xsection[hormonal_all == F &amp; include_all == F, included_bool := NA]
xsection[, included_all := factor(ifelse(included_bool, &quot;cycling&quot;,  &quot;horm_contra&quot;))]</code></pre>
<p><big>421</big> non-hormonally contracepting women and <big>622</big> hormonally contracepting women are included in the sample with only mandatory exclusion criteria.</p>
</div>
</div>
<div id="include_lax" class="section level3">
<h3>include_lax</h3>
<ol start="3" style="list-style-type: decimal">
<li>nur die obligatorischen Ausschlusskriterien (finished study, didnt take too long, use hormonal contraception, switched to hormonal contraception, certain medication, took pill/hormonal antibiotics during the last three months, certain illness, breastfeeding, pregnant, irregular cycle) #### exclusion criteria:</li>
</ol>
<ul>
<li>age &gt;= 40</li>
<li>use hormonal contraception</li>
<li>switched to hormonal contraception</li>
<li>certain medication</li>
<li>tool pill/hormonal antibiotics during the last three months</li>
<li>certain illness</li>
<li>breastfeeding</li>
<li>pregnant</li>
<li>irregular cycle</li>
<li>guessed the hypothesis</li>
</ul>
<pre class="r"><code>excluded_old = NULL
xsection[, include_lax := include_all] # default is to include everybody
n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 787 excluded</code></pre>
<pre><code>## [1] 787</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := age &lt; 40] # include only those who are younger than 40
pipeline$older_than_40 = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 46 excluded</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := ! is.na (ended.abschluss)] # include only those who finished the abschluss survey
pipeline$finished_post_survey = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 137 excluded</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := ! contraception %contains% &quot;contraceptive_pill&quot; &amp; ! contraception %contains% &quot;morning_after_pill&quot; &amp; !contraception %contains% &quot;other_hormonal&quot; &amp; !contraception %contains% &quot;infertile&quot;] # only non-hormonally contracepting
pipeline$hc_users_broad = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 2 excluded</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := ! breast_feeding %contains% &quot;1&quot;] # only non-breast_feeding
pipeline$breast_feeding = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 6 excluded</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := !pille_control %contains% &quot;1&quot;] # pill in the last 3 months
pipeline$pill_last_3m = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 14 excluded</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := !antibiotics %contains% &quot;1&quot;] # no hormonal medication
pipeline$hormonal_medicine = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 25 excluded</code></pre>
<pre class="r"><code>table(xsection$cyklus_3) #show cycle lengths</code></pre>
<pre><code>## 
##  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 
##  13  22   7  23  28  87  66  57 504  84 150  29  31  13   9  36   2   2   2   1  42</code></pre>
<pre class="r"><code>xsection[, hormonal_contra := contraception %contains% &quot;contraceptive_pill&quot; &amp; ! contraception %contains% &quot;morning_after_pill&quot; &amp; !contraception %contains% &quot;other_hormonal&quot; &amp; !contraception %contains% &quot;infertile&quot;]
crosstabs(~ xsection$hormonal_contra  + xsection$cyklus_4)</code></pre>
<pre><code>##                         xsection$cyklus_4
## xsection$hormonal_contra   1   2   3   4   5
##                    FALSE  62  66 119 169 189
##                    TRUE   33  46  95 194 234
##                    &lt;NA&gt;    0   0   0   1   0</code></pre>
<pre class="r"><code>xtabs(~ cyklus_3 + cyklus_4, data = xsection)</code></pre>
<pre><code>##         cyklus_4
## cyklus_3   1   2   3   4   5
##       20   4   0   1   4   4
##       21   1   3   4   7   7
##       22   2   1   1   2   1
##       23   1   1  10   7   4
##       24   2   0   3  14   9
##       25  16  13  17  26  15
##       26   4   4  11  33  14
##       27   4   9  12  16  16
##       28  17  28  70 141 248
##       29   1   5  15  34  29
##       30  17  26  39  42  26
##       31   3   0   4  12  10
##       32   3   7   6   5  10
##       33   0   3   3   4   3
##       34   0   1   2   3   3
##       35   4   4   9   7  12
##       36   1   0   0   0   1
##       37   0   0   1   0   1
##       38   1   0   0   1   0
##       39   0   0   1   0   0
##       40  14   7   5   6  10</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := cyklus_3 &gt; 21 &amp; cyklus_3 &lt; 38] #exclude those with wrong cycle lengths
pipeline$long_or_short_cycle = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 10 excluded</code></pre>
<pre class="r"><code>crosstabs(~ include_lax + hypothesis_guessed, data = xsection)</code></pre>
<pre><code>##            hypothesis_guessed
## include_lax     hormones menstruation pille zyklus zyklus, pille
##       FALSE 986        6            1     3     29             1
##       TRUE  157        0            0     3     21             0
##       &lt;NA&gt;    1        0            0     0      0             0</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := is.na(hypothesis_guessed) | ! hypothesis_guessed %contains% &quot;zyklus&quot;] #exclude those who guessed hypotheses
pipeline$guessed_hypothesis = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 21 excluded</code></pre>
<pre class="r"><code>xsection[ include_lax == T, include_lax := !(took_days &gt; 70 | avg_diff &gt; 10)] #exclude laggards
pipeline$laggards = n_excluded(xsection$include_lax)</code></pre>
<pre><code>## 17 excluded</code></pre>
<pre class="r"><code>pipeline$criterion_lax = sum(xsection$include_lax, na.rm = T)</code></pre>
<p><big>143</big> non-hormonally contracepting women and <big>0</big> hormonally contracepting women are included in the sample with lax inclusion criteria.</p>
<div id="hormonally-contracepting-control-group" class="section level4">
<h4>hormonally contracepting control group</h4>
<pre class="r"><code>excluded_old = NULL
xsection[, hormonal_lax := hormonal_all] # default is to include everybody
n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 586 excluded</code></pre>
<pre><code>## [1] 586</code></pre>
<pre class="r"><code>xsection[ hormonal_lax == T, hormonal_lax := age &lt; 40] # include only those below 40
pipeline_hc$older_than_40 = n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 7 excluded</code></pre>
<pre class="r"><code>xsection[ hormonal_lax == T, hormonal_lax := ! is.na (ended.abschluss)] # include only those who finished the abschluss survey
pipeline_hc$finished_post_survey = n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 168 excluded</code></pre>
<pre class="r"><code>xsection[ hormonal_lax == T, hormonal_lax := ! breast_feeding %contains% &quot;1&quot;] # only non-breast_feeding
pipeline_hc$breast_feeding = n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 2 excluded</code></pre>
<pre class="r"><code>xsection[ hormonal_lax == T, hormonal_lax := cyklus_3 &gt; 21 &amp; cyklus_3 &lt; 38] #exclude those with wrong cycle lengths
pipeline_hc$long_or_short_cycle = n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 28 excluded</code></pre>
<pre class="r"><code>xsection[ hormonal_lax == T, hormonal_lax := ! hypothesis_guessed %contains% &quot;zyklus&quot; &amp; !  hypothesis_guessed %contains% &quot;hormones&quot;] #exclude those who guessed hypotheses
pipeline_hc$guessed_hypothesis = n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 19 excluded</code></pre>
<pre class="r"><code>xsection[ hormonal_lax == T, hormonal_lax := !(took_days &gt; 70 | avg_diff &gt; 10)] #exclude laggards
pipeline_hc$laggards = n_excluded(xsection$hormonal_lax)</code></pre>
<pre><code>## 24 excluded</code></pre>
<pre class="r"><code>xsection[, included_bool := include_lax &amp; !hormonal_lax]
xsection[hormonal_lax == F &amp; include_lax == F, included_bool := NA]
xsection[, included_lax := factor(ifelse(included_bool, &quot;cycling&quot;,  &quot;horm_contra&quot;))]
is.na(xsection$included_lax)[is.na(xsection$included_bool)] &lt;- TRUE
crosstabs( ~factor(xsection$included_lax,exclude = NULL))</code></pre>
<pre><code>## factor(xsection$included_lax, exclude = NULL)
##     cycling horm_contra        &lt;NA&gt; 
##         143         374         691</code></pre>
<pre class="r"><code>pipeline_hc$criterion_lax = sum(xsection$hormonal_lax, na.rm = T)</code></pre>
</div>
</div>
<div id="include_conservative" class="section level3">
<h3>include_conservative</h3>
<div id="conservative-exclusion-criteria" class="section level4">
<h4>conservative exclusion criteria:</h4>
<ul>
<li>BMI</li>
<li>weight loss</li>
<li>cigs</li>
<li>intensive sports</li>
<li>those with irregular cycle but only if they are fairly sure about regularity</li>
</ul>
<pre class="r"><code>excluded_old = NULL
xsection[, include_conservative := include_lax]
n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 1065 excluded</code></pre>
<pre><code>## [1] 1065</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := ! cigarettes &gt; 10]
pipeline$heavy_smokers = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 4 excluded</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := ! intensive_sports &gt; 7]
pipeline$intensive_sports = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 6 excluded</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := ! breakup == 1]
pipeline$broke_up = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 3 excluded</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := ! change_contraception_1 %contains% &quot;1&quot;]
pipeline$changed_contraception = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 0 excluded</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := weight_post - weight &gt; -8]
pipeline$lost_more_than_8kg = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 2 excluded</code></pre>
<pre class="r"><code>xsection[, BMI := ((weight_post + weight)/2) /((height/100)^2)] #creating new variable &quot;BMI&quot; in dataset
qplot(xsection$BMI)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/include_conservative-1.png" width="672" /></p>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := BMI &gt; 17]
pipeline$BMI_lt_17 = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 3 excluded</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := BMI &lt; 30]
pipeline$BMI_gt_30 = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 8 excluded</code></pre>
<pre class="r"><code>table(xsection$cyklus_5)  #show if and how much cycle was off during the last three months</code></pre>
<pre><code>## 
##   1   2   3 
## 779 237 192</code></pre>
<pre class="r"><code>xtabs(~ cyklus_5 + cyklus_6, data = xsection)</code></pre>
<pre><code>##         cyklus_6
## cyklus_5   1   2   3   4   5
##        1  18  10  23 128 600
##        2   9  15  34  72 107
##        3  22   4  12  31 123</code></pre>
<pre class="r"><code>xsection[include_conservative == T, include_conservative := cyklus_5 &lt; 3 | cyklus_6 == 5] #exclude those with irregular cycles, IF they have expressed some certainty in this
pipeline$confident_that_cycle_irregular = n_excluded(xsection$include_conservative)</code></pre>
<pre><code>## 5 excluded</code></pre>
<pre class="r"><code>pipeline$criterion_conservative = sum(xsection$include_conservative, na.rm = T)</code></pre>
<pre class="r"><code>excluded_old = NULL
xsection[, hormonal_conservative := hormonal_lax]
n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 834 excluded</code></pre>
<pre><code>## [1] 834</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := ! cigarettes &gt; 10]
pipeline_hc$heavy_smokers = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 10 excluded</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := ! intensive_sports &gt; 7]
pipeline_hc$intensive_sports = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 18 excluded</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := ! breakup == 1]
pipeline_hc$broke_up = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 10 excluded</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := ! change_contraception_1 %contains% &quot;1&quot;]
pipeline_hc$changed_contraception = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 14 excluded</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := weight_post - weight &gt; -8]
pipeline_hc$lost_more_than_8kg = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 6 excluded</code></pre>
<pre class="r"><code>xsection[, BMI := ((weight_post + weight)/2) /((height/100)^2)] #creating new variable &quot;BMI&quot; in dataset
qplot(xsection$BMI)</code></pre>
<p><img src="1_wrangle_data_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := BMI &gt; 17]
pipeline_hc$BMI_lt_17 = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 7 excluded</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := BMI &lt; 30]
pipeline_hc$BMI_gt_30 = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 10 excluded</code></pre>
<pre class="r"><code>table(xsection$cyklus_5)  #show if and how much cycle was off during the last three months</code></pre>
<pre><code>## 
##   1   2   3 
## 779 237 192</code></pre>
<pre class="r"><code>xtabs(~ cyklus_5 + cyklus_6, data = xsection)</code></pre>
<pre><code>##         cyklus_6
## cyklus_5   1   2   3   4   5
##        1  18  10  23 128 600
##        2   9  15  34  72 107
##        3  22   4  12  31 123</code></pre>
<pre class="r"><code>xsection[hormonal_conservative == T, hormonal_conservative := cyklus_5 &lt; 3 | cyklus_6 == 5] #exclude those with irregular cycles, IF they have expressed some certainty in this
pipeline_hc$confident_that_cycle_irregular = n_excluded(xsection$hormonal_conservative)</code></pre>
<pre><code>## 6 excluded</code></pre>
<pre class="r"><code>xsection[, included_bool := include_conservative &amp; ! hormonal_conservative]
xsection[ hormonal_conservative == F &amp; include_conservative == F, included_bool := NA]
xsection[, included_conservative := factor(ifelse(included_bool, &quot;cycling&quot;,  &quot;horm_contra&quot;))]
is.na(xsection$included_conservative)[is.na(xsection$included_bool)] &lt;- TRUE
crosstabs( ~factor(xsection$included_conservative,exclude = NULL))</code></pre>
<pre><code>## factor(xsection$included_conservative, exclude = NULL)
##     cycling horm_contra        &lt;NA&gt; 
##         112         294         802</code></pre>
<pre class="r"><code>pipeline_hc$criterion_conservative = sum(xsection$hormonal_conservative, na.rm = T)</code></pre>
<p><big>112</big> non-hormonally contracepting women and <big>293</big> hormonally contracepting women are included in the sample with conservative exclusion criteria.</p>
</div>
</div>
<div id="include_strict" class="section level3">
<h3>include_strict</h3>
<ul>
<li>stressed</li>
<li>those with irregular cycle even if they are basically guessing about regularity</li>
</ul>
<pre class="r"><code>excluded_old = NULL
xsection[, include_strict := include_conservative]
n_excluded(xsection$include_strict)</code></pre>
<pre><code>## 1096 excluded</code></pre>
<pre><code>## [1] 1096</code></pre>
<pre class="r"><code>xsection[include_strict == T, include_strict := cyklus_5 &lt; 3] #exclude those with irregular cycles, even the uncertain ones
pipeline$cycle_possibly_irregular = n_excluded(xsection$include_strict)</code></pre>
<pre><code>## 12 excluded</code></pre>
<pre class="r"><code>xsection[include_strict == T, include_strict := ! stress == 1]
pipeline$stressed = n_excluded(xsection$include_strict)</code></pre>
<pre><code>## 43 excluded</code></pre>
<pre class="r"><code>pipeline$criterion_strict = sum(xsection$include_strict, na.rm = T)
excluded_old = NULL
xsection[, hormonal_strict := hormonal_conservative]
n_excluded(xsection$hormonal_strict)</code></pre>
<pre><code>## 915 excluded</code></pre>
<pre><code>## [1] 915</code></pre>
<pre class="r"><code>xsection[hormonal_strict == T, hormonal_strict := cyklus_5 &lt; 3] #exclude those with irregular cycles, even the uncertain ones
pipeline_hc$cycle_possibly_irregular = n_excluded(xsection$hormonal_strict)</code></pre>
<pre><code>## 12 excluded</code></pre>
<pre class="r"><code>xsection[hormonal_strict == T, hormonal_strict := ! stress == 1]
pipeline_hc$stressed = n_excluded(xsection$hormonal_strict)</code></pre>
<pre><code>## 120 excluded</code></pre>
<pre class="r"><code>pipeline_hc$criterion_strict = sum(xsection$hormonal_strict, na.rm = T)

xsection[, included_bool := include_strict &amp; ! hormonal_strict]
xsection[ hormonal_strict == F &amp; include_strict == F, included_bool := NA]
xsection[, included_strict := factor(ifelse(included_bool, &quot;cycling&quot;,  &quot;horm_contra&quot;))]
is.na(xsection$included_strict)[is.na(xsection$included_bool)] &lt;- TRUE

crosstabs( ~factor(xsection$included_strict,exclude = NULL))</code></pre>
<pre><code>## factor(xsection$included_strict, exclude = NULL)
##     cycling horm_contra        &lt;NA&gt; 
##          57         162         989</code></pre>
<pre class="r"><code>crosstabs(~ factor(included_strict, exclude = NULL), xsection[!is.na(included_strict), ])</code></pre>
<pre><code>## factor(included_strict, exclude = NULL)
##     cycling horm_contra 
##          57         162</code></pre>
<p><big>57</big> non-hormonally contracepting women and <big>161</big> hormonally contracepting women are included in the sample with overly strict exclusion criteria.</p>
</div>
<div id="by-strictness" class="section level3">
<h3>by strictness</h3>
<pre class="r"><code>crosstabs(~ factor(included_strict, exclude = NULL), xsection[!is.na(included_strict), ])</code></pre>
<pre><code>## factor(included_strict, exclude = NULL)
##     cycling horm_contra 
##          57         162</code></pre>
<pre class="r"><code>xsection$included_levels = ifelse(!is.na(xsection$included_all),&quot;all&quot;, NA_character_)
xsection$included_levels = ifelse(!is.na(xsection$included_lax), &quot;lax&quot;, xsection$included_levels)
xsection$included_levels = ifelse(!is.na(xsection$included_conservative), &quot;conservative&quot;, xsection$included_levels)
xsection$included_levels = ifelse(!is.na(xsection$included_strict), &quot;strict&quot;, xsection$included_levels)
xsection$included_levels = factor(xsection$included_levels, levels = c(&quot;all&quot;, &quot;lax&quot;, &quot;conservative&quot;, &quot;strict&quot;))
xsection[, hormonal := contraception %contains% &quot;contraceptive_pill&quot; | contraception %contains% &quot;other_hormonal&quot;]
crosstabs(~ factor(xsection$included_levels, exclude = NULL))</code></pre>
<pre><code>## factor(xsection$included_levels, exclude = NULL)
##          all          lax conservative       strict         &lt;NA&gt; 
##          526          111          187          219          165</code></pre>
<pre class="r"><code>crosstabs(~ factor(included_levels, exclude = NULL) + hormonal, data = xsection)</code></pre>
<pre><code>##                                        hormonal
## factor(included_levels, exclude = NULL) FALSE TRUE &lt;NA&gt;
##                            all            278  248    0
##                            lax             31   80    0
##                            conservative    55  132    0
##                            strict          57  162    0
##                            &lt;NA&gt;            93   71    1</code></pre>
</div>
</div>
<div id="participant-flow" class="section level2">
<h2>Participant flow</h2>
<pre class="r"><code>library(DiagrammeR)
pipeline$hc = pipeline_hc
save(pipeline, file = &quot;pipeline.rdata&quot;)
# consort = with(pipeline,
# paste0(&#39;graph TB
#   start[&quot;Participants enrolled&lt;br&gt;
#   N=&#39;,signed_up,&#39;&quot;]
#   ineligible[&quot;Ineligible&lt;br&gt;
#   n=&#39;,ineligible,&#39;&quot;]
#   notfinish[&quot;Did not finish pre-survey&lt;br&gt;
#   n=&#39;,did_not_complete_pre_survey,&#39;&quot;]
#   eligible[&quot;Finished pre-survey&lt;br&gt;
#   n=&#39;,finished_pre_survey,&#39;&quot;]
# 
#   horm_ineligible[&quot;Excluded n=&#39;,never_did_diary,&#39; no diary entries,&lt;br&gt;
#   n=&#39;,pregnant,&#39; pregnant, n=&#39;,infertile,&#39; infertile,&lt;br&gt;
#   n=&#39;,sterilised,&#39; sterilised,&lt;br&gt;
#   n=&#39;,no_period,&#39; fertility not estimable&quot;]
# 
#   nc[&quot;Naturally cycling&lt;br&gt;
#   n=&#39;,naturally_cycling,&#39;&quot;]
# 
#   hc[&quot;Using hormonal contraception&lt;br&gt;
#   n=&#39;,hc$HC_users,&#39;&quot;]
# 
#   c_lax_ineligible[&quot;Excluded n=&#39;,older_than_40,&#39; older than 40, &lt;br&gt;
#   n=&#39;,finished_post_survey,&#39; did not finish study, &lt;br&gt;
#   n=&#39;,hc_users_broad,&#39; used morning-after-pill, &lt;br&gt;
#   n=&#39;,breast_feeding,&#39; breast-feeding, &lt;br&gt;
#   n=&#39;,pill_last_3m,&#39; HC used in last 3m, &lt;br&gt;
#   n=&#39;,hormonal_medicine,&#39; hormonal medication, &lt;br&gt;
#   n=&#39;,long_or_short_cycle,&#39; cycle length not in 22-37 days&quot;]
# 
#   c_lax[&quot;Included (lax)&lt;br&gt;
#   n=&#39;,criterion_lax,&#39;&quot;]
# 
#   c_cons_ineligible[&quot;Excluded n=&#39;,heavy_smokers,&#39; heavy smokers, &lt;br&gt;
#   n=&#39;,intensive_sports,&#39; did intensive sports, &lt;br&gt;
#   n=&#39;,changed_contraception,&#39; changed contraception,&lt;br&gt;
#   n=&#39;,broke_up,&#39; broke up, n=&#39;,lost_more_than_8kg,&#39; lost &gt; 8kg, &lt;br&gt;
#   n=&#39;,BMI_lt_17,&#39; BMI &lt; 17, n=&#39;,BMI_gt_30,&#39; BMI &gt; 30, &lt;br&gt;
#   n=&#39;,confident_that_cycle_irregular,&#39; irregular cycle (confident)&quot;]
# 
#   c_cons[&quot;Included (conservative)&lt;br&gt;
#   n=&#39;,criterion_conservative,&#39;&quot;]
# 
#   c_strict_ineligible[&quot;Excluded n=&#39;,stressed,&#39; stressed, &lt;br&gt;
#   n=&#39;,cycle_possibly_irregular,&#39; possibly irregular cycle&quot;]
# 
#   c_strict[&quot;Included (strict)&lt;br&gt;
#   n=&#39;,criterion_strict,&#39;&quot;]
# 
#   hc_lax_ineligible[&quot;Excluded n=&#39;,hc$older_than_40,&#39; older than 40,&lt;br&gt;
#   n=&#39;,hc$finished_post_survey,&#39; did not finish study, &lt;br&gt;
#   n=&#39;,hc$breast_feeding,&#39; breast-feeding, &lt;br&gt;
#   n=&#39;,hc$long_or_short_cycle,&#39; cycle length not in 22-37 days&quot;]
# 
#   hc_lax[&quot;Included (lax)&lt;br&gt;
#   n=&#39;,hc$criterion_lax,&#39;&quot;]
# 
#   hc_cons_ineligible[&quot;Excluded n=&#39;,hc$heavy_smokers,&#39; heavy smokers, &lt;br&gt;
#   n=&#39;,hc$intensive_sports,&#39; did intensive sports, &lt;br&gt;
#   n=&#39;,hc$changed_contraception,&#39; changed contraception,&lt;br&gt;
#   n=&#39;,hc$broke_up,&#39; broke up, n=&#39;,hc$lost_more_than_8kg,&#39; lost &gt; 8kg, &lt;br&gt;
#   n=&#39;,hc$BMI_lt_17,&#39; BMI &lt; 17, n=&#39;,hc$BMI_gt_30,&#39; BMI &gt; 30, &lt;br&gt;
#   n=&#39;,hc$confident_that_cycle_irregular,&#39; irregular cycle (confident)&quot;]
# 
#   hc_cons[&quot;Included (conservative)&lt;br&gt;
#   n=&#39;,hc$criterion_conservative,&#39;&quot;]
# 
#   hc_strict_ineligible[&quot;Excluded n=&#39;,hc$stressed,&#39; stressed, &lt;br&gt;
#   n=&#39;,cycle_possibly_irregular,&#39; possibly irregular cycle&quot;]
# 
#   hc_strict[&quot;Included (strict)&lt;br&gt;
#   n=&#39;,hc$criterion_strict,&#39;&quot;]
# 
# 
# 
#   start --&gt; ineligible
#   start --&gt; eligible
#   start --&gt; notfinish
#   eligible --&gt; hc
#   eligible --&gt; horm_ineligible
#   eligible --&gt; nc
#   nc --&gt; c_lax
#   nc --&gt; c_lax_ineligible
#   hc --&gt; hc_lax_ineligible
#   hc --&gt; hc_lax
#   c_lax --&gt; c_cons
#   c_lax --&gt; c_cons_ineligible
#   hc_lax --&gt; hc_cons_ineligible
#   hc_lax --&gt; hc_cons
#   c_cons --&gt; c_strict
#   c_cons --&gt; c_strict_ineligible
#   hc_cons --&gt; hc_strict_ineligible
#   hc_cons --&gt; hc_strict
# 
# classDef default fill:#fff,stroke:#000,stroke-width:1px
# &#39;)
# )
# mermaid(consort, width = 3000, height = 2000)</code></pre>
<pre class="r"><code># graphviz
consort = with(pipeline,
  paste0(&#39;digraph g {
  start [shape = box, label = &quot;Participants enrolled
N=&#39;,signed_up,&#39;&quot;];
  ineligible [shape = box, label = &quot;Ineligible
n=&#39;,ineligible,&#39;&quot;];
notfinish [shape = box, label = &quot;Did not finish pre-survey
n=&#39;,did_not_complete_pre_survey,&#39;&quot;];
eligible [shape = box, label = &quot;Finished pre-survey
n=&#39;,finished_pre_survey,&#39;&quot;];

horm_ineligible [shape = box, label = &quot;Excluded n=&#39;,never_did_diary,&#39; no diary entries,
n=&#39;,pregnant,&#39; pregnant, n=&#39;,infertile,&#39; infertile,
n=&#39;,sterilised,&#39; sterilised,
n=&#39;,no_period,&#39; fertility not estimable&quot;];

nc [shape = box, label = &quot;Naturally cycling
n=&#39;,naturally_cycling,&#39;&quot;];

hc [shape = box, label = &quot;Using hormonal contraception
n=&#39;,hc$HC_users,&#39;&quot;];

c_lax_ineligible [shape = box, label = &quot;Excluded n=&#39;,older_than_40,&#39; older than 40,
n=&#39;,finished_post_survey,&#39; did not finish study,
n=&#39;,hc_users_broad,&#39; used morning-after-pill,
n=&#39;,breast_feeding,&#39; breast-feeding, n=&#39;,pill_last_3m,&#39; HC used in last 3m,
n=&#39;,hormonal_medicine,&#39; hormonal medication,
n=&#39;,long_or_short_cycle,&#39; cycle length not in 22-37 days&quot;];

c_lax [shape = box, label = &quot;Included (lax)
n=&#39;,criterion_lax,&#39;&quot;];

c_cons_ineligible [shape = box, label = &quot;Excluded n=&#39;,heavy_smokers,&#39; heavy smokers,
n=&#39;,intensive_sports,&#39; did intensive sports,
n=&#39;,broke_up,&#39; broke up, n=&#39;,changed_contraception,&#39; changed contraception,
n=&#39;,lost_more_than_8kg,&#39; lost &gt; 8kg,
n=&#39;,BMI_lt_17,&#39; BMI &lt; 17, n=&#39;,BMI_gt_30,&#39; BMI &gt; 30,
n=&#39;,confident_that_cycle_irregular,&#39; irregular cycle (confident)&quot;];

c_cons [shape = box, label = &quot;Included (conservative)
n=&#39;,criterion_conservative,&#39;&quot;];

c_strict_ineligible [shape = box, label = &quot;Excluded n=&#39;,stressed,&#39; stressed,
n=&#39;,cycle_possibly_irregular,&#39; possibly irregular cycle&quot;];

c_strict [shape = box, label = &quot;Included (strict)
n=&#39;,criterion_strict,&#39;&quot;];

hc_lax_ineligible [shape = box, label = &quot;Excluded n=&#39;,hc$older_than_40,&#39; older than 40,
n=&#39;,hc$finished_post_survey,&#39; did not finish study,
n=&#39;,hc$breast_feeding,&#39; breast-feeding,
n=&#39;,hc$long_or_short_cycle,&#39; cycle length not in 22-37 days&quot;];

hc_lax [shape = box, label = &quot;Included (lax)
n=&#39;,hc$criterion_lax,&#39;&quot;];

hc_cons_ineligible [shape = box, label = &quot;Excluded n=&#39;,hc$heavy_smokers,&#39; heavy smokers,
n=&#39;,hc$intensive_sports,&#39; did intensive sports,
n=&#39;,hc$broke_up,&#39; broke up, n=&#39;,hc$changed_contraception,&#39; changed contraception,
n=&#39;,hc$lost_more_than_8kg,&#39; lost &gt; 8kg,
n=&#39;,hc$BMI_lt_17,&#39; BMI &lt; 17, n=&#39;,hc$BMI_gt_30,&#39; BMI &gt; 30,
n=&#39;,hc$confident_that_cycle_irregular,&#39; irregular cycle (confident)&quot;];

hc_cons [shape = box, label = &quot;Included (conservative)
n=&#39;,hc$criterion_conservative,&#39;&quot;];

hc_strict_ineligible [shape = box, label = &quot;Excluded n=&#39;,hc$stressed,&#39; stressed,
n=&#39;,cycle_possibly_irregular,&#39; possibly irregular cycle&quot;];

hc_strict [shape = box, label = &quot;Included (strict)
n=&#39;,hc$criterion_strict,&#39;&quot;];



start -&gt; { ineligible eligible notfinish }
eligible -&gt; { hc horm_ineligible nc};
nc -&gt; { c_lax c_lax_ineligible }
hc -&gt; { hc_lax hc_lax_ineligible }
c_lax -&gt; { c_cons c_cons_ineligible }
hc_lax -&gt; { hc_cons hc_cons_ineligible }
c_cons -&gt; { c_strict c_strict_ineligible }
hc_cons -&gt; { hc_strict hc_strict_ineligible }
}&#39;)
)
grViz(diagram = consort)</code></pre>
<div id="htmlwidget-67403951078ed4d0bdf7" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-67403951078ed4d0bdf7">{"x":{"diagram":"digraph g {\n  start [shape = box, label = \"Participants enrolled\nN=1720\"];\n  ineligible [shape = box, label = \"Ineligible\nn=259\"];\nnotfinish [shape = box, label = \"Did not finish pre-survey\nn=253\"];\neligible [shape = box, label = \"Finished pre-survey\nn=1208\"];\n\nhorm_ineligible [shape = box, label = \"Excluded n=54 no diary entries,\nn=24 pregnant, n=5 infertile,\nn=12 sterilised,\nn=70 fertility not estimable\"];\n\nnc [shape = box, label = \"Naturally cycling\nn=421\"];\n\nhc [shape = box, label = \"Using hormonal contraception\nn=622\"];\n\nc_lax_ineligible [shape = box, label = \"Excluded n=46 older than 40,\nn=137 did not finish study,\nn=2 used morning-after-pill,\nn=6 breast-feeding, n=14 HC used in last 3m,\nn=25 hormonal medication,\nn=10 cycle length not in 22-37 days\"];\n\nc_lax [shape = box, label = \"Included (lax)\nn=143\"];\n\nc_cons_ineligible [shape = box, label = \"Excluded n=4 heavy smokers,\nn=6 did intensive sports,\nn=3 broke up, n=0 changed contraception,\nn=2 lost > 8kg,\nn=3 BMI < 17, n=8 BMI > 30,\nn=5 irregular cycle (confident)\"];\n\nc_cons [shape = box, label = \"Included (conservative)\nn=112\"];\n\nc_strict_ineligible [shape = box, label = \"Excluded n=43 stressed,\nn=12 possibly irregular cycle\"];\n\nc_strict [shape = box, label = \"Included (strict)\nn=57\"];\n\nhc_lax_ineligible [shape = box, label = \"Excluded n=7 older than 40,\nn=168 did not finish study,\nn=2 breast-feeding,\nn=28 cycle length not in 22-37 days\"];\n\nhc_lax [shape = box, label = \"Included (lax)\nn=374\"];\n\nhc_cons_ineligible [shape = box, label = \"Excluded n=10 heavy smokers,\nn=18 did intensive sports,\nn=10 broke up, n=14 changed contraception,\nn=6 lost > 8kg,\nn=7 BMI < 17, n=10 BMI > 30,\nn=6 irregular cycle (confident)\"];\n\nhc_cons [shape = box, label = \"Included (conservative)\nn=293\"];\n\nhc_strict_ineligible [shape = box, label = \"Excluded n=120 stressed,\nn=12 possibly irregular cycle\"];\n\nhc_strict [shape = box, label = \"Included (strict)\nn=161\"];\n\n\n\nstart -> { ineligible eligible notfinish }\neligible -> { hc horm_ineligible nc};\nnc -> { c_lax c_lax_ineligible }\nhc -> { hc_lax hc_lax_ineligible }\nc_lax -> { c_cons c_cons_ineligible }\nhc_lax -> { hc_cons hc_cons_ineligible }\nc_cons -> { c_strict c_strict_ineligible }\nhc_cons -> { hc_strict hc_strict_ineligible }\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="final-step" class="section level2">
<h2>Final step</h2>
<p>Save the data.</p>
<pre class="r"><code>new_names = c(&quot;session&quot;, setdiff(names(xsection), prev_names))
diary = merge(xsection %&gt;% select(one_of(new_names)), diary, by = &quot;session&quot;, all.x = T)
save( xsection, diary, file = &quot;full_data.rdata&quot;)  </code></pre>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
